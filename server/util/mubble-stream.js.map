{"version":3,"file":"mubble-stream.js","sourceRoot":"","sources":["../../packages/server/src/util/mubble-stream.ts"],"names":[],"mappings":"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"}