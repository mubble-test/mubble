{"version":3,"file":"master.js","sourceRoot":"","sources":["../../packages/server/src/cluster/master.ts"],"names":[],"mappings":"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"}