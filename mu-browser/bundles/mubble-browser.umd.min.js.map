{"version":3,"sources":["../../packages/browser/projects/mu-browser/src/lib/mu-browser.service.ts","../../packages/browser/projects/mu-browser/src/lib/util/event-broadcast.ts","../../packages/browser/projects/mu-browser/src/lib/util/dom-helper.ts","../../packages/browser/projects/mu-browser/src/lib/util/hashid-converter.ts","../../packages/browser/projects/mu-browser/src/lib/util/audio-player.ts","../../packages/browser/projects/mu-browser/src/lib/util/bounded-value.ts","../../packages/browser/projects/mu-browser/src/lib/util/multi-step-value.ts","../../packages/browser/projects/mu-browser/src/lib/util/url-helper.ts","../../packages/browser/projects/mu-browser/src/lib/util/utility.ts","../../packages/browser/projects/mu-browser/src/lib/util/table-data-manager.ts","../../packages/browser/projects/mu-browser/src/lib/util/performance-metrics.ts","../../packages/browser/projects/mu-browser/src/lib/ui/nail/nail-interface.ts","../../packages/browser/projects/mu-browser/src/lib/rc-browser.ts","../../packages/browser/projects/mu-browser/src/lib/ui/nail/nail.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/injection-interface.ts","../../packages/browser/projects/mu-browser/src/lib/ui/router/trackable-screen.ts","../../packages/browser/projects/mu-browser/src/lib/ui/router/shared-router-constants.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/alert-dialog/alert-dialog.component.ts","../../packages/browser/projects/mu-browser/src/lib/ui/router/ui-router.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/injection-base.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/bottom-in/bottom-in.component.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/modal-popup/modal-popup.component.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/loading/loading-overlay/loading-overlay.component.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/translate/mu-lang-en.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/translate/mu-dictionary.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/translate/translations.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/translate/translate.service.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/filter/filter.component.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/mu-components-routing.module.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/translate/translate.pipe.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/custom-breakpoints.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/directives/nc-autofocus.directive.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/directives/nc-maxlength.directive.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/directives/longpress.directive.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/directives/nc-style-class.directive.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/directives/adjust-elements.directive.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/directives/nc-fallback-char.directive.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/directives/keyboard.directive.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/directives/next-inp-focus.directive.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/directives/nc-allow-single-click.directive.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/directives/nc-img-fallback.directive.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/directives/validate-img.directive.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/pipes/generic.pipe.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/pipes/extract-mobile-no.pipe.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/pipes/currency.pipe.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/drop-down-multi-select/drop-down-multi-select.component.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/loading/loading.component.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/loading/loading-error/loading-error.component.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/toast/toast.component.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/infinite-scroll/infinite-scroll.component.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/input-container/input-validator.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/file-upload/file-upload.component.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/input-container/input-container.component.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/dialer/dialer.component.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/mu-form-container/mu-form-container.component.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/mu-data-table/mu-data-table.component.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/keypad/keypad.component.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/page-not-found/page-not-found.component.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/directives/masking-value.directive.ts","../../packages/browser/projects/mu-browser/src/lib/mu-browser.module.ts","../../packages/browser/projects/mu-browser/src/lib/xmn/enc-provider-browser.ts","../../packages/browser/projects/mu-browser/src/lib/xmn/text-enc-dec.ts","../../packages/browser/projects/mu-browser/src/lib/xmn/ws-browser.ts","../../packages/browser/projects/mu-browser/src/lib/xmn/xmn-router-browser.ts","../../packages/browser/projects/mu-browser/src/lib/storage/user-key-value.ts","../../packages/browser/projects/mu-browser/src/lib/storage/global-key-value.ts","../../packages/browser/projects/mu-browser/src/lib/master/master-db.ts","../../packages/browser/projects/mu-browser/src/lib/master/master.ts","../../packages/browser/projects/mu-browser/src/lib/storage/storage-provider.ts","../../packages/browser/projects/mu-browser/src/lib/storage/config-key-value.ts","../../packages/browser/projects/mu-browser/src/lib/ui/router/routing-strategy.ts","../../packages/browser/projects/mu-browser/src/lib/ui/router/location-nc.ts","../../packages/browser/projects/mu-browser/src/lib/ui/router/routable-screen.ts","../../packages/browser/projects/mu-browser/src/lib/ui/router/location-strategy.ts","../../packages/browser/projects/mu-browser/src/lib/ui/mu-components/loading/api-state.ts","../../packages/browser/projects/mu-browser/src/lib/animations/nav-transition.ts","../../packages/browser/projects/mu-browser/src/lib/animations/bottom-fly-in.ts","../../packages/browser/projects/mu-browser/src/lib/framework/constants.ts","../../packages/browser/projects/mu-browser/src/lib/framework/bridge/native-constants.ts","../../packages/browser/projects/mu-browser/src/lib/framework/bridge/web-api.ts","../../packages/browser/projects/mu-browser/src/lib/framework/bridge/web-bridge.ts","../../packages/browser/projects/mu-browser/src/lib/framework/bridge/mu-bridge.ts","../../packages/browser/projects/mu-browser/src/lib/framework/bridge/sdk-bridge.ts","../../packages/browser/projects/mu-browser/src/lib/framework/router-app.ts","../../packages/browser/projects/mu-browser/src/lib/framework/analytics/analytics-event.ts","../../packages/browser/projects/mu-browser/src/lib/framework/analytics/analytics-screen-info.ts","../../packages/browser/projects/mu-browser/src/lib/framework/analytics/analytics-event-logger.ts","../../packages/browser/projects/mu-browser/src/lib/framework/analytics/analytics-screen-manager.ts","../../packages/browser/projects/mu-browser/src/lib/framework/ui-router/mu-ui-router.ts","../../packages/browser/projects/mu-browser/src/lib/jest-rc-browser.ts","../../packages/browser/projects/mu-browser/src/lib/framework/app-ui-event.ts"],"names":["Injectable","args","providedIn","EventSystem","EVENT_PREFIX","broadcast","rc","eventName","data","fullName","startsWith","nodeList","document","querySelectorAll","event","CustomEvent","detail","index","length","dispatchEvent","window","isStatus","status","eventToElements","elementClassName","elementSubscribe","element","cb","classes","className","split","indexOf","push","join","removeEventListener","addEventListener","subscribe","options","subscribeAll","eventNames","forEach","bind","DomHelper","addClass","getTransform","xPixel","yPixel","zPixel","transform","getPercentTransform","xPercent","yPercent","setTransform","elem","style","setPercentTransform","getQuickAnim","HashidConverter","encodeString","key","str","hashids","Hashids","charCodes","i","code","charCodeAt","encode","decodeHashids","hashid","decode","charCode","String","fromCharCode","AudioFile","fileName","volume","this","AudioPlayer","SELECT","audioMap","setupLogger","prototype","play","file","control","currentTime","paused","ended","readyState","pause","Audio","load","err","isError","error","getName","BoundedValue","initState","finalState","contInitState","contFinalState","value","elemDirUp","elemLow","elemHigh","contDirUp","contLow","contHigh","compute","contValue","oldValue","totalDiff","thisDiff","elemDiff","getDecimalValue","digitsAfterDecimal","Number","toFixed","isCloserToInit","MultiStepValue","minVal","viewSize","count","applyTol","quickMove","currentIndex","currentValue","tolerance","maxVal","transition","delta","newValue","updateViewSize","updateCount","final","speed","quickRatio","newIndex","chgNeeded","lowerBound","Math","round","ceil","abs","UrlHelper","getUrlParams","genericUrl","idx","queries","substring","params","decodeStringFromHashids","encodeStringAsHashids","MuUtility","isOfTypeUiError","errObj","hasOwnProperty","isNetworkUnhealthy","bridge","isRunningInBrowser","navigator","onLine","netType","getCordovaNetworkType","NetworkType","absent","unknown","isValidIndianMobNum","number","sanitizeNumber","RegExp","test","get10digitMobNumber","num","temp","getNetworkType","wifi","getErrorText","transServ","errorMessage","errorText","XmnError","NetworkNotPresent","instant","ConnectionFailed","RequestTimedOut","SendTimedOut","getLocation","geolocation","getCurrentPosition","position","JSON","stringify","lat","coords","latitude","lng","longitude","expandTemplate","template","expandTemplateObj","templateObj","parseURLForRouter","parser","protocol","href","replace","searchObject","search","decodeURIComponent","pathname","host","hostname","port","hash","getErrorScreenState","errorCode","UnAuthorized","min","getBase64","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","onerror","getCheckSum","message","encoder","TextEncoder","crypto","subtle","digest","buffer","_a","sent","hexString","byteArray","Uint8Array","hexCode","toString","getCompressedImage","changeOrientation","readerEvent","image","Image","src","target","result","imageEvent","exif","_this","getCanvasImage","getData","orientation","exifdata","Orientation","undefined","canvas","createElement","ctx","getContext","maxSize","width","height","translate","scale","rotate","PI","drawImage","restore","compositeOperation","globalCompositeOperation","fillStyle","fillRect","toDataURL","getBase64Size","base64","slicedBase64","includes","padding","endsWith","createNavUrl","url","object","navUrl","tempUrl","urlObj","parse","decodeURI","_b","__values","Object","keys","_c","next","done","map","TableDataManager","parentInst","tableInst","dataParams","currentKeyIndex","dataObject","init","tableConfig","lastIndex","dispRows","totalDataCount","totalRecords","slice","updateData","mapData","addingIndex","pendingRequest","setTableData","dataKey","find","lastKeyIndex","index_1","loadMore","clearData","updateDataStatus","dataIndex","errorOccur","setSelectableData","PerformanceMetrics","taskName","cycles","startTs","now","startStep","stepName","cycle","stepMap","endTs","Cycle","Step","endStep","step","console","finish","output","task","totalMs","cycleCount","cyclePerf","ResultEntry","stepPerf","markEntry","perf","info","marks","logEntry","sortBy","marks_1","marks_1_1","mark","ts","entry","minIdx","max","maxIdx","total","performance","timing","navigationStart","Date","name","insertInto","BaseTime","_super","__extends","call","format","MAX_SAFE_INTEGER","average","UP","RIGHT","DOWN","LEFT","X","Y","CONSOLE_FN_MAP","LOG_LEVEL","DEBUG","log","STATUS","WARN","warn","ERROR","InitConfigBrowser","runMode","logLevel","tzMin","NONE","RUN_MODE","PROD","PRE_PROD","InitConfig","RunStateBrowser","RunState","RCBrowserLogger","logToConsole","level","logStr","RCLoggerBase","RunContextBrowser","initConfig","runState","contextId","contextName","preInit","logger","RunContextBase","NEXT_SESSION_ID","TouchSession","startX","id","TOUCH_EVENT","Nail","appComponent","renderer","config","measure","handlers","compName","constructor","isAssert","assert","axisX","axisY","setConfig","pageWidth","body","clientWidth","panEventHandler","onNailEvent","listen","animateFn","onRunAnimation","changeConfig","session","panEndEvent","type","requestAnimate","animateParam","_i","arguments","animHandle","cancelAnimationFrame","requestAnimationFrame","animSessionId","setDirections","disallowLeft","disallowRight","threshold","gutterWidth","touches","extractEventAttr","onTouchStart","isDebug","debug","ignore","deltaX","lastX","deltaY","lastY","startY","axis","ascertained","ascertainDirection","AXIS","direction","DIRECTION","consumed","ifNail","onPanMove","eventY","preventDefault","stopPropagation","deltaMs","change","timeTaken","onPanEnd","onTouchEnd","touch","pageX","pageY","posDx","posDy","gutterLeft","gutterRight","onPanStart","onPanAnimate","apply","tslib","__spread","destroy","handler","INJECTION_PARAM","CALLER","INJECT","TrackableScreen","onApiComplete","success","ngOnDestroy","ComponentRoutes","Modal","BottomIn","LoadingOverlay","Alert","Filter","YES","NO","AlertDialogComponent","getWidth","getRouteName","isUserVisited","setParam","queryParams","title","positiveActText","negativeActText","allowBack","showCloseBtn","positiveLink","setCaller","caller","initFromParent","ip","showTitle","myParent","close","closeFromParent","setResult","isNotDismissable","canGoBack","onCancel","DIALOG_RESULT","onContinue","Component","selector","decorators","Inject","hashIndex","location","baseHref","substr","BASE_HREF","PRIMARY_OUTLET","MODAL_OUTLET","TOP","MIDDLE","BOTTOM","NEXT","CURRENT","POP","StackItem","OutletEntry","component","invCount","UiRouter","rcBrowser","router","componentRegistry","urlStack","warnedUser","firstNavDone","browserStack","lastNavMethod","lastPopIndex","lastNavUrl","lastGoingBack","currentQpId","curCompMap","codePop","runningInBrowser","isSdkApp","iframeHistLength","historyWrapper","HistoryWrapper","replaceState","pushState","onPopState","events","onNavEnd","navigate","routeTo","extras","replaceAllUrls","replaceIndex","navigateByUrl","outlets","primary","modal","rootNavigate","areWeGoingBack","isModalActive","isShowingPopup","curOutlet","urlOrCommand","outlet","replaceUrl","NavMethod","urlStackLength","skipLocationChange","nc_paramsId","paramsId","modalRoute","curQueryParam","Array","isArray","createUrlTree","serializeUrl","popupBottomIn","componentRoute","repUrl","showInModal","popupModal","showAlertDialog","hasQueryParamsById","getUrlStackLength","getCurrentComponent","getCurrentRouteName","topUrl","onNavCancel","getCurQueryParams","urlTree","parseUrl","segments","root","children","isWarn","path_1","segment","path","getModuleName","getCurrentQueryParams","getQueryParams","clearHisory","distanceFromRoot","getState","go","setIframeHistLength","updateQueryParam","queryParam","setComponentForOutlet","oldEntry","removeComponentForOutlet","registerComponent","showModalPage","goBack","whereOrByHowMuch","onPopUpClosed","goBackInternal","stackLen","where","Error","ne","qpId","e","canCompGoBack","getLength","notifyAppClose","reload","notifyUserBackPress","goBackBy","isToolTipShown","lastIdx","lastItem","comp","onBackPressed","removeOverlayIfExists","NavigationEnd","hashPtr","refIndex","stackLength","outletEntry","onMubbleScreenChange","setComponentParams","syncBrowserHistory","onMubbleScreenNavEnd","onRouterInit","routerState","snapshot","qp","isEqual","lastParams","fromIndex","browserStackLen","browserGotoRoot","getComponent","state","historyLength","history","historyState","newState","InjectionParentBase","componentFactoryResolver","route","injectAt","injectedComponent","injectComponent","inject","factory","resolveComponentFactory","icRef","createComponent","changeDetectorRef","detectChanges","instance","injected","childRequestedClose","STATE","HALF","FULL","ROUTE_ANIM_MS","QUICK_ANIM_MS","BottomInComponent","ref","__routeAnimation","animElem","allowFullPage","routeEndProcessed","getGlobalLogLevel","onHostClick","animateClose","onRouteAnimationStart","onRouteAnimationDone","backPressed","getTitle","halfHeight","getHalfHeight","getDefaultState","clientHeight","top","ngAfterViewInit","panYMax","$compCont","compContainer","nativeElement","compHeight","headerHeight","header","getBoundingClientRect","panYMin","main","nail","startTop","scrollTop","y","needAnimate","panY","animateChange","onFull","onHalf","onClick","runAnimation","animValue","animations","trigger","group","query","opacity","animate","ActivatedRoute","ComponentFactoryResolver","Renderer2","ChangeDetectorRef","HostBinding","HostListener","ViewChild","static","read","ViewContainerRef","Input","ModalPopupComponent","getCssClassName","ignoreScroll","isNotScrollable","childComponent","LANG_EN_TRANS","mu_inpt_cont_futr_date_err","mu_inpt_cont_min_amnt_err","mu_inpt_cont_strt_date_err","mu_inpt_cont_end_date_err","mu_inpt_cont_date_err","mu_inpt_cont_amnt_err","mu_inpt_cont_val_err","mu_fil_upl_retake_photo","mu_fil_upl_take_photo","mu_fil_upl_change_text","mu_fil_upl_upload_photo","mu_fil_upl_upload_err","mu_fil_upl_unknow_err","mu_inpt_cont_sel_err","mu_fltr_sub_titl","mu_fltr_aply_fltr","mu_fltr_clr_fltr","mu_fltr_rqrd","mu_fltr_clr_all","mu_dt_tbl_edit","mu_dt_tbl_save","mu_dt_tbl_empty_state","page_not_fond_vist_home","muDictionary","Mubble","Lang","English","TRANSLATIONS","InjectionToken","TRANSLATION_PROVIDERS","provide","useValue","multi","mergeDictionaries","dictionary","assign","TranslateService","_translations","defaultLang","fallback","obj","_d","keys_1","e_2","keys_1_1","getCurrentLanguage","currentLang","setDefaultLanguage","lang","enableFallback","enable","use","translation","addTranslations","langObj","words","word","concat","addMoreTranslations","INIT","CLEAR","UPDATE","FilterComponent","filterItems","webMode","displayCount","displayMode","DISPLAY_MODE","HORIZONTAL","selectedFilter","EventEmitter","stepSelectedFilter","filters","filterChips","ngOnInit","applyBtnText","applyBtnTitle","initialize","CONTEXT","updateLastAppliedFilters","lastFilters","applyFilters","inputContInstances","toArray","inputContInstance","onSubmit","hasError","valueChanged","emit","clearFilters","setFilterItems","setFilterChips","findIndex","onFilterSelected","resetFilters","fItem","currentIdx","this_1","val","splice","filterItems_1","filterItems_1_1","some","this_2","changed","displayType","DISPLAY_TYPE","CALENDAR_BOX","INPUT_BOX","SELECTION_BOX","ROW_INPUT_BOX","MULTI_CHECK_BOX","DROPDOWN_MULTI_CHECK_BOX","RADIO","AUTOCOMPLETE_SELECT","SLIDER","DATE_RANGE","dateRangeKeys","rangeKeys","NUMBER_RANGE","numRangeKeys","context","_e","mode","fItems","_f","_g","setNull","startDate","endDate","minAmount","maxAmount","this_3","_h","_j","ViewChildren","Output","routes","LoadingOverlayComponent","NgModule","imports","RouterModule","forChild","exports","TranslatePipe","_translate","Pipe","pure","alias","suffix","mediaQuery","overlapping","CustomBreakPointsProvider","BREAKPOINT","ɵ0$1","NcAutoFocusDirective","changeRef","focus","Directive","ElementRef","pattern","NcMaxLengthDirective","ngZone","maxLength","updatedValue","eventHandlers","eventHandler","clipBoardEventHandler","handleEvent","setTimeout","runOutsideAngular","srcElement","inputMode","trim","isNaN","invalidIndex","formatStr","scrollHeight","emitUpdatedValue","run","NgZone","LongPressDirective","timeoutId","intervalId","onLongPress","onLongPressing","isTouching","timeout","defineProperty","isPressing","isLongPressing","onMouseDown","setInterval","onMouseLeave","endPress","clearTimeout","clearInterval","NcStyleClassDirective","ncClass","AdjustElementsDirective","webModeCss","calcWidth","marginRight","maxWidth","NcFallbackCharDirective","dynamicColorObj","createDynamicColor","initialChar","getFirstCharacter","setColor","spH","spL","h","j","s","col","strArr","regExp","charStr","filter","needOneChar","charAt","toUpperCase","innerHTML","background","KeyboardDirective","parentDiv","isHeghtAuto","onCustomEvent","onBlur","isRunningInMWeb","handleKeyBoardEvents","debounce","bodyHeight","originalBodyHeight","keyboardHeight","currKeyboardHt","removeStyle","originalParentHeight","scrollTo","parentDivRect","activeElement","scrollIntoView","behaviour","block","inline","removeClass","NextInpFocusDirective","onHostSubmit","onEnter","nextInpFocusElem","BUTTON","NcAllowSingleClickDirective","ncClick","clickEnabled","originialColor","onMouseOver","tagName","getComputedStyle","getPropertyValue","$event","applyOriginalBg","allowClickDelay","allowClick","cursor","WALLET","APP","BANK","PROFILE","APP_ICON","NcImgFallbackDirective","onError","r","g","b","getColor","setFallbackImage","IMAGE_TYPE","color","ValidateImgDirective","imgLoaded","imgError","payload","onLoad","GenericPipe","injector","pipeName","pipeParams","pipe","get","Injector","ExtractMobileNoPipe","utils","CurrencyPipe","decimalReq","currency","maximumFractionDigits","formattedNumber","toLocaleString","DropDownMultiSelectComponent","isDropDownOpen","isSelectAll","showPlaceHolder","listOptions","selectedItems","selectedAll","showDropDown","calExpStr_1","calExpStr_1_1","exp","offsetParent","handlePlaceHolder","option","selected","handleDropDown","onCheckBoxClick","checked","onSelectAll","LoadingComponent","apiLoadingBottomIn","LoadingErrorComponent","apiErrorAction","onErrorAction","InfiniteScrollComponent","items","upperBufferCount","lowerBufferCount","listEnd","viewPortItems","previousStartIdx","previousEndIdx","itemsHeight","translateY","lastScrolledTop","currActiveElemIndex","lastActiveElemIndex","scrollHandler","refreshList","ngOnChanges","setInitHolderHeight","viewPortChildren","scrollCont","holderHeight","calculateHeight","setStyle","contentHolder","totalHeight","cacheViewedItemsHeight","viewPortChildren_1","viewPortChildren_1_1","updateViewPortItems","viewPortItemsHeight","averageHeight","containerHeight","start","end","elementsScrolled","elementsVisible","Infinity","currentHolderHeight","highlight","isElementInViewPort","parentElem","viewPortTop","viewPortBottom","elemTop","offsetTop","updateCurrActiveElemIdx","viewPortElements","scrolledDown","elementVisible","anchorId","scrollToTop","scrollToItem","getScrollableElement","getViewedElementsId","viewedElementsIds","getActiveElementId","firstElem","activeElementId","InputValidator","dateValidator","startDateTS","endDateTS","isDate","getTime","toDate","setErrors","noStartDate","startDateExceed","futureDateValidatorIfAllowed","dateNowTS","futureDate","amountValidator","noMinAmount","minAmountExceed","futureDateValidator","date","PERMISSION","CAMERA","FileUploadComponent","uploadFileCont","onFileUpload","files","size","warnText","uiRouter","showToast","strippedBase64","mimeType","checksum","uploadDoc","uploadedDocParams","updatePicture","takePictureFromCamera","resp","eventPropagate","takePicture","getPermission","permGiven","then","permResp","uploadFile","MouseEvent","bubbles","selectDocumentFile","docObj","isRequired","InputContainerComponent","formBuilder","displayLabel","dropdownOpen","formatLabel","sliderLabel","getFilterId","inputParams","reset","inputForm","validators","markAsTouched","dateRange","controls","numberRange","TEXT_AREA","TOGGLE","BUTTON_TOGGLE","dateRangeValue","numRangeValue","IMAGE_UPLOAD","fileUploadParams","ROW_RADIO","isCalanderOpen","picker","opened","closeCalander","selectedOption","values","setValue","emitStepSelection","onToggleChane","onBtnToggleChange","fileUploadValue","checkAllOptions","checkedOption","idIndex","setChangedValues","setDate","isDateObj","setDateRange","sDate","eDate","setNumberRange","setAutocompleteValue","displayFn","onSliderValueChange","minValue","source","maxValue","invalid","fileUplInst","dropDownToggle","valueEntered","formValidations","Validators","required","validation","FormControl","selectedValues_1","opt","setDisabled","isDisabled","filteredOptions","valueChanges","startWith","filterOptions","valiArr","allowFutureDate","setValidators","disable","validator","selectedValues_2","selFilter","inputText","filterValue","toLowerCase","FormBuilder","MatDatepicker","DialerComponent","eventPropagte","onHostKeyup","onKeyDown","slicedItems","dialerParams","dialerOptions","selectedItem","rect","highlightPos","multiStepVal","which","stopImmediatePropagation","KEY_ANIM_TRANS","sound","latestIndex","ANIM_TRANSITION","totalDisplacement","interval","getSelectedItem","scrollToElem","MuFormContainerComponent","lastInpField","maxDate","inputContainers","inputCont","manual","formParams","formOutputParams","TIME","dateFormGroup","dateValue","numFormGroup","pickers","clearForm","formName","dateGroup","numGroup","enterOnLastInput","addControl","setInputDisabled","FormGroup","formValidators","focusElement","updateValidators","formIds","form","MuDataTableComponent","changeDet","loadMoreData","onRowSelect","onDetailClick","onCellClick","onRowEdit","onDownload","selectedIndexes","selAllMap","headerFields","dataToDisplay","pageNumbers","filterFields","dataMap","editForm","COL_TYPE","getLogLevel","changes","setUpTable","filterCont","maxHeight","headers","colType","isTogglePresent","isEditable","enableFilter","HYPER_LINK","TEXT","createDataMap","createPageNumbers","stickyConfig","noOfCols","stickyInfo","nonStickyWidth","stickyWidth","nSColWidth","widthPerc","currPageIndex","prevPageIndex","pageIndex","totalPages","pageNumber","updatePageNumbers","rowClick","rowData","selEvent","rowIndex","isSelected","browserEvent","rowSelect","slctAllBox","selectAll","selAllEvent","selectedRows","radioSelect","selectedIndex","moreDetailsClick","detKey","moreSelEvent","toggleRow","startPageIndex","dataSetCount","currData","mapKey","lazyLoad","onPageClick","loadingFailed","lastAppliedFilters","isHzFilters","filterCompChildren","cellClick","buttonEvent","headerKey","MULTI_LINE","dataKeyArr","navInfo","utility","filteredData","dataRow","insertRow","newData","firstPageData","unshift","pop","newIndexes","deleteRow","enableSelect","editRow","isEdit","editEvent","editedValues","updateRow","applyFilter","unselectIndexes","rowIndexes","rowIndexes_1","rowIndexes_1_1","downloadTableData","getEditedRows","editedRows","rowObject","onDownloadClick","menuTrigger","closeMenu","downloadFormats","onSelectingFormat","openMenu","fileFormat","NORMAL","SHOW_DOT","NUMBER","BACK","DONE","DOT","KeypadComponent","keyPress","KEYBOARD_MODE","keyClick","inputNum","keyType","KEY_TYPE","onKeyBoardBack","onKeyBoardOk","onKeyBoardDot","PageNotFoundComponent","onHomeClick","MaskingValueDirective","maskedValue","updatedString","maskingParams","clonedInputNode","cloneNode","parentElement","appendChild","hidden","startSkipCount","totalSkipCount","endSkipCount","nextSibling","handelEvent","maskWith","isBackPressed","MuBrowserModule","forRoot","ngModule","providers","CommonModule","FormsModule","ReactiveFormsModule","FlexLayoutModule","MuComponentsRoutingModule","MatFormFieldModule","MatDatepickerModule","MatInputModule","MatSelectModule","MatAutocompleteModule","MatCheckboxModule","MatProgressBarModule","MatRadioModule","MatSliderModule","MatSlideToggleModule","MatButtonToggleModule","MatMenuModule","MatCardModule","MatRippleModule","MatDividerModule","declarations","ToastComponent","entryComponents","arShortCode","arUniqueId","pwc","utf8Encodings","TextEncDec","encFormat","RangeError","TypeError","binstr","unescape","encodeURIComponent","uar","ArrayBuffer","isView","arr","byteOffset","byteLength","charArr","escape","ASYM_ALGO","EncryptionBrowser","ci","rsaPubKey","iv","symAlgo","extractShortCode","shortName","extractUniqueId","customData","jsVersion","PakoWorkerClient","generateKey","syncKey","encodeHeader","wsConfig","encrypt","strToUnit8Ar","tsBuffer","encTs","tsB64","btoa","encryptSymKey","keyBuffer","encKey","keyB64","configBuffer","encConfig","configB64","exportKey","importKey","ar","decrypt","getArrayBuffer","encodeBody","stringifyWireObjects","leader","deflate","Encoder","MIN_SIZE_TO_COMPRESS","firstPassArray","secondPassArray","arOut","DataLeader","ENC_DEF_JSON","ENC_JSON","set","first","messages","json","wire","encrypted","compressed","objects","wm","decodeBody","inAr","deflated","BINARY","newLineCode","jsonStr","wo","WireObject","getWireObject","outAr","arData","decLen","DEF_JSON","inflate","uint8ArToStr","inJsonStr","inJson","ENC_BINARY","setNewKey","arEncNewKey","binToUnit8Ar","atob","getSyncKeyB64","binStr","from","c","TextDecoder","match","floor","AsyncRequest","apiName","requestId","nextRequestId","promise","reqMap","worker","Worker","onmessage","onMessage","inU8Array","sendMessage","to","asyncRequest","postMessage","__read","reqId","WsBrowser","socketCreateTs","lastMessageTs","sending","configured","connExpired","lastRequestTs","ephemeralEvents","timerPing","timer","register","cbTimerPing","lastRequestTimer","cbRequestTimer","uiArToB64","sendEphemeralEvent","provider","shift","send","ws","WebSocket","OPEN","bufferedAmount","anotherSendInProgress","_NotReady","sendInternal","requestClose","CLOSED","pendingMessage","encProvider","getPubKey","getEncIV","wsProviderConfig","pingSecs","maxOpenSecs","getMaxOpenSecs","toleranceSecs","custom","runAlwaysAsSecure","HANDSHAKE","protocolVersion","messageBody","binaryType","onopen","onOpen","onclose","onClose","isConnWithinPing","msgLen","firstMsg","wireObject","WIRE_TYPE","REQUEST","canStrtLastReqTimer","setLastReqTimer","setupTimer","providerReady","msgEvent","providerMessage","cleanup","providerFailed","_ConnectionExpired","processSysEvent","se","SYS_EVENT","WS_PROVIDER_CONFIG","msPingSecs","isInteger","errMsg","requestTs","pingTh","openTh","tickAfter","RFRSH_LAST_REQ_SECS","sessionTimedoutSecs","getSessionTimeOutSecs","diff","sessionTimedOut","WireSysEvent","PING","remove","TIMEOUT_MS","SEND_RETRY_MS","XmnRouterBrowser","serverUrl","pubKey","encIV","ongoingRequests","eventSubMap","lastEventTs","lastEventSendTs","urlParser","Protocol","WEBSOCKET","cls","timerReqResend","cbTimerReqResend","timerReqTimeout","cbTimerReqTimeout","timerEventTimeout","cbTimerEventTimeout","sendRequest","timeoutMS","wr","WireRequest","prepareConnection","_isSent","sendPersistentEvent","clientId","initEvents","WireEvent","EventTable","save","db","trySendingEvents","WireEphEvent","subscribeEvent","getCustomData","networkType","XmnDb","removeOldByTs","getOldEvents","arEvent","eventTable","wireEvent","uPromise","delayedPromise","errCode","finishRequest","EPH_EVENT","EVENT_RESP","REQ_RESP","eventResp","newConfig","updateCustomData","nextTimeout","timeoutAt","uError","transaction","__awaiter","put","orderBy","limit","arEt","item","et","belowOrEqual","delete","version","stores","mapToClass","Dexie","LAST_USER","USERS","UserKeyValue","storage","users","getUserKeyValue","cid","lastClientId","deserialize","registerNewUser","userLinkId","userName","setUserKeyValue","setScreenVisited","routeName","screenVisitedStates","setWebProfilePicBase64","_webProfilePicBase64","logOutCurrentUser","_sessionId","_userLinkId","_clientId","switchUserOnCurrRun","getAllUserLinkIds","ids","getClientIdForUserLink","reqUserLinkId","serialize","sessionId","getWebProfilePicBase64","getAllClientIds","getUserInfo","new","existing","_deviceId","deviceId","_obopayId","obopayId","webProfilePicBase64","$dump","getOwnPropertyNames","META_KEY","VALID_TYPES","Boolean","GlobalKeyValue","autoStore","propertyKey","Reflect","defineMetadata","fieldType","getMetadata","strValue","fieldMap","strOldValue","setGlobalKeyValue","extractFields","field","getGlobalKeyValue","strSavedValue","strDefaultValue","detectSaveChanges","proto","fieldz","getPrototypeOf","memory","store","__decorate","Segment","SYNC_HASH","ModelField","optional","MasterDb","versionSchema","syncHashModels","modelsWithKeys","schemaKey","modelsWithFields","schemaField","tableSchema","verifySegmentVersion","registerModelClass","modelName","classFn","classMap","getModelName","registerSchema","fieldName","isPrimaryKey","collection","fields","modelMap","models","st","model","models_1","models_1_1","onRouterAvailable","MASTER_UPDATE_EVENT","onMasterUpdate","getSyncRequest","globalKeyVal","getTableForClass","getTable","oldVersion","last","current","syncSegments","buildSchema","schema","keyStr","syncResponse","updated","modelData","applyMasterData","afterMasterUpdate","data_1","errorMsg","e_4","purge","clear","del","bulkDelete","mod","bulkPut","syncHashTable","modelTable","arMod","arMod_1","arMod_1_1","modelRec","rec","buildFullRec","x","err_1","stack","buildKeyRec","keyMap","outRec","keyName","validateType","arDel","keyObj","arDel_1","arDel_1_1","$all","Map","Master","getType","StorageProvider","storageKey","GLOBAL_PREFIX","localStorage","setItem","getItem","setGcConfig","CONFIG_PREFIX","category","getGcConfig","ConfigKeyVal","getConfig","RoutingStrategy","preserveComponents","myStore","logging","shouldDetach","logSnapshot","isRemembered","handle","shouldAttach","retrieve","shouldReuseRoute","future","curr","routeConfig","NcPlatformLocation","getBaseHrefFromDOM","fn","onHashChange","newPath","forward","back","PlatformLocation","RoutableScreen","AppLocationStrategy","getBaseHref","prepareExternalUrl","LocationStrategy","PROGRESS","SUCCESS","retryOnFailure","loadingText","retryButtonText","NavTransition","BottomFlyIn","ApiStateBuilder","ApiState","setCurrentState","currentState","setLoadingText","text","setEmptyDataText","emptyDataText","setErrorText","setRetryButtonText","setErrorCode","build","ANIM_DURATION","PAGE_TRANSITION_DURATION","IDLE","FORWARD","BACKWARD","ANIMATION_STYLE","pageTransition","zIndex","STAGGER_DURATION","FLY_STATE","DONT_FLY_STATE","bottomFlyIn","stagger","GcCategory","Notification","FeedbackEmail","SmsVerification","Help","Session","GcKey","GeneralConfig","HashidParams","LogLevel","DisableCaptcha","Response","CollectRequest","MobileSdkResponse","LaunchContextMode","BUSINESS","ANDROID_PERM","STORAGE","LOCATION","CONTACTS","SMS","GALLERY","IOS_PERM","BROWSER_PERM","MuWebApi","hasPermission","permission","checkPermission","permissions","mediaDevices","getUserMedia","video","audio","getPictureFromCamera","MuWebBridge","webApi","handleRequest","asyncResponseFromNative","setUserId","userId","logEvent","eventDataStr","setUserProperty","propName","fingerprintScan","scanBarcode","payViaQr","openInMobileBrowser","open","getNativeMigrationInfo","getCurrentLocation","error_message","closeMobileBrowser","getPhoneContacts","contacts","requestMobNumHint","selectPictureFromGallery","permissionGiven","dialogShown","writeExternalStyles","base64Data","saveBinaryFile","filePath","setNotificationConfig","closeApp","launchAppMarket","packageName","sendMail","email","subject","placeCall","mobileNumber","checkIfPkgInstalled","pkgName","listenForSmsCode","setVerStringToken","clientTransactionId","copyToClipBoard","openSoftInputKeyboard","hideSoftInputKeyboard","canAuthWithFingerprint","canAuth","resetApp","getDeviceInfo","setDebuggable","LOADING","INITIALIZED","SHOWN","MOBILE","WEB","CORDOVA","BROWSER","ANDROID","IOS","remoteUrl","appVersion","localStoragePath","appChannel","pseudoId","fcmId","adId","appInstallTs","LaunchContext","referrerParams","isUpgrade","MuBridge","requestMap","launchContext","mobileSdkParams","messageHandlers","cordova","userAgent","UserAgent","permObj","NATIVE.IOS_PERM","NATIVE.ANDROID_PERM","webBridge","NATIVE.BROWSER_PERM","State","onConnectionAttr","sendAsyncRequest","connAttr","NATIVE.LaunchContextMode","sdkType","SDK_TYPE","isRunningInDev","isRunningInIPad","_state","setStateShown","getDirectLink","directLink","setWebDirectLink","resetDirectLink","getReferrerParams","getUserAgent","getRemoteUrl","getAppVersion","getAppChannel","getPseudoId","getFcmId","getAdId","getAppInstallTime","getDeviceId","getLocalStoragePath","isWebSdkInvocation","isMobileSdkInvocation","isSdkInvocation","getSdkType","setMobileSdkParams","getMobileSdkSource","getMobileSdkRequestId","onSdkSuccessResponse","onMobileSdkResponse","onSdkFailureResponse","uiError","sendRouterRequest","api","sendRouterEvent","ephemeral","isAndroid","isIos","getUserProfilePicUrl","profilePicFileName","userKeyVal","profPicFileName","random","getSessionInfo","recreateSession","showRationale","invSource","scanQrCode","action","NATIVE.Permission","enableDebug","setGlobalLogLevel","updateGcConfig","logoutUser","forgetUser","asyncRequestFromNative","fnName","requestTag","asyncRequestFromNativeInternal","eventFromNative","onUpdateCustomData","onEphEvent","onVerSmsCode","smsBody","onVerSmsTimeout","onMobileBrowserClosed","onAdjustPan","factorHeight","onFingerprintScanResult","onScreenPause","onScreenResume","setDirectLink","nar","NativeAsyncRequest","method","MuSdkBridge","_super_1","sdkCordova","initSdkType","onIframeMessage","messageId","parent","response","postMessageToCordova","onCordovaMessage","MuRouterApp","userLoggedIn","gcConfigKeyVal","gcConfig","sessionGc","fgTimeoutSec","isSessionTimedout","inp","sendBrowserRequest","handleCordovaRouterEvents","sendEvent","catch","ANALYTICS_EVENT","APP_LAUNCH","APP_SHARE","ANALYTICS_EVENT_PARAMS","SCREEN","ACTION","SCREEN_STATE","SCREEN_STATE_ERROR","SCREEN_STATE_SUCCESS","SCREEN_STATE_NO_DATA","BTN_RETRY_ERR","AnalyticsScreenInfo","screenName","invocationSource","navMode","eventData","invocationTs","getInvocationSource","getScreenName","onScreenDestroy","userEvent","setScreenState","stateName","stateValue","setScreenAction","actionName","setScreenActionScroll","USER_PROPERTIES","AnalyticsEventLogger","allowLogging","initLogging","setAllUserProperties","sendSessionEvents","logAppShare","sharePkg","logPublicEvent","checkNValidateBundle","bundle","inValidKey","validKey","inValidValue","validStringValue","inValidValueType","objVal","NavMode","INVOCATION_LAUNCH","INVOCATION_RELAUNCH","AnalyticsScreenManager","pendingTabActions","pendingTabStates","lastScreenName","currModalState","getCurrentScreenName","currScreenState","eventUrl","invSrc","getFbaseScreenName","modalName","lastModalName","currTabScreenState","setCurrentTabRoutes","tabRoutes","currTabRoutes","onTabNavEnd","currScreenName","tabIndex","tabScreenName","lastTabSceenName","digestPendingTabScreen","onTabDestroy","logScreenActionScroll","logScreenAction","onTabScreenAction","logScreenState","onTabScreenState","actions","routeTabState","states","paramIdx","moduleIdx","MuUiRouter","analyticsScreenMgr","setAppProtoAndHost","appProtocol","appHost","toastMessage","stay","showOverlay","overlayText","removeOverlay","getRoutingInfoForNavUrl","getRoutingInfo","dlObj","routingInfo","hostName","navigateByDirectLink","ncExtracs","onDeviceBack","screen","getRoot","getBusinessId","onPayUResponse","handleError","Router","RunContextJest","copyConstruct","newRc","clone","USER_CARD_ACTIVATED","YSE_RESPONSE","UiConfig","topics","topicsValue","privacy","default","notification","settings","createStance","customerCareNo","TYPE","MODE","DATA","MILL_IN_SEC","MILL_IN_MINUTE","MILL_IN_HOUR","MILL_IN_DAY","STRING","ERR_INTERNET","ERR_INVALID_NUM","ERR_NUM_LIMIT","ERR_ATTEMPTS_LIMIT","ERR_TIMEOUT","ERR_NONE","ERR_MSISDN_FAIL","TIME_DEBUG","TIME_PROD"],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MuBrowser {\n\n  constructor() { }\n}\n","/*------------------------------------------------------------------------------\n   About        : <Write about the file here>\n   \n   Created on   : Sat Jul 15 2017\n   Author       : Raghvendra Varma\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { RunContextBrowser, \n         LOG_LEVEL }          from '../rc-browser'\n\nexport const EVENT_PREFIX = 'mui-event'\n\nexport namespace EventSystem {\n\n  export function broadcast(rc: RunContextBrowser, eventName: string, data ?: object) {\n\n    data = data || {}\n\n    const fullName = eventName.startsWith(EVENT_PREFIX) ? `${eventName}` : `${EVENT_PREFIX}-${eventName}`,\n          nodeList = document.querySelectorAll('.' + fullName),\n          event    = new CustomEvent(fullName, {detail: {data, rc}})\n\n    for (let index = 0; index < nodeList.length; index++) {\n      const element = nodeList[index]\n      element.dispatchEvent(event)\n    }\n\n    window.dispatchEvent(event)\n\n    rc.isStatus() && rc.status('EventSystem.broadcast', 'Completed broadcast of', \n      fullName, 'to', nodeList.length, 'dom element(s) and to global components via window')\n  }\n\n  export function eventToElements(rc: RunContextBrowser, eventName: string, \n                    elementClassName: string, data : object) {\n\n    const fullName = eventName.startsWith(EVENT_PREFIX) ? `${eventName}` : `${EVENT_PREFIX}-${eventName}`,\n          nodeList = document.querySelectorAll('.' + elementClassName),\n          event    = new CustomEvent(fullName, {detail: {data, rc}})\n\n    for (let index = 0; index < nodeList.length; index++) {\n      const element = nodeList[index]\n      element.dispatchEvent(event)\n    }\n\n    rc.isStatus() && rc.status('EventSystem.eventToElement', 'Completed event dispatch of', \n      fullName, 'to', nodeList.length, 'dom element(s)')\n  }\n\n  // Allows subscription of event for an element (when Angular syntax cannot be used)\n  // UnSubscribe is automatic on element destroy\n  export function elementSubscribe(element: HTMLElement, eventName: string, cb: any) {\n    if (!eventName.startsWith(EVENT_PREFIX)) eventName = `${EVENT_PREFIX}-${eventName}`\n\n    const classes = element.className.split(' ')\n    if (classes.indexOf(eventName) === -1) {\n      classes.push(eventName)\n      element.className = classes.join(' ')\n    } else {\n      element.removeEventListener(eventName, cb)\n    }\n    element.addEventListener(eventName, cb)\n  }\n\n  // Any class whose object is globally alive in the app should use this \n  // since it does not unsubscribe for the events\n  // UnSubscribe is ********* NEVER *********\n  export function subscribe(eventName: string, cb: any, options ?: AddEventListenerOptions) {\n    if (!eventName.startsWith(EVENT_PREFIX)) eventName = `${EVENT_PREFIX}-${eventName}`\n    window.addEventListener(eventName, cb,options)\n  }\n\n  export function subscribeAll(eventNames : string[], cb : any) {\n    eventNames.forEach((eventName) => {\n      if (!eventName.startsWith(EVENT_PREFIX)) eventName = `${EVENT_PREFIX}-${eventName}`\n        window.addEventListener(eventName, cb.bind(null , eventName))\n    })\n  }\n}\n","/*------------------------------------------------------------------------------\n   About      : <Write about the file here>\n   \n   Created on : Tue Jul 25 2017\n   Author     : Raghvendra Varma\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport {\n  Mubble\n} from '@mubble/core'\n\nconst QUICK_ANIM_MS     = 'none' // (1000/60) + 'ms'\n\nexport class DomHelper {\n\n  static addClass(className: string): void {\n\n  }\n\n  static getTransform(xPixel: number, yPixel: number, zPixel: number): Mubble.uObject<string> {\n    return {transform: `translate3d(${xPixel}px, ${yPixel}px, ${zPixel}px)`}\n  }\n\n  static getPercentTransform(xPercent: number, yPercent: number): Mubble.uObject<string> {\n    return {transform: `translate3d(${xPercent}%, ${yPercent}%, 0)`}\n  }\n  \n  static setTransform(elem, xPixel, yPixel, zPixel): void {\n    elem.style.transform = DomHelper.getTransform(xPixel, yPixel, zPixel).transform\n  }\n\n  static setPercentTransform(elem, xPercent: number, yPercent: number): void {\n    elem.style.transform = DomHelper.getPercentTransform(xPercent, yPercent).transform\n  }\n  \n  static getQuickAnim(): string {\n    return QUICK_ANIM_MS\n  }\n}","import Hashids from 'hashids'\n\n/*------------------------------------------------------------------------------\n   About      : Utility class which makes use of HashIds for encrypting strings\n                to hashes using a pre determined key. https://hashids.org/\n   \n   Created on : Thur May 24 2018\n   Author     : Siddharth Garg\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\nexport class HashidConverter {\n\n  static encodeString(key: string, str: string): string {\n\n    const hashids = new Hashids(key)\n    const charCodes = []\n    for (let i = 0; i < str.length; i++) {\n      const code = str.charCodeAt(i)\n      charCodes.push(code)\n    }\n\n    return hashids.encode(charCodes)\n  }\n\n  static decodeHashids(key: string, hashid: string): string {\n\n    const hashids = new Hashids(key)\n    const charCodes = hashids.decode(hashid)\n\n    let str = ''\n    charCodes.forEach((charCode) => {\n      str += String.fromCharCode(charCode)\n    })\n\n    return str\n  }\n}","/*------------------------------------------------------------------------------\n   About      : Class responsible for playing audio files in the app.\n   \n   Created on : Sat Sep 02 2017\n   Author     : Raghvendra Varma\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { Mubble }                     from '@mubble/core'\nimport { RunContextBrowser }          from '../rc-browser'\n\nclass AudioFile {\n\n  constructor(public fileName: string, public volume ?: number) {\n    this.fileName = 'sounds/' + fileName\n    this.volume   = volume || .8\n  }\n}\n\nexport class AudioPlayer {\n\n  readonly SELECT = new AudioFile('select.mp3', 0.4)\n  \n  private audioMap: Mubble.uObject<HTMLAudioElement> = {}\n\n  constructor(private rc : RunContextBrowser) {\n    this.rc.setupLogger(this, 'AudioFile')\n  }\n\n  play(file: AudioFile) {\n\n    let control: HTMLAudioElement = this.audioMap[file.fileName] \n    if (!control) {\n      control = this.audioMap[file.fileName] = new Audio(file.fileName)\n      control.load()\n      control.volume = file.volume\n    } else {\n      const isPlaying = control.currentTime > 0 && !control.paused && !control.ended && control.readyState > 2\n      if (isPlaying) {\n        control.pause()\n        control.currentTime = 0\n      }\n    }\n\n    try {\n      control.play()\n    } catch (err) {\n      this.rc.isError() && this.rc.error(this.rc.getName(this), {fileName: file.fileName}, err)\n    }\n  }\n}","export class BoundedValue {\n\n  public  value     : number\n  private elemDirUp : boolean\n  private contDirUp : boolean\n\n  private elemLow   : number\n  private elemHigh  : number\n  private contLow   : number\n  private contHigh  : number\n\n  constructor(initState       : number,\n              finalState      : number,\n\n              contInitState   : number,\n              contFinalState  : number) {\n \n    // for the element\n    this.value        = initState\n    this.elemDirUp    = (initState < finalState)\n\n    this.elemLow      = this.elemDirUp ? initState : finalState\n    this.elemHigh     = this.elemDirUp ? finalState : initState\n\n    // for the controller\n    this.contDirUp    = (contInitState < contFinalState)\n    this.contLow      = this.contDirUp ? contInitState  : contFinalState\n    this.contHigh     = this.contDirUp ? contFinalState : contInitState\n\n  }\n\n  compute(contValue): boolean {\n\n    const oldValue = this.value\n\n    if (contValue <= this.contLow) {\n      this.value = this.elemDirUp ? this.elemLow : this.elemHigh\n    } else if (contValue >= this.contHigh) {\n      this.value = this.elemDirUp ? this.elemHigh : this.elemLow\n    } else {\n        \n      const totalDiff = this.contHigh - this.contLow,\n            thisDiff  = contValue - this.contLow,\n            elemDiff  = this.elemHigh - this.elemLow \n\n      if (this.elemDirUp) {\n        this.value = this.elemLow + elemDiff * thisDiff / totalDiff\n      } else {\n        this.value = this.elemHigh - elemDiff * thisDiff / totalDiff\n      }\n    }\n\n    return this.value !== oldValue\n  }\n\n  getDecimalValue(digitsAfterDecimal ?: number) {\n    return Number(this.value.toFixed(digitsAfterDecimal || 0))\n  }\n\n  isCloserToInit() {\n    const lowDiff   = this.value - this.elemLow,\n          highDiff  = this.elemHigh - this.value\n\n    if (lowDiff < highDiff) {\n      return this.elemDirUp\n    } else {\n      return !this.elemDirUp\n    }\n  }\n\n}","export class MultiStepValue {\n\n  public currentIndex : number = 0\n  public currentValue : number = 0\n\n  private maxVal      : number\n  private tolerance   : number = 0\n\n  constructor(private minVal    : number, \n              private viewSize  : number, \n              private count     : number ,\n              private applyTol  ?: boolean,\n              private quickMove ?: boolean) {\n\n    this.maxVal   = minVal + viewSize * ( count - 1 ) // -1 is done so that last item is displayed in view\n    if (applyTol) this.tolerance = viewSize * .25\n  }\n\n  transition(delta: number): number {\n    \n    const newValue = this.currentValue - delta\n\n      if (newValue < this.minVal - this.tolerance) return this.minVal - this.tolerance\n      if (newValue > this.maxVal + this.tolerance) return this.maxVal + this.tolerance\n\n    return newValue\n  }\n\n  updateViewSize(viewSize : number) {\n    this.viewSize     = viewSize\n    const maxVal      = this.minVal + this.viewSize * ( this.count - 1 )\n    this.currentValue = (this.currentValue * maxVal) / this.maxVal\n    this.maxVal       = maxVal\n\n  }\n\n  updateCount(count : number) {\n    this.count  = count\n    this.maxVal = this.minVal + this.viewSize * ( count - 1 )\n  }\n\n  final(delta: number, speed: number, quickRatio ?: number): void {\n   \n    const newValue    = this.transition(delta),\n          chgNeeded   = (speed >= .2 ? .1 : .25) * this.viewSize,\n          lowerBound  = this.currentIndex * this.viewSize + this.minVal\n\n    let newIndex\n    \n\n    if (delta > 0) { // trying to reduce index\n\n      if (this.quickMove) {\n        newIndex = (quickRatio && quickRatio > 0) ? Math.round(quickRatio * this.count) : Math.ceil((lowerBound- newValue)/this.viewSize)\n      }\n      \n      if ((lowerBound  - newValue) >= chgNeeded) {\n\n        this.currentIndex -= this.quickMove ? newIndex : Math.abs(Math.ceil((lowerBound  - newValue)/this.viewSize))\n\n        if (this.currentIndex < 0) {\n          this.currentIndex = 0\n        }\n        this.currentValue = this.currentIndex * this.viewSize + this.minVal\n      }\n\n    } else {\n      if (this.quickMove) {\n        newIndex = (quickRatio && quickRatio > 0) ? Math.round(quickRatio * this.count) : Math.ceil((newValue - lowerBound)/this.viewSize)\n      }\n      if ((newValue - lowerBound) >= chgNeeded) {\n        \n        this.currentIndex += this.quickMove ? newIndex : Math.ceil((newValue - lowerBound)/this.viewSize)\n        if (this.currentIndex >= this.count) {\n          this.currentIndex = this.count - 1\n        }\n        this.currentValue = this.currentIndex  * this.viewSize + this.minVal\n      } \n    }\n  }\n\n}","/*------------------------------------------------------------------------------\n   About      : Url sanitizer\n   \n   Created on : Sat Nov 03 2018\n   Author     : Sid\n   \n   Copyright (c) 2018 Obopay. All rights reserved.\n------------------------------------------------------------------------------*/\nimport { HashidConverter } from './hashid-converter'\n\n\n\nexport class UrlHelper {\n\n  static getUrlParams(genericUrl: string) {\n\n    const idx = genericUrl.indexOf('?')\n    if (idx === -1) return null\n\n    const url = genericUrl.substring(idx+1)\n    const queries = url.split('&')\n    const params = {}\n\n    for (let i = 0; i < queries.length; i++) {\n      const split = queries[i].split('=')\n      params[split[0]] = split[1]\n    }\n\n    return params\n  }\n\n  static decodeStringFromHashids(key: string, hashids: string): string {\n    return HashidConverter.decodeHashids(key, hashids)\n  }\n\n  static encodeStringAsHashids(key: string, hashids: string): string {\n    return HashidConverter.encodeString(key, hashids)\n  }\n\n\n}","import { Mubble, \n         expandTemplate,\n         expandTemplateObj,\n         XmnError,\n         NetworkType\n       }                        from '@mubble/core'\nimport { UrlHelper }            from './url-helper'\nimport { RunContextBrowser }    from '../rc-browser'\nimport { TranslateService } from '../ui'\n\nexport class MuUtility {\n\n\n  isOfTypeUiError(errObj : Object) : errObj is {errorCode  : string, errorMessage ?: string} {\n    return errObj.hasOwnProperty('errorCode')\n  }\n\n  isNetworkUnhealthy(rc: RunContextBrowser) {\n\n    if (rc.bridge.isRunningInBrowser()) {\n      return !navigator.onLine \n    } else {\n      const netType = rc.bridge.getCordovaNetworkType()\n      return netType === NetworkType.absent || \n            (netType === NetworkType.unknown && !navigator.onLine)\n    }\n  }\n\n  isValidIndianMobNum(number: string): boolean {\n\n    number = this.sanitizeNumber(number) \n    return new RegExp('^\\\\+91[9876]\\\\d{9}$').test(number)\n  }\n\n  \n  get10digitMobNumber(number: string) {\n\n    const num = this.sanitizeNumber(number)\n\n    if (num.startsWith('+91')) return num.substring(3)\n    if (num.startsWith('91')) return num.substring(2)\n    else if (num.startsWith('0')) return num.substring(1)\n    else return num\n  }\n\n  sanitizeNumber(number: string): string {\n\n    let temp: string = number\n    if (!temp) return null\n\n    const startsWithPlus = temp.startsWith('+91')\n    if (startsWithPlus) return temp\n\n    // check for indian or international i.e. 0 or 00\n    if (temp.startsWith('0')) {\n      temp = temp.substring(1)\n\n      if (temp.startsWith('0')) {\n        return '+' + temp.substring(1)\n      } else if (temp.length === 10) {\n        return '+91' + temp\n      } else {\n        return '0' + temp\n      }\n\n      // 10 digit mobile/landline number case return with +91\n    } else if (temp.length == 10) {\n      return '+91' + temp\n    }\n\n    return temp\n  }\n\n\n  getNetworkType(rc: RunContextBrowser) {\n    return rc.bridge.isRunningInBrowser() \n      ? navigator.onLine ? NetworkType.wifi : NetworkType.absent \n      : rc.bridge.getCordovaNetworkType() \n  }\n\n  getErrorText(rc: RunContextBrowser, transServ: TranslateService, errorMessage: string): string {\n\n    let errorText: string\n    switch(errorMessage) {\n\n      case XmnError.NetworkNotPresent:\n        errorText = transServ.instant('cmn_toast_err_net_off')\n        break\n\n      case XmnError.ConnectionFailed:\n        if (this.isNetworkUnhealthy(rc)) {\n          errorText = transServ.instant('cmn_toast_err_net_off')\n        } else {\n          errorText = transServ.instant('cmn_toast_err_con_failed')\n        }\n        break\n\n      case XmnError.RequestTimedOut:\n      case XmnError.SendTimedOut:\n        errorText = transServ.instant('cmn_toast_err_timeout')\n        break\n      \n      default:\n        errorText = transServ.instant('cmn_toast_err_unknown')\n    }\n    return errorText\n  }  \n\n\n  getLocation(rc: RunContextBrowser) {\n\n    if (rc.bridge.isRunningInBrowser()) {\n\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition((position) => {\n          return JSON.stringify({\n            lat: position.coords.latitude,\n            lng: position.coords.longitude\n          })\n        })\n      } else {\n        return '{}'\n      }\n\n    } else {\n      return rc.bridge.getLocation()\n    }\n  }\n\n\n  expandTemplate(template: string, data: Mubble.uObject<any>): string {\n    return expandTemplate(template, data)\n  }\n\n  expandTemplateObj(templateObj: any, data: Mubble.uObject<any>): any {\n    return expandTemplateObj(templateObj, data)\n  }\n  \n  parseURLForRouter(parser: any) {\n\n    if (parser.protocol !== 'http' || parser.protocol !== 'https') {\n      parser.href = parser.href.replace(/.*\\:\\/\\//, 'http://')\n    }\n\n    const searchObject = {},\n          queries      = parser.search.replace(/^\\?/, '').split('&')\n    \n    for(let i = 0; i < queries.length; i++ ) {\n      if (!queries[i]) continue\n      const split = queries[i].split('=');\n      searchObject[split[0]] = decodeURIComponent(split[1])  \n    }\n\n    const pathname = parser.pathname.startsWith('/') \n      ? parser.pathname.substring(1) \n      : parser.pathname\n\n    return {\n        protocol      : parser.protocol,\n        host          : parser.host,\n        hostname      : parser.hostname,\n        port          : parser.port,\n        pathname      : pathname,\n        search        : parser.search,\n        searchObject  : searchObject,\n        hash          : parser.hash\n    }\n  }\n\n  getUrlParams(genericUrl: string) {\n    return UrlHelper.getUrlParams(genericUrl)\n  }\n  \n  getErrorScreenState(errorMessage: string): string {\n    \n    let errorCode: string\n    switch(errorMessage) {\n\n      case XmnError.NetworkNotPresent:\n        errorCode = 'NoNet'\n        break\n\n      case XmnError.ConnectionFailed:\n        errorCode = 'ConnFail'\n        break\n\n      case XmnError.RequestTimedOut:\n      case XmnError.SendTimedOut:\n        errorCode = 'TimedOut'\n        break\n\n      case XmnError.UnAuthorized:\n        errorCode = 'UnAuthorized'\n\n      default:\n        errorCode = errorMessage.substring(0, Math.min(32, errorMessage.length))\n    }\n    return errorCode\n  }\n\n  async getBase64(file : any) {\n    \n    return new Promise((resolve, reject) => {\n\n      const reader = new FileReader()\n      reader.readAsDataURL(file)\n      reader.onload = () => resolve(reader.result as string)\n      reader.onerror = error => reject(error)\n    })\n\n  }\n\n  async getCheckSum(message : string)  {\n\n    const encoder   = new TextEncoder(),\n          data      = encoder.encode(message),\n          buffer    = await window.crypto.subtle.digest('SHA-256', data),\n          hexString = this.hexString(buffer)\n    \n    return hexString\n  }\n\n  hexString(buffer : ArrayBuffer) {\n\n    const byteArray = new Uint8Array(buffer)\n\n    let hexCode = '',\n        value\n\n    for (let i = 0; i < byteArray.length; i++) {\n      value    = byteArray[i].toString(16),\n      hexCode += (value.length === 1 ? '0' + value : value)\n    }\n    return hexCode\n  }\n\n  async getCompressedImage(file : any, changeOrientation : boolean  = false) {\n\n    return new Promise((resolve, reject) => {\n      \n      const reader = new FileReader()\n      reader.readAsDataURL(file)\n      reader.onload = (readerEvent : any) => {\n\n        const image = new Image()\n        image.src = readerEvent.target.result\n      \n        image.onload = (imageEvent : any) => {\n          \n          const exif  = window['EXIF']\n\n          if (exif) {\n            exif.getData(file, () =>  {\n              const orientation = changeOrientation ? file.exifdata.Orientation : undefined\n              return resolve(this.getCanvasImage(image, orientation))\n            })\n          } else {\n            return resolve(this.getCanvasImage(image))\n          }\n        }\n      }\n      reader.onerror = error => reject(error)\n    })\n  }\n\n  getCanvasImage(image : any, orientation ?: number) {\n\n    const canvas  = document.createElement('canvas'),\n          ctx     = canvas.getContext('2d'),\n          maxSize = 800\n                  \n    let width = image.width,\n        height = image.height;\n\n    if (width > height) {\n      if (width > maxSize) {\n        height *= maxSize / width\n        width   = maxSize\n      }\n    } else if (height > maxSize) {\n      width *= maxSize / height\n      height = maxSize\n    }\n              \n    canvas.width  = width\n    canvas.height = height\n\n    if (orientation) {\n      if (orientation > 4) {\n        canvas.width  = height; \n        canvas.height = width;\n      }\n      switch (orientation) {\n        case 2: ctx.translate(width, 0);     ctx.scale(-1,1); break;\n        case 3: ctx.translate(width,height); ctx.rotate(Math.PI); break;\n        case 4: ctx.translate(0,height);     ctx.scale(1,-1); break;\n        case 5: ctx.rotate(0.5 * Math.PI);   ctx.scale(1,-1); break;\n        case 6: ctx.rotate(0.5 * Math.PI);   ctx.translate(0,-height); break;\n        case 7: ctx.rotate(0.5 * Math.PI);   ctx.translate(width,-height); ctx.scale(-1,1); break;\n        case 8: ctx.rotate(-0.5 * Math.PI);  ctx.translate(-width,0); break;\n      }\n\n    }\n    \n    ctx.drawImage(image, 0, 0, width, height)\n    ctx.restore()\n\n    const backgroundColor     = 'white'\n    const compositeOperation  = ctx.globalCompositeOperation\n    \n\t\tctx.globalCompositeOperation = \"destination-over\"\n\n\t\tctx.fillStyle = backgroundColor\n    ctx.fillRect(0,0,width,height)\n    ctx.globalCompositeOperation = compositeOperation\n\n\n    const resizedImage = canvas.toDataURL('image/jpeg', 0.7)\n    return resizedImage\n  \n  }\n \n  //base64 without mime type\n  getBase64Size(base64 : string) {\n\n    const slicedBase64  = base64.includes('base64') ? base64.split(',')[1] : base64\n\n    let padding = 0\n    if (slicedBase64.endsWith('==')) {\n      padding = 2\n    } else if (slicedBase64.endsWith('=')) {\n      padding = 1\n    }\n\n    const size  = (slicedBase64.length * (0.75)) - padding\n    return (size/1024)\n\n  }\n\n  // used to create a url with params\n  createNavUrl(url : string, object : Mubble.uObject<any>) : string {\n\n    const navUrl  = url.split('?')[0],\n          tempUrl = url.split('?')[1],\n          urlObj  = JSON.parse('{\"' + decodeURI(tempUrl).replace(/\"/g, '\\\\\"').replace(/&/g, '\",\"').replace(/=/g,'\":\"') + '\"}')\n\n    for (let key of Object.keys(urlObj)) {\n      if(key in object){\n        urlObj[key] = object[key]\n      }\n    }\n\n    const completeUrl = navUrl + '?' + Object.keys(urlObj).map(key => key + '=' + urlObj[key]).join('&')\n    return completeUrl\n  }\n}","/*------------------------------------------------------------------------------\n   About      : Class to manage the data of the mu-data table durig lazy load\n   \n   Created on : Thu Nov 07 2019\n   Author     : Pulkit Chaturvedi\n   \n   Copyright (c) 2019 Obopay. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { Mubble }                   from '@mubble/core'\nimport { MuDataTableComponent, \n         TableConfig \n       }                            from '../ui/mu-components/mu-data-table/mu-data-table.component'\n\nexport interface TableDataMgrListener {\n  loadMore(lastIndex : number) : void\n}\n\nexport interface TableDataManagerParams {\n  data      : Array<Object>\n  lastIndex : number\n} \n\nexport class TableDataManager {\n\n  private dataParams      : TableDataManagerParams = { } as TableDataManagerParams\n  private dispRows        : number\n  private totalDataCount  : number\n  private currentKeyIndex : number = 0\n  private lastKeyIndex    : number\n  private pendingRequest  : boolean\n  private dataObject      : Mubble.uObject<any> = { }\n\n  constructor (private parentInst  : TableDataMgrListener,\n               public  tableInst   : MuDataTableComponent) { }\n\n  /**\n  * Method to get the table config and get the dispRows and totalDataCount and data\n  * @param tableConfig : To set the table config in the data table\n  */\n  init(tableConfig : TableConfig, lastIndex : number) {\n    this.dataParams.data = []\n    this.dispRows        = tableConfig.dispRows || 0\n    this.totalDataCount  = tableConfig.totalRecords || 0\n\n    const params : TableDataManagerParams = {\n      lastIndex     : lastIndex,\n      data          : tableConfig.data\n    }\n\n    const data : Array<Object> = tableConfig.data.slice(0, this.dispRows)\n    tableConfig.data = data\n\n    // this.tableInst.setTableConfig(tableConfig)\n    this.updateData(params)\n  }\n\n  /**\n  * parent will populate the data, moreAvailable and lastIndex in this method\n  * @param params : Updating the params by the parent so  that the data can be populated into the manager\n  */\n  updateData(params : TableDataManagerParams) {\n\n    this.dataParams.data = params.data\n    this.dataParams.lastIndex = params.lastIndex\n\n    this.mapData(0)\n  }\n\n  /**\n  * mapping the data into the data object\n  * @param index : Index to set as key in the data object\n  */\n  private mapData(index : number) {\n    let addingIndex : number = this.currentKeyIndex \n    while (addingIndex < this.dataParams.lastIndex) {\n      if (this.dataObject[addingIndex] && this.dataObject[addingIndex].length === this.dispRows) {\n        addingIndex += this.dispRows \n        continue\n      }\n\n      this.dataObject[addingIndex] = this.dataParams.data.slice(index, (this.dispRows + index))\n      index       += this.dispRows \n      addingIndex += this.dispRows\n    }\n\n    if (this.pendingRequest) this.setTableData()\n  }\n\n  /**\n  * Calls table instance function to set table data\n  * (calls TableDataMgrListener's loadMore if data is not present)\n  */\n  setTableData(index ?: number) {\n\n    if (index >= 0) this.currentKeyIndex = index\n\n    const keys = Object.keys(this.dataObject)\n\n    const dataKey = keys.find((key) => {\n      return Number(key) === this.currentKeyIndex\n    })\n\n    if (dataKey) {\n      const data : Array<Object> = this.dataObject[dataKey]\n\n      if (data.length === this.dispRows || (this.totalDataCount - this.currentKeyIndex) < this.dispRows) {\n        // this.tableInst.setDisplayData(data)\n        this.lastKeyIndex = Number(dataKey)\n      } else {\n        const index : number = this.currentKeyIndex + data.length\n        this.parentInst.loadMore(index)\n        this.pendingRequest = true\n      }\n\n      return\n    }\n\n    this.parentInst.loadMore(this.currentKeyIndex)\n    this.pendingRequest = true\n  }\n\n  /**\n  * Call from parent, clears all the data inside the manager\n  */\n  clearData() {\n    this.totalDataCount   = 0\n    this.dispRows         = 0\n    this.currentKeyIndex  = 0\n    this.dataParams       = {} as TableDataManagerParams\n    this.dataObject       = {}\n    this.pendingRequest   = false\n  }\n\n  /**\n  * Method to update the data if parent wants to change any particular data in the data table\n  * @param data : data on which the action should be done\n  * @param index : index where the data is present\n  */\n  updateDataStatus(data : Mubble.uObject<any>, index : number) {\n    const dataIndex : number = index - this.currentKeyIndex\n    this.dataObject[this.currentKeyIndex][dataIndex] = data\n    this.setTableData()\n  }\n\n  /**\n  * Method called by parent when error occur in parent\n  */\n  errorOccur() {\n    this.pendingRequest   = false\n    this.currentKeyIndex  = this.lastKeyIndex\n    // this.tableInst.onUiError()\n    this.setTableData()\n  }\n\n  /**\n  * Method called by parent \n  * user selects different data in the data table to pass whether the data should be selectable or not\n  * @param data : To select the data in the data table\n  */\n  setSelectableData(data : Array<Object>) {\n    // this.tableInst.setSelectedItems(data)\n  }\n}","/*------------------------------------------------------------------------------\n   About      : Performance measurement for multi-step tasks\n   \n   Created on : Thu Jul 27 2017\n   Author     : Raghvendra Varma\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { format,\n         Mubble \n       }          from '@mubble/core'\nimport { sortBy } from 'lodash'\nconst CYCLE_STEP = '_cycle_'\n\nexport class PerformanceMetrics {\n\n  private startTs: number\n\n  private cycles: Cycle[] = []\n  private cycle: Cycle\n\n  constructor(private taskName: string) {\n    this.startTs = this.now()\n  }\n\n  public startStep(stepName: string) {\n\n    const now = this.now()\n\n    if (!this.cycle || this.cycle.stepMap[stepName]) {\n\n      if (this.cycle) {\n        this.cycle.endTs = now\n        this.cycles.push(this.cycle)\n      }\n\n      this.cycle = new Cycle(this.cycles.length, now, stepName)\n\n    } else {\n      this.cycle.stepMap[stepName] = new Step(now)\n    }\n  }\n\n  public endStep(stepName: string) {\n\n    const step = this.cycle.stepMap[stepName]\n\n    if (!step) {\n      console.error(stepName, 'ended without start for', this.taskName)\n      return\n    }\n\n    step.endTs = this.now()\n  }\n\n  public finish() {\n\n    const now     = this.now(),\n          output  = {\n            task        : this.taskName, \n            totalMs     : now - this.startTs,\n            cycleCount  : this.cycles.length,\n            cyclePerf   : new ResultEntry(),\n            stepPerf    : {} as Mubble.uObject<ResultEntry>\n          }\n\n    if (this.cycle) {\n      this.cycle.endTs = now\n      this.cycles.push(this.cycle)\n    }\n\n    for (let index = 0; index < this.cycles.length; index++) {\n      \n      const cycle = this.cycles[index]\n      output.cyclePerf = this.markEntry(cycle.endTs - cycle.startTs, index, output.cyclePerf)\n\n      for (const stepName in cycle.stepMap) {\n        const step = cycle.stepMap[stepName],\n              perf = output.stepPerf[stepName]\n\n        if (!step.endTs) {\n          console.error('You forgot to call endStep for ' + stepName + ' for cycle index:' + index)\n          continue\n        }\n        output.stepPerf[stepName] = this.markEntry(step.endTs - step.startTs, index, perf)\n      }\n    }\n    \n    console.info('Result summary ', output)\n    \n    let marks: Cycle[]  = []\n    this.logEntry('all cycles', output.cyclePerf, marks)\n\n    for (const stepName in output.stepPerf) {\n      this.logEntry(stepName, output.stepPerf[stepName], marks)\n    }\n    \n    marks = sortBy(marks, 'startTs')\n    console.info('Highlighted cycles (having min/max cycle/step time) >>')\n    for (const mark of marks) {\n      console.info(mark.toString())\n    }\n    console.info('all cycles to deep dive >>', this.cycles)\n  }\n\n  private markEntry(ts: number, index: number, entry: ResultEntry): ResultEntry {\n\n    entry = entry || new ResultEntry()\n\n    if (entry.min > ts) {\n      entry.min     = ts\n      entry.minIdx  = index\n    }\n    \n    if (entry.count && entry.max < ts) {\n      entry.max     = ts\n      entry.maxIdx  = index\n    }\n\n    entry.total += ts \n    entry.count++\n\n    return entry\n  }\n\n  private now() {\n    return performance ? performance.timing.navigationStart + performance.now() : Date.now()\n  }\n\n  private logEntry(name: string, entry: ResultEntry, insertInto: Cycle[]) {\n\n    console.info(name + ' performance >> ' + entry)\n\n    if (entry.minIdx !== -1) {\n      const cycle = this.cycles[entry.minIdx]\n      if (insertInto.indexOf(cycle) === -1) insertInto.push(cycle)\n    }\n\n    if (entry.maxIdx !== -1) {\n      const cycle = this.cycles[entry.maxIdx]\n      if (insertInto.indexOf(cycle) === -1) insertInto.push(cycle)\n    }\n\n  }\n\n}\n\nclass BaseTime {\n\n  startTs : number\n  endTs   : number\n\n  constructor(startTs: number) {\n    this.startTs = startTs\n  }\n}\n\nclass Step extends BaseTime {\n\n}\n\nclass Cycle extends BaseTime {\n  index    : number\n  stepMap  : Mubble.uObject<Step>\n\n  constructor(index: number, now: number, step: string) {\n    super(now)\n    this.index = index\n    this.stepMap = {[step]: new Step(now)}\n  }\n\n  toString() {\n    const ts = this.endTs - this.startTs\n    return `Cycle(${this.index}) @ ${format(this.startTs, '%hh%:%mm%:%ss% %ms%')} timeTaken: ${ts.toFixed(3)}ms`\n  }\n}\n\nclass ResultEntry {\n\n  count   : number = 0\n  min     : number =  Number.MAX_SAFE_INTEGER\n  max     : number = -1\n  total   : number = 0\n  minIdx  : number = -1\n  maxIdx  : number = -1\n\n  toString() {\n\n    const average = this.count ? this.total / this.count : 0\n    return `minMs: ${this.min.toFixed(3)\n      } ${this.max !== -1 ? 'maxMs: ' + this.max.toFixed(3) : ''\n      } avgMs: ${average.toFixed(3)} count: ${this.count\n      } ${this.minIdx !== -1 ? 'minIdx: ' + this.minIdx : ''\n      } ${this.maxIdx !== -1 ? 'maxIdx: ' + this.maxIdx : ''}`\n  }\n}\n\n","/*------------------------------------------------------------------------------\n   About      : <Write about the file here>\n   \n   Created on : Mon Jun 19 2017\n   Author     : Raghvendra Varma\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\n// To lock panning on axis, this threshold should be met, example if user moves 5 pixel in x, his movement\n// should be 1 pixel or below on y axis\nexport const THRESHOLD = .8\n\n// Gutter width: we support gutters on x axis. Gutter touches are reported as a separate callback\n// Gutter is always configured wrt to page dimensions, not component dimensions\nexport const GUTTER_WIDTH = 10\n\nexport interface NailConfig {\n  axisX          : boolean   // If you wish to support panning in horizontal axis\n  axisY          : boolean   // If you wish to support panning in vertical axis\n  threshold     ?: number    // default: THRESHOLD\n  gutterWidth   ?: number    // default: GUTTER_WIDTH\n  gutterLeft    ?: NailInterface\n  gutterRight   ?: NailInterface\n\n  // Dynamically settable values even at later stage via API\n  disallowLeft  ?: boolean\n  disallowRight ?: boolean\n}\n\n/*---------------------------------------------------------------------------------------------------\nAny component that uses nail must implement this interface\nEvent object passed here is actual DOM event. You should not try to see the event type as it may be \ntouch / pointer event. Also touchStart may actually be touchMove (after ascertaining the axis)\n\nAll events have\n  axis: AXIS\n\nThe Move Event also has\n  direction: DIRECTION\n  deltaX\n  deltaY\n\npanEnd/gutterEnd event also has:\n  speed\n----------------------------------------------------------------------------------------------------*/\n\n// Reported back along with change (delta) in panning event\nexport enum DIRECTION {\n  UP    = 1, // absolute direction wrt touch start, would mean that we are deltaY is negative\n  RIGHT = 2, // absolute direction wrt touch start, would mean that we are deltaX is positive\n  DOWN  = 4, // absolute direction wrt touch start, would mean that we are deltaY is positive\n  LEFT  = 8  // absolute direction wrt touch start, would mean that we are deltaX is negative\n}\n\n// Reported along with the event\nexport enum AXIS {\n  X     = 1,\n  Y     = 2\n}\n\nexport interface NailInterface {\n\n  // Rarely used callback to know when touchStart begins, this is different from panStart\n  // as onPanStart is fired when the movement has been ascertained\n  onTouchStart?(event: any): void\n\n  // This event is sent when touch start is ascertained based on threshold values\n  onPanStart?(event: any): void\n\n  // Notification on pan move. Return false if you did not use the event,\n  // this helps in passing the event further down in system to other components and \n  // may help in scrolling etc.\n  onPanMove(event: any): boolean\n\n  // This event is sent when touch end or touch cancel happens for an started event\n  onPanEnd(event: any): void\n\n  // Used along with onTouchStart, either onTouchEnd or onPanEnd will be called\n  onTouchEnd?(event: any): void\n\n  // This function is just a convenience function for doing css work in requestAnimationFrame\n  // On onPanStart and onPanMove can call nail.requestAnimation, which results into a callback\n  // to this. Please note this is called only when a valid touchSession exists (already ascertained)\n  onPanAnimate?(...animateParam: any[]): void\n}\n\n","/*------------------------------------------------------------------------------\n   About      : <Write about the file here>\n   \n   Created on : Mon Apr 17 2017\n   Author     : Raghvendra Varma\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\nimport { RunContextBase, \n         RUN_MODE,\n         LOG_LEVEL,\n         InitConfig,\n         RunState,\n         RCLoggerBase\n       }                          from '@mubble/core'\n\nimport { GlobalKeyValue,\n         UserKeyValue,\n         ConfigKeyVal\n       }                          from './storage'\nimport { AudioPlayer }            from './util'\nimport { MuUtility }              from './util/utility'\nimport { MuRouterApp }            from './framework/router-app'\nimport { MuBridge }               from './framework'\nimport { AnalyticsEventLogger }   from './framework/analytics'\nimport { MuUiRouter }             from './framework/ui-router'\n\nconst CONSOLE_FN_MAP : ((message?: any, ...optionalParams: any[]) => void)[] = []\n\nCONSOLE_FN_MAP[LOG_LEVEL.DEBUG]   = console.log\nCONSOLE_FN_MAP[LOG_LEVEL.STATUS]  = console.info || console.log\nCONSOLE_FN_MAP[LOG_LEVEL.WARN]    = console.warn || console.log\nCONSOLE_FN_MAP[LOG_LEVEL.ERROR]   = console.error || console.log\n\nexport {LOG_LEVEL, RUN_MODE} from '@mubble/core'\n\nexport class InitConfigBrowser extends InitConfig {\n\n  constructor(runMode         : RUN_MODE,\n              logLevel        : LOG_LEVEL,\n              tzMin          ?: number | undefined) {\n\n    super(logLevel, logLevel !== LOG_LEVEL.NONE, tzMin)\n\n    if ((runMode === RUN_MODE.PROD || runMode === RUN_MODE.PRE_PROD) && logLevel !== LOG_LEVEL.NONE) {\n      console.log('You must turn off logging in production mode')\n    }\n  }\n\n}\n\nexport class RunStateBrowser extends RunState {\n}\n\nexport class RCBrowserLogger extends RCLoggerBase {\n  \n  constructor(public rc : RunContextBrowser) {\n    super(rc)\n  }\n\n  public logToConsole(level: LOG_LEVEL, logStr: string): void {\n    const fn: any = CONSOLE_FN_MAP[level]\n    fn.call(console, logStr)\n  }\n}\n\nexport abstract class RunContextBrowser extends RunContextBase {\n\n  public lang     : string\n  globalKeyVal    : GlobalKeyValue\n  userKeyVal      : UserKeyValue\n\n  router          : MuRouterApp\n  bridge          : MuBridge\n  gcConfigKeyVal  : ConfigKeyVal\n  userEvent       : AnalyticsEventLogger\n  uiRouter        : MuUiRouter\n  audio           : AudioPlayer\n  utils           : MuUtility\n\n  // Stores the old error handler\n  // private oldOnError    : any\n\n  protected constructor(public initConfig   : InitConfigBrowser,\n                        public runState     : RunStateBrowser,\n                        contextId          ?: string, \n                        contextName        ?: string) {\n    super(initConfig, runState, contextId, contextName)\n  }\n\n  preInit() {\n    super.init()\n    this.logger   = new RCBrowserLogger(this)\n  }\n\n\n\n\n  // Called only once in the lifetime of app during app load\n  // init() {\n  //   super.init()\n  //   this.lang       = Mubble.Lang.English\n  //   this.logger     = new RCBrowserLogger(this)\n\n  //   const storage       = new StorageProvider()\n  //   this.globalKeyVal   = new GlobalKeyValue(this, storage)\n  //   this.userKeyVal     = new UserKeyValue(this, storage)\n  //   this.gcConfigKeyVal = new ConfigKeyVal(this, storage)\n  //   this.audio          = new AudioPlayer(this)\n  //   this.utils          = new Utility()\n  //   // this.oldOnError = window.onerror\n  //   // window.onerror  = this.onError.bind(this)\n  // }\n\n  // clone(newRc : RunContextBrowser) {\n  //   super.clone(newRc)\n  // }\n\n  // This is not getting called as errors are caught by Angular or by core.js\n  // onError(msg: string, src: string, line: number, col: number, obj) {\n\n  //   try {\n  //     const errorObj = { msg, \n  //       source   : src + '[' + line + ':' + col + ']',\n  //       stack    : obj ? obj.stack : ''\n  //     }\n  //     this.isError() && this.error(this.getName(this), 'unhandled exception', errorObj)\n  //     if (this.oldOnError) this.oldOnError.apply(null, arguments)\n  //   } catch (e) {}\n\n  //   return false\n  // }\n}","/*------------------------------------------------------------------------------\n   About      : <Write about the file here>\n   \n   Created on : Mon Jun 19 2017\n   Author     : Raghvendra Varma\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { PerformanceMetrics }       from '../../util'\nimport { Renderer2 }                from '@angular/core'\nimport { DIRECTION, \n         THRESHOLD,\n         GUTTER_WIDTH,\n         AXIS,\n         NailInterface, \n         NailConfig }               from './nail-interface'\nimport { RunContextBrowser, \n         LOG_LEVEL }                from '../../rc-browser'\n\nlet NEXT_SESSION_ID = 1\n\nclass TouchSession {\n\n  ignore        : boolean\n  startX        : number = -1 // indicates a uninitialized TouchSession\n  startY        : number\n  startTs       : number \n\n  lastX         : number\n  lastY         : number\n\n  ifNail        : NailInterface \n\n  axis          : AXIS\n  perf          : PerformanceMetrics\n  id            : number\n  \n  animateParam  : any[]\n  animHandle    : number\n  animSessionId : number\n\n  constructor() {\n    this.id = NEXT_SESSION_ID++\n  }\n}\n\n// later these will be configured by looking at dom capabilities\n\nconst TOUCH_EVENT = {\n  START   : 'touchstart',\n  MOVE    : 'touchmove',\n  END     : 'touchend',\n  CANCEL  : 'touchcancel'\n}\n\n// const TOUCH_EVENT = {\n//   START   : 'pointerdown',\n//   MOVE    : 'pointermove',\n//   END     : 'pointerup',\n//   CANCEL  : 'pointercancel'\n// }\n\nconst THRESHOLD_PIXELS      = 1\nconst MAX_THRESHOLD_PIXELS  = 10\nconst FAST_MIN_SPEED        = 2\nconst FAST_MAX_SPEED        = 8\n\nexport class Nail  {\n\n  private config        : NailConfig\n  private session       : TouchSession\n  private pageWidth     : number\n  private compName      : string\n  private measure       : boolean = false\n  private animateFn     : () => void\n  \n  private handlers: (()=>void)[] = []\n\n  constructor(private rc            : RunContextBrowser,\n              private element       : HTMLElement, \n              private appComponent  : NailInterface, \n              private renderer      : Renderer2, \n                      config        : NailConfig) {\n\n    rc.setupLogger(this, 'Nail', LOG_LEVEL.STATUS)\n    this.compName = appComponent.constructor ? appComponent.constructor.name : '?'\n\n    this.rc.isAssert() && this.rc.assert(this.rc.getName(this), config.axisX || config.axisY, \n      'Nail needs to be configured for at least one axes')\n    \n    this.setConfig(config)\n    this.pageWidth = document.body.clientWidth\n\n    const panEventHandler = this.onNailEvent.bind(this)\n\n    this.handlers.push(renderer.listen(element, TOUCH_EVENT.START, panEventHandler),\n      renderer.listen(element, TOUCH_EVENT.MOVE, panEventHandler),\n      renderer.listen(element, TOUCH_EVENT.END, panEventHandler),\n      renderer.listen(element, TOUCH_EVENT.CANCEL, panEventHandler))\n\n    this.animateFn = this.onRunAnimation.bind(this)\n      \n    rc.isStatus() && rc.status(rc.getName(this), 'Nail events are being monitored for', \n      this.compName, 'with config', config)\n  }\n\n  public changeConfig(config) {\n    this.setConfig(config)\n    // See if we can create a DOM Event object ???? TODO\n    if (this.session) this.panEndEvent({type: 'simulatedPanEnd'})\n  }\n\n  public requestAnimate(...animateParam: any[]) {\n    if (this.session) {\n      this.session.animateParam = animateParam\n      if (this.session.animHandle) window.cancelAnimationFrame(this.session.animHandle)\n      this.session.animHandle     = window.requestAnimationFrame(this.animateFn)\n      this.session.animSessionId  = this.session.id\n    }\n  }\n\n  public setDirections(disallowLeft: boolean, disallowRight: boolean) {\n    this.config.disallowLeft  = disallowLeft\n    this.config.disallowRight = disallowRight\n  }\n\n  private setConfig(config) {\n\n    config.threshold   = config.threshold || THRESHOLD\n    config.gutterWidth = config.gutterWidth || GUTTER_WIDTH\n    \n    this.rc.isAssert() && this.rc.assert(this.rc.getName(this), config.threshold <= 1, \n      'Threshold cannot be more than 1')\n\n    this.config = config\n  }\n\n  onNailEvent(event:any) {\n\n    const session = this.session,\n          config = this.config\n\n    // console.log(event.type, 'with',  event.touches.length, 'touches')\n    // no axis is being monitored\n    if (!(this.config.axisX || this.config.axisY)) return\n\n    if (event.type === TOUCH_EVENT.START) {\n\n      if (event.touches && event.touches.length !== 1) return\n      if (this.session) this.panEndEvent({type: 'simulatedPanEnd'})\n        \n      this.session        = new TouchSession()\n      this.extractEventAttr(event)\n      \n      if (this.measure) {\n        this.session.perf = new PerformanceMetrics('nail-' + this.compName)\n      }\n\n      if (this.appComponent.onTouchStart) this.appComponent.onTouchStart(event)\n\n      this.rc.isDebug() && this.rc.debug(this.rc.getName(this), this.compName, event.type,\n        'received')\n\n    } else if (event.type === TOUCH_EVENT.MOVE) {\n\n      if (!session || session.ignore) return\n      if (event.touches && event.touches.length !== 1) {\n        session.ignore = true\n        return\n      }\n      this.extractEventAttr(event)\n\n      const deltaX = session.lastX - session.startX,\n            deltaY = session.lastY - session.startY\n\n      if (!session.axis) { // we try to find if we can establish the direction of movement\n        if (this.measure) this.session.perf.startStep('ascertain')\n        const ascertained = this.ascertainDirection(event, deltaX, deltaY)\n        if (this.measure) this.session.perf.endStep('ascertain')\n        if (!ascertained) return\n      }\n\n      if (this.measure) this.session.perf.startStep(TOUCH_EVENT.MOVE)\n      event.axis   = session.axis\n        \n      if (session.axis === AXIS.X) {\n        event.deltaX    = deltaX\n        event.deltaY    = 0\n        event.direction = deltaX > 0 ? DIRECTION.RIGHT : DIRECTION.LEFT\n      } else {\n        event.deltaX    = 0\n        event.deltaY    = deltaY\n        event.direction = deltaY > 0 ? DIRECTION.DOWN : DIRECTION.UP\n      }\n\n      if (this.measure) this.session.perf.startStep('onPanMove')\n      const consumed =  session.ifNail.onPanMove(event)\n      if (this.measure) this.session.perf.endStep('onPanMove')\n\n      if (this.measure) this.session.perf.endStep(TOUCH_EVENT.MOVE)\n      if (consumed) {\n        this.rc.isDebug() && this.rc.debug(this.rc.getName(this), this.compName, event.type,\n          'consumed event', {deltaX, deltaY, eventY: event.deltaY, session})\n          \n        event.preventDefault()\n        event.stopPropagation()\n        \n        return true\n\n      } else {\n        this.rc.isDebug() && this.rc.debug(this.rc.getName(this), this.compName, event.type,\n          'ignored event', {deltaX, deltaY, eventY: event.deltaY, session})\n      }\n\n    } else { // end or cancel event\n\n      this.rc.isDebug() && this.rc.debug(this.rc.getName(this), this.compName, event.type,\n        'received')\n\n      if (this.session) this.panEndEvent(event)\n    }\n  }\n\n  private panEndEvent(event) {\n\n    if (this.measure) this.session.perf.startStep(event.type)\n\n    const session = this.session\n    // If we have not ascertained\n\n    if (session.axis) {\n\n      event.axis = session.axis\n\n      const deltaMs = Date.now() - session.startTs\n\n      event.deltaY = session.lastY - session.startY\n      event.deltaX = session.lastX - session.startX\n\n      const change = Math.abs(session.axis === AXIS.X ? event.deltaX : event.deltaY),\n            speed  = deltaMs ? (change * 1000 / (deltaMs * deltaMs)) : 0\n\n      let quickRatio    = (speed - FAST_MIN_SPEED) / (FAST_MAX_SPEED - FAST_MIN_SPEED)\n      quickRatio        = quickRatio < 0 ? 0 : (quickRatio > 0.5 ? 0.5 : quickRatio)\n      event.quickRatio  = quickRatio\n      event.speed       = speed\n      event.timeTaken   = deltaMs\n\n      // this.rc.isWarn() && this.rc.warn(this.rc.getName(this), {change, deltaMs, speed, \n      //   quickRatio, FAST_MIN_SPEED, FAST_MAX_SPEED})\n\n      if (this.measure) this.session.perf.startStep('onPanEnd')\n      session.ifNail.onPanEnd(event)\n      if (this.measure) this.session.perf.endStep('onPanEnd')\n    } else if (this.appComponent.onTouchEnd) {\n      this.appComponent.onTouchEnd(event)\n    }\n\n    if (this.measure) this.session.perf.endStep(event.type)\n    if (this.measure) this.session.perf.finish()\n    this.session = null\n  }\n\n  private extractEventAttr(event: any): void {\n\n    const session = this.session\n\n    const touch     = event.touches[0]\n    session.lastX   = touch.pageX\n    session.lastY   = touch.pageY\n\n    if (session.startX === -1) {\n      session.startX  = session.lastX\n      session.startY  = session.lastY\n      session.startTs = Date.now()\n    }\n  }\n\n  // figure out direction of movement\n  private ascertainDirection(event: any, deltaX: number, deltaY: number) {\n\n    const session = this.session,\n          config  = this.config,\n          posDx   = Math.abs(deltaX),\n          posDy   = Math.abs(deltaY)\n\n    let axis = 0\n    if (posDx >= THRESHOLD_PIXELS && (config.threshold > (posDy / posDx))) {\n      axis = AXIS.X\n    } else if (Math.abs(posDy) >= THRESHOLD_PIXELS && (config.threshold > (posDx / posDy))) {\n      axis = AXIS.Y\n    } else if (posDx > MAX_THRESHOLD_PIXELS) {\n      axis = AXIS.X\n    } else if (posDy > MAX_THRESHOLD_PIXELS) {\n      axis = AXIS.Y\n    }\n\n    if (!axis) return false\n\n    if (!((axis === AXIS.X && config.axisX) || (axis === AXIS.Y && config.axisY))) {\n      this.rc.isStatus() && this.rc.status(this.rc.getName(this), this.compName, \n        'Cancelling ascertain as we locked incorrect axis')\n      session.ignore = true\n      return\n    }\n\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), this.compName, event.type,\n    'Ascertained', axis, {deltaX, deltaY})\n    session.axis   = axis\n    \n    if (((session.startX < config.gutterWidth) || (deltaX > 0 && config.disallowRight)) && config.gutterLeft) {\n      session.ifNail = config.gutterLeft\n    } else if (((session.startX > (this.pageWidth - config.gutterWidth)) || (deltaX < 0 && config.disallowLeft)) && config.gutterRight) {\n      session.ifNail = config.gutterRight\n    } else {\n      session.ifNail = this.appComponent\n    }\n\n    event.axis    = session.axis\n    event.deltaX  = deltaX\n    event.deltaY  = deltaY\n    if (this.session.ifNail.onPanStart) {\n      if (this.measure) this.session.perf.startStep('onPanStart')\n      this.session.ifNail.onPanStart(event)\n      if (this.measure) this.session.perf.endStep('onPanStart')\n    }\n\n    return true\n  }\n\n  private onRunAnimation() {\n    \n    const session = this.session\n    if (!session) return\n\n    this.session.animHandle = null\n\n    if (session.ignore || session.animSessionId !== session.id) return\n    session.ifNail.onPanAnimate(...session.animateParam)\n  }\n  \n  public destroy() {\n\n    for (const handler of this.handlers) {\n      handler()\n    }\n    this.handlers = []\n    this.config   = null\n    this.session  = null\n  }\n\n}","/*------------------------------------------------------------------------------\n   About      : <Write about the file here>\n   \n   Created on : Fri Jun 23 2017\n   Author     : Raghvendra Varma\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\nexport const INJECTION_PARAM = {\n  CALLER  : 'caller',\n  INJECT  : 'inject'\n}\n\nexport interface InjectionCaller {\n  setResult(calleeId: string, result: any)\n}\n\nexport interface InjectionParent {\n  close(): void\n}\n\nexport interface InjectedChild {\n  initFromParent?(ip: InjectionParent, showTitle: boolean): void\n  setCaller?(caller: InjectionCaller): void\n  setParam?(params: object) : void \n  closeFromParent?()        : void\n  ngOnDestroy?()            : void\n  canGoBack?()              : boolean\n  onBackPressed?()          : void\n\n}\n\nexport interface BottomInInterface extends InjectedChild {\n  getHalfHeight()     : number\n  getTitle()          : string\n  getDefaultState?()  : any\n}\n\nexport interface ModalInterface extends InjectedChild {\n  getWidth()          : string\n  getCssClassName?()  : string  \n  isNotDismissable?() : boolean\n  isNotScrollable?()  : boolean\n}","/*------------------------------------------------------------------------------\n   About      : Any component be it routable or not which needs to be tracked \n                for analytics must extent this class. All actions performed \n                on sub components / HTML elements in this kind of component \n                will be logged under the trackable screen name.\n\n   Created on : Sat Nov 03 2018\n   Author     : Sid\n   \n   Copyright (c) 2018 Obopay. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { RunContextBrowser } from '../../rc-browser'\n \nexport abstract class TrackableScreen  {\n  \n  abstract getRouteName(): string\n  \n  constructor(protected rc : RunContextBrowser) {\n\n  }\n\n  onApiComplete(success: boolean) { \n    \n  }\n\n  ngOnDestroy() {\n\n    // if (this.rc.userKeyVal.clientId && this.isUserVisited()) {\n    //   const key = Object.keys(ComponentRoute)\n    //     .find(key => ComponentRoute[key] === this.getRouteName())\n\n    //    this.rc.userKeyVal.setScreenVisited(key)\n    // }\n  }\n\n}","export const ComponentRoutes = {\n  Modal                         : 'modal',\n  BottomIn                      : 'bottomIn',\n  LoadingOverlay                : 'loadingOvr',\n  Alert                         : 'alert',\n  Filter                        : 'filter'\n}","import { Component,\n         Inject }             from '@angular/core'\nimport { InjectionCaller, \n         InjectionParent, \n         ModalInterface}      from '../injection-interface'\nimport { TrackableScreen }    from '../../../ui/router/trackable-screen'\nimport { ComponentRoutes }    from '../../router/shared-router-constants'\nimport { RunContextBrowser }  from '../../../rc-browser'\n\n \nexport interface AlertDialogParams {\n  message          : string\n  positiveActText  : string\n  title           ?: string\n  negativeActText ?: string\n  contextId       ?: string //If same component is invoking this dialog with different contexts\n  canGoBack       ?: boolean\n  showCloseBtn    ?: boolean\n  positiveLink    ?: string\n}\n\nexport interface AlertDialogResult {\n  result        : DIALOG_RESULT\n  contextId ?   : string\n  positiveLink ?: string\n}\n\nexport enum DIALOG_RESULT {\n  YES = 'YES',\n  NO  = 'NO'\n}\n\n@Component({\n  selector    : 'app-alert-dialog',\n  templateUrl : './alert-dialog.component.html',\n  styleUrls   : ['./alert-dialog.component.scss']\n})\n\n\nexport class AlertDialogComponent extends TrackableScreen implements ModalInterface {\n\n  private caller    : InjectionCaller\n  private myParent  : InjectionParent\n  private result    : DIALOG_RESULT\n  private contextId : string\n  private allowBack : boolean\n\n  showCloseBtn    : boolean\n  title           : string\n  message         : string\n  positiveActText : string\n  negativeActText : string\n  positiveLink    : string\n\n  constructor(@Inject('RunContext') protected rc  : RunContextBrowser) { \n    super(rc)\n    \n  }\n\n  getWidth() {\n    return '80vw'\n  }\n\n  getRouteName() {\n    return ComponentRoutes.Alert\n  }\n\n  isUserVisited() {\n    return true\n  }\n\n\n  /*=====================================================================\n                                  CALLBACKS\n  =====================================================================*/\n  setParam(queryParams : any) {\n    this.rc.isAssert() && this.rc.assert(this.rc.getName(this), queryParams['message'] &&\n    queryParams['positiveActText'], `missing queryparams ${queryParams}`)\n    this.title            = queryParams['title']\n    this.message          = queryParams['message']\n    this.positiveActText  = queryParams['positiveActText']\n    this.negativeActText  = queryParams['negativeActText'] || ''\n    this.contextId        = queryParams['contextId'] || ''\n    this.allowBack        = queryParams['canGoBack']\n    this.showCloseBtn     = queryParams['showCloseBtn'] || false\n    this.positiveLink     = queryParams['positiveLink']\n  }\n\n  setCaller(caller: InjectionCaller) {\n    this.caller = caller\n  }\n\n  initFromParent(ip: InjectionParent, showTitle: boolean) {\n    this.myParent = ip\n  }\n\n  close() {\n    this.myParent.close()\n  }\n\n  closeFromParent() {\n    const result : AlertDialogResult = {\n      result      : this.result,\n      contextId   : this.contextId,\n      positiveLink: this.positiveLink\n    }\n    this.caller.setResult(this.getRouteName(), result)\n  }\n\n  isNotDismissable() {\n    return true\n  }\n\n  canGoBack() {\n    const canGoBack = this.allowBack !== undefined\n\n    return canGoBack ? this.allowBack : true\n\n  }\n\n  /*=====================================================================\n                              HTML FUNCTIONS\n  =====================================================================*/\n  onCancel() {\n    this.result  = DIALOG_RESULT.NO\n    this.close()\n  }\n\n  onContinue() {\n    this.result     = DIALOG_RESULT.YES\n    this.allowBack  = true\n    this.close()\n  }\n  \n}\n","/*------------------------------------------------------------------------------\n   About      : <Write about the file here>\n   \n   Created on : Fri Jun 16 2017\n   Author     : Raghvendra Varma\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\nimport { Router,\n         NavigationExtras,\n         NavigationEnd,\n         UrlSegment,\n         UrlTree\n        }                       from '@angular/router'\nimport { INJECTION_PARAM, \n         InjectionCaller \n       }                        from '../mu-components/injection-interface'\nimport { AlertDialogParams,\n         AlertDialogComponent \n       }                        from '../mu-components/alert-dialog/alert-dialog.component'\n\nimport { RunContextBrowser }    from '../../rc-browser'\nimport { Mubble }               from '@mubble/core'\nimport { ComponentRoutes }      from './shared-router-constants'\nimport isEqual                  from 'lodash/isEqual'\n\nconst ROOT_URL     = '#/?launched=true'\n\nconst hashIndex = location.href.indexOf('#'),\n      baseHref  = hashIndex !== -1 ? location.href.substr(0, hashIndex) : location.href\n\nconst BASE_HREF    = baseHref\n\nexport const PRIMARY_OUTLET = 'primary',\n             MODAL_OUTLET   = 'modal'\n\nexport enum TOAST_POSITION { TOP = 1, MIDDLE, BOTTOM }\n\nexport enum NavMethod {NEXT = 1, CURRENT, POP}\n      \nexport type OUTLET = 'primary' | 'modal'\n\nexport interface NcNavigationExtras extends NavigationExtras {\n  replaceIndex   ?: number\n  paramsId       ?: string,\n  replaceAllUrls ?: boolean\n}\n\nclass StackItem {\n  url         : string\n  qpId        : string\n  queryParam  : Mubble.uObject<any>\n  outlet      : OUTLET\n}\n\nclass OutletEntry {\n  component   : any    = null\n  invCount    : number = 0\n  lastParams  : Mubble.uObject<any>\n\n  constructor(component: any) { this.component = component }\n}\n\nexport class UiRouter {\n\n  // helper for ui framework\n  private historyWrapper  : HistoryWrapper\n\n  private componentRegistry = {}\n\n  // variables for navigation\n  protected urlStack    : StackItem[]  = []\n  protected warnedUser  : boolean   = false\n\n  private firstNavDone  : boolean   = false\n  private browserStack  : string[]  = []\n\n  private lastNavMethod : NavMethod = 0 \n  private lastPopIndex  : number    = -1\n  private lastNavUrl    : string    = ''\n  private lastGoingBack : boolean   = false\n  private curOutlet     : OUTLET\n  private currentQpId   : string    = ''\n  private curQueryParam : Mubble.uObject<any>\n  private curCompMap    : Mubble.uObject<OutletEntry> = {}\n  \n  private codePop           : boolean = false\n  private runningInBrowser  : boolean = false\n  private isSdkApp          : boolean = false \n  private iframeHistLength  : number  = 0\n\n  constructor(private rcBrowser         : RunContextBrowser,\n              protected router          : Router) {\n\n  }\n\n  public init(runningInBrowser: boolean, isSdkApp : boolean = false) {\n\n    this.runningInBrowser = runningInBrowser\n    this.isSdkApp         = isSdkApp\n\n    this.historyWrapper = new HistoryWrapper(this.rcBrowser, this.isSdkApp)\n\n\n    this.urlStack[0]      = new StackItem()\n    this.urlStack[0].url  = (location.hash || '').substr(1)\n\n    this.historyWrapper.replaceState({index: -1}, document.title, baseHref + ROOT_URL)\n    this.historyWrapper.pushState({index: 0}, document.title, baseHref)\n\n    if (!this.isSdkApp) window.addEventListener('popstate', this.onPopState.bind(this))  \n\n    \n    this.browserStack[0]  = this.urlStack[0].url\n    this.router.events.subscribe(this.onNavEnd.bind(this))\n\n    this.rcBrowser.isDebug() && this.rcBrowser.debug(this.rcBrowser.getName(this), 'initialized with', {\n      url           : this.urlStack[0].url\n    })\n  }\n\n  public async navigate(routeTo: string, extras ?: NcNavigationExtras) {\n\n    if (extras && extras.replaceAllUrls) {\n      if (this.urlStack.length - 1 > 0) {\n        extras.replaceIndex = 1\n      }\n    }\n\n    return await this.navigateByUrl([{ outlets: { primary : routeTo, modal: null } }], extras, PRIMARY_OUTLET)\n  }\n\n  public async rootNavigate(routeTo: string, extras ?: NcNavigationExtras) {\n    \n    this.rcBrowser.isStatus() && this.rcBrowser.status(this.rcBrowser.getName(this), \n      'Inside RootNavigate', routeTo)\n    if (!extras) extras = {}\n    extras.replaceIndex = 0\n    \n    return await this.navigateByUrl([{ outlets: { primary : routeTo,modal: null } }], extras, PRIMARY_OUTLET)\n  }\n\n  public areWeGoingBack() {\n    return this.lastGoingBack\n  }\n\n  public isModalActive() {\n    return Object.keys(this.curCompMap).length !== 1\n  }\n\n  public isShowingPopup() {\n    return this.curOutlet !== PRIMARY_OUTLET\n  }\n\n  private async navigateByUrl(urlOrCommand: string | any[], extras ?: NcNavigationExtras, \n          outlet ?: OUTLET) {\n\n    if (!extras) extras = {}\n    if (!extras.queryParams) extras.queryParams = {}\n\n    this.lastNavMethod && this.rcBrowser.isError() && this.rcBrowser.error(this.rcBrowser.getName(this), \n      'Navigating while last navigation not complete, possibly double nav...')\n\n    if (extras.replaceIndex === undefined) {\n      this.lastNavMethod  = extras.replaceUrl ? NavMethod.CURRENT : NavMethod.NEXT\n      this.lastPopIndex   = -1\n      this.rcBrowser.isStatus() && this.rcBrowser.status(this.rcBrowser.getName(this), 'Routing to', urlOrCommand, 'with', extras)\n      this.lastGoingBack = false\n    } else {\n      this.lastGoingBack = true\n      if (extras.replaceIndex >= this.urlStack.length) {\n        this.rcBrowser.isError() && this.rcBrowser.error(this.rcBrowser.getName(this),\n        'Ignoring navigation to replaceIndex that is more than number of items in stack', \n        {replaceIndex: extras.replaceIndex, urlStackLength: this.urlStack.length})\n        extras.replaceIndex = this.urlStack.length - 1\n      }\n\n      this.lastNavMethod  = NavMethod.POP\n      this.lastPopIndex   = extras.replaceIndex\n      this.rcBrowser.isStatus() && this.rcBrowser.status(this.rcBrowser.getName(this), 'navigateByUrl: Route back by', \n        extras.replaceIndex - this.urlStack.length + 1, 'to url', urlOrCommand)\n    }\n    \n    // prepare extras\n    delete extras.replaceUrl\n    extras.skipLocationChange = true\n\n    const nc_paramsId = extras.paramsId || 'qp' + Date.now()\n\n    let modalRoute: string \n\n    if (extras.queryParams) {\n      modalRoute = extras.queryParams.modalRoute\n    }\n    \n    this.currentQpId    = nc_paramsId\n    this.curQueryParam  = extras.queryParams\n\n    extras.queryParams  = modalRoute ? {nc_paramsId, modalRoute: modalRoute} : {nc_paramsId}\n    \n    this.curOutlet = outlet || PRIMARY_OUTLET\n\n    const url = Array.isArray(urlOrCommand) ? this.router.createUrlTree(urlOrCommand, extras) : urlOrCommand\n    this.lastNavUrl = typeof url === 'string' ? url : this.router.serializeUrl(url)\n\n\n    if (await this.router.navigateByUrl(url, extras)) {\n      return true\n    }\n  }\n\n  public popupBottomIn(component: any, componentRoute: string, queryParams ?: any,\n    replaceUrl?: boolean, caller ?: InjectionCaller) {\n    if (!queryParams) queryParams = {}\n    const repUrl: boolean = replaceUrl || false\n    this.showInModal(component, componentRoute, queryParams, ComponentRoutes.BottomIn, caller, repUrl)\n  }\n\n  public popupModal(component: any, componentRoute: string, queryParams ?: any, \n    replaceUrl?: boolean, caller ?: InjectionCaller) {\n\n    if (!queryParams) queryParams = {}\n    const repUrl: boolean = replaceUrl || false\n    this.showInModal(component, componentRoute, queryParams, ComponentRoutes.Modal, caller, repUrl)\n  }\n\n  public showAlertDialog(queryParams : AlertDialogParams, caller : InjectionCaller, replaceUrl ?: boolean) {\n    this.popupModal(AlertDialogComponent, ComponentRoutes.Alert, queryParams, replaceUrl, caller)\n  }\n\n  public hasQueryParamsById(params): boolean {\n    return !!params.nc_paramsId\n  }\n\n  public getUrlStackLength() {\n    return this.urlStack.length\n  }\n\n  public getCurrentComponent(outlet = PRIMARY_OUTLET): any {\n    return this.curCompMap[outlet]\n  }\n\n  public getCurrentRouteName(): string {\n\n    const topUrl: string = this.urlStack[this.urlStack.length-1].url\n    return this.getRouteName(topUrl)\n  }\n\n  public onNavCancel() {\n    this.lastNavMethod  = 0\n  }\n\n  public getCurQueryParams() {\n    return this.curQueryParam\n  }\n\n  public getRouteName(url : string): string {\n\n    const urlTree: UrlTree        = this.router.parseUrl(url)\n    const segments: UrlSegment[]  = urlTree.root.children.primary ? urlTree.root.children.primary.segments : undefined\n    \n    if (!segments) {\n      //we are adding dummy url (#/?launched=true) in the beginning.\n      this.rcBrowser.isWarn() && this.rcBrowser.warn(this.rcBrowser.getName(this), \n      `received invalid url ${url}`)\n      return ''\n    }\n\n    if (segments.length > 1) {\n      let path = ''\n\n      segments.forEach((segment, index) => {\n        path += segment + (index < segments.length-1 ? '/' : '') \n      })\n      return path\n    }\n\n    return segments[0].path\n  }\n\n  public getModuleName(url : string): string {\n\n    const urlTree: UrlTree        = this.router.parseUrl(url)\n    const segments: UrlSegment[]  = urlTree.root.children.primary.segments\n\n    return segments[0].path\n  }\n\n  public getCurrentQueryParams(): any {\n    return this.curQueryParam\n  }\n\n  public getQueryParams(params): any {\n\n    const nc_paramsId = params.nc_paramsId\n    this.rcBrowser.isAssert() && this.rcBrowser.assert(this.rcBrowser.getName(this), nc_paramsId && nc_paramsId === this.currentQpId, \n      'Trying to retrieve non-existent params', params, this.currentQpId)\n\n    return this.curQueryParam\n  }\n\n  public clearHisory() {\n    const distanceFromRoot  = -1 * this.historyWrapper.getState().index - 1\n    this.historyWrapper.go(distanceFromRoot)\n  }\n\n  public setIframeHistLength(length  : number) {\n    this.iframeHistLength = length\n  }\n\n  public updateQueryParam(name: string, value: any) {\n\n    const stackItem = this.urlStack[this.urlStack.length - 1],\n          queryParam = stackItem.queryParam\n\n    this.rcBrowser.isAssert() && this.rcBrowser.assert(this.rcBrowser.getName(this), \n      queryParam, 'Your component does not get params by id')\n    queryParam[name] = value\n  }\n\n  public setComponentForOutlet(component: any, outlet ?: OUTLET) {\n    outlet = outlet || PRIMARY_OUTLET\n    this.rcBrowser.isAssert() && this.rcBrowser.assert(this.rcBrowser.getName(this), component)\n    const oldEntry = this.curCompMap[outlet]\n\n    if (oldEntry && oldEntry.component === component) return\n    this.curCompMap[outlet] = new OutletEntry(component)\n  }\n\n  public removeComponentForOutlet(component: any, outlet ?: string) {\n    outlet = outlet || PRIMARY_OUTLET\n    this.rcBrowser.isAssert() && this.rcBrowser.assert(this.rcBrowser.getName(this), this.curCompMap[outlet].component === component)\n    delete this.curCompMap[outlet]\n  }\n\n  private showInModal(component: any, componentRoute: string, queryParams: any, \n    type: string, caller ?: InjectionCaller, replaceUrl?: boolean) {\n\n    const compName = component.name\n    this.registerComponent(compName, component)\n\n    queryParams[INJECTION_PARAM.INJECT] = compName\n    if (caller) queryParams[INJECTION_PARAM.CALLER] = caller\n    \n    queryParams.modalRoute = '(' + componentRoute + ')'\n    const repUrl: boolean = replaceUrl || false\n    \n    this.rcBrowser.isStatus() && this.rcBrowser.status(this.rcBrowser.getName(this), `Popping up ${type} for ${compName}`)\n    this.navigateByUrl([{outlets: { modal: type}}], {replaceUrl: repUrl, \n      queryParams: queryParams}, MODAL_OUTLET)\n  }\n\n  public showModalPage(componentRoute: string, queryParams: any, replaceUrl?: boolean) {\n    \n    queryParams.modalRoute = '(' + componentRoute + ')'\n    const repUrl: boolean = replaceUrl || false\n\n    this.navigateByUrl([{outlets: { modal: componentRoute}}], \n      {replaceUrl: repUrl, queryParams: queryParams}, MODAL_OUTLET)\n  }\n\n  public goBack(whereOrByHowMuch ?: string | number) {\n\n    if (!this.canGoBack()) return\n    if (this.isModalActive()) {\n      this.onPopUpClosed()\n    }\n    return this.goBackInternal(whereOrByHowMuch)\n  }\n\n  public goBackInternal(whereOrByHowMuch ?: string | number) {\n    const stackLen = this.urlStack.length\n\n    let index = typeof whereOrByHowMuch === 'number' ? stackLen + whereOrByHowMuch - 1 : stackLen - 2,\n        where = typeof whereOrByHowMuch === 'string' ? whereOrByHowMuch : ''\n\n    this.rcBrowser.isAssert() && this.rcBrowser.assert(this.rcBrowser.getName(this), \n      index >= 0 && index < stackLen, {stackLen, whereOrByHowMuch, where, index})\n\n    if (where) {\n      if (!where.startsWith('/')) where = '/' + where\n      for (; index >= 0; index--) {\n        if (this.urlStack[index].url.startsWith(where)) break\n      }\n      if (index === - 1) {\n        this.rcBrowser.isError() && this.rcBrowser.error(this.rcBrowser.getName(this), \n          'Could not find the desired url:', where, this.urlStack)\n        throw(new Error('Could not find the desired url: ' + where))\n      }\n    }\n\n    const urlStack = this.urlStack[index],\n          ne: NcNavigationExtras  = {replaceUrl: true}\n\n    if (urlStack.qpId) {\n      ne.paramsId     = urlStack.qpId\n      ne.queryParams  = urlStack.queryParam\n    }\n\n    ne.replaceIndex = index\n    this.navigateByUrl(urlStack.url, ne, urlStack.outlet)\n  }\n\n  /*--------------------------------------------------------------------------------------------------------------\n    History Stack management\n  --------------------------------------------------------------------------------------------------------------*/\n  \n  private onPopState(e) {\n\n    const index     = this.historyWrapper.getState().index,\n          stackLen  = this.urlStack.length\n    \n    this.rcBrowser.isDebug() && this.rcBrowser.debug(this.rcBrowser.getName(this), 'onPopState', {stackLen, index})\n\n    this.rcBrowser.isAssert() && this.rcBrowser.assert(this.rcBrowser.getName(this), typeof index === 'number' && \n      index < (stackLen - 1), {stackLen, index})\n\n    if (index === -1) {\n      \n      if (!this.codePop) {\n\n        if (!this.canCompGoBack()) {\n          return\n        }\n\n        if (this.warnedUser || this.runningInBrowser) {\n          this.rcBrowser.isDebug() && this.rcBrowser.debug(this.rcBrowser.getName(this),\n            'onPopState: Exiting the app', this.historyWrapper.getLength())\n          this.notifyAppClose()\n          \n          if (!this.runningInBrowser) this.notifyAppClose() \n          else location.reload()\n\n          return\n        } else {\n          this.warnedUser = this.notifyUserBackPress()\n        }\n      } else {\n        this.codePop = false\n      }\n\n      this.rcBrowser.isDebug() && this.rcBrowser.debug(this.rcBrowser.getName(this), \n        'onPopState: Winding up stack on back to first item')\n\n      for (let i = 0; i < stackLen; i++) {\n        this.browserStack[i] = this.urlStack[i].url\n        this.historyWrapper.pushState({index: i}, '', BASE_HREF + '#' + this.urlStack[i].url)\n      }\n      this.browserStack.length = stackLen\n\n    } else {\n\n      if (!this.canCompGoBack()) {\n        return\n      }\n\n      if (this.isModalActive()) {\n        this.onPopUpClosed()\n      }\n\n      const goBackBy = index - stackLen + 1\n      this.rcBrowser.isDebug() && this.rcBrowser.debug(this.rcBrowser.getName(this), \n        'onPopState: Going back by', {index, goBackBy})\n\n      this.goBackInternal(goBackBy)\n    }\n  }\n\n  private canCompGoBack() {\n    if (!this.canGoBack() || this.isToolTipShown()) {\n      const lastIdx  = this.urlStack.length - 1,\n      lastItem = this.urlStack[lastIdx]\n      this.historyWrapper.pushState({index: lastIdx}, '', BASE_HREF + '#' + lastItem.url)\n      this.rcBrowser.isDebug() && this.rcBrowser.debug(this.rcBrowser.getName(this), 'not going back')\n      return false\n    }\n\n    return true\n  }\n\n  private onPopUpClosed() {\n    const lastIdx  = this.urlStack.length - 1,\n    lastItem = this.urlStack[lastIdx]\n\n    if (!lastItem) return \n    const comp = this.curCompMap[lastItem.outlet]\n    if (!comp || !comp.component.onBackPressed) return\n    comp.component.onBackPressed()\n  }\n\n  protected canGoBack() {\n\n    const lastIdx  = this.urlStack.length - 1,\n          lastItem = this.urlStack[lastIdx]\n   \n    if (!lastItem) return true\n    const comp = this.curCompMap[lastItem.outlet]\n    if (!comp || !comp.component.canGoBack) {\n      this.removeOverlayIfExists()\n      return true\n    }\n    if (!comp.component.canGoBack()) {\n      this.rcBrowser.isDebug() && this.rcBrowser.debug(this.rcBrowser.getName(this), \n        'Skipping back as component dis-allowed back press')\n      return false\n    } else {\n      this.rcBrowser.isDebug() && this.rcBrowser.debug(this.rcBrowser.getName(this), \n        'Going back as component allowed back press')\n      return true\n    }\n  }\n\n  private onNavEnd(event ?: any) {\n\n\n\n    if (!(event instanceof NavigationEnd)) {\n      return\n    }\n\n    if (!this.firstNavDone) {\n      \n      this.firstNavDone   = true\n\n      if (!this.lastNavMethod) {\n        this.lastNavMethod  = NavMethod.CURRENT\n        this.lastNavUrl     = event.url\n        this.curOutlet      = PRIMARY_OUTLET\n      }\n\n      const url     = location.href,\n            hashPtr = url.indexOf('#')\n\n      const urlPrefix   = hashPtr === -1 ? url : url.substr(0, hashPtr)\n    }\n\n    this.rcBrowser.isStatus() && this.rcBrowser.status(this.rcBrowser.getName(this), 'NavigationEnd', {\n      url           : event.url, \n      lastNavMethod : NavMethod[this.lastNavMethod],\n      lastPopIndex  : this.lastPopIndex,\n      lastNavUrl    : this.lastNavUrl,\n      stackLength   : this.urlStack.length\n    })\n\n    this.lastNavUrl !== event.url && this.rcBrowser.isError() && this.rcBrowser.error(this.rcBrowser.getName(this), \n      'onNavEnd without matching url desired:' + this.lastNavUrl + ' actual:' + event.url)\n\n    let refIndex\n\n    if (this.lastNavMethod === NavMethod.POP) {\n      refIndex = this.lastPopIndex\n    } else if (this.lastNavMethod === NavMethod.NEXT) {\n      refIndex = this.urlStack.length\n    } else if (this.lastNavMethod === NavMethod.CURRENT) {\n      refIndex = this.urlStack.length - 1\n    } else {\n      this.rcBrowser.isError() && this.rcBrowser.error(this.rcBrowser.getName(this), 'Got a navigation without navMethod', \n        this.urlStack, location.href)\n      throw('Got a navigation without navMethod')\n    }\n\n    const outletEntry = this.curCompMap[this.curOutlet]\n\n    if (!outletEntry) {\n      this.rcBrowser.isError() && this.rcBrowser.error(this.rcBrowser.getName(this), 'Current component is not known', {\n        url           : event.url, \n        lastNavMethod : NavMethod[this.lastNavMethod],\n        lastPopIndex  : this.lastPopIndex,\n        stackLength   : this.urlStack.length\n      })\n    } \n    \n    this.onMubbleScreenChange(event.url, this.curOutlet, this.lastNavMethod)\n  \n    if (this.urlStack.length === refIndex) this.urlStack[refIndex] = new StackItem()\n    const urlStack = this.urlStack[refIndex]\n\n    urlStack.url          = event.url\n    urlStack.qpId         = this.currentQpId\n    urlStack.queryParam   = this.curQueryParam\n    urlStack.outlet       = this.curOutlet\n    this.urlStack.length  = refIndex + 1\n\n    this.rcBrowser.isStatus() && this.rcBrowser.status(this.rcBrowser.getName(this), \n    'Current Url stack', this.urlStack[refIndex].url)\n\n    this.lastNavMethod  = 0\n    this.lastPopIndex   = -1\n    this.lastNavUrl     = ''\n    this.curOutlet      = null\n\n    this.setComponentParams(outletEntry)\n  \n    // When we remove the getParamsById function\n    // this.currentQpId    = ''\n    // this.curQueryParam  = null\n\n    if (this.warnedUser) this.warnedUser = false\n    if (!this.isSdkApp) this.syncBrowserHistory()\n\n    this.onMubbleScreenNavEnd(event.url, this.lastNavMethod)\n  }\n\n  private setComponentParams(outletEntry: OutletEntry) {\n\n    if (!outletEntry.component.onRouterInit) return\n\n    const params = this.router.routerState.root.snapshot.queryParams,\n          qp     = params.nc_paramsId ? this.curQueryParam : params\n\n    if (isEqual(qp, outletEntry.lastParams)) {\n      this.rcBrowser.isDebug() && this.rcBrowser.debug(this.rcBrowser.getName(this), 'Skipping onRouterInit as parameters are same')\n      return \n    }\n\n    outletEntry.component.onRouterInit(qp, !outletEntry.invCount)\n    outletEntry.invCount++\n    outletEntry.lastParams = qp\n  }\n\n  private syncBrowserHistory() {\n\n    const browserStack  = this.browserStack, \n          urlStack      = this.urlStack,\n          stackLen      = urlStack.length\n\n    let fromIndex = -1\n\n    // sync browserStack\n    for (let index = 0; index < stackLen; index++) {\n      if (fromIndex === -1 &&\n         (browserStack.length === index || browserStack[index] !== urlStack[index].url)) {\n        fromIndex = index\n        break\n      }\n    }\n\n    this.rcBrowser.isDebug() && this.rcBrowser.debug(this.rcBrowser.getName(this), \n      'syncBrowserHistory', {fromIndex, stackLen, browserStackLen: browserStack.length})\n\n    if (fromIndex === -1) {\n      if (urlStack.length !== browserStack.length) this.browserGotoRoot()\n\n    } else if (fromIndex === (stackLen - 1)) {\n\n      if (browserStack.length === urlStack.length) {\n        this.historyWrapper.replaceState({index: fromIndex}, '', BASE_HREF + '#' + urlStack[fromIndex])\n        browserStack[fromIndex] = urlStack[fromIndex].url\n      } else if (browserStack.length + 1 === urlStack.length) {\n        this.historyWrapper.pushState({index: fromIndex}, '', BASE_HREF + '#' + urlStack[fromIndex])\n        browserStack[fromIndex] = urlStack[fromIndex].url\n      } else {\n        this.browserGotoRoot()\n      }\n    } else {\n      this.browserGotoRoot()\n    }\n  }\n\n  private browserGotoRoot() {\n\n    this.rcBrowser.isAssert() && this.rcBrowser.assert(this.rcBrowser.getName(this), this.historyWrapper.getState().index >= 0)\n\n    const totalDistance = this.historyWrapper.getState().index\n\n    const distanceFromRoot = -1 * totalDistance - 1\n    this.rcBrowser.isDebug() && this.rcBrowser.debug(this.rcBrowser.getName(this), 'browserGotoRoot', { \n      distanceFromRoot, \n      stackLen        : this.urlStack.length, \n      browserStackLen : this.browserStack.length\n    })\n\n    this.codePop = true\n    this.historyWrapper.go(distanceFromRoot)\n    if (this.iframeHistLength) this.iframeHistLength = 0\n  }\n\n  /*--------------------------------------------------------------------------------------------------------------\n    Register components for reference by rest of the system\n  --------------------------------------------------------------------------------------------------------------*/\n\n  public registerComponent(compName: string, component) {\n\n    const oldComponent = this.componentRegistry[compName]\n    if (oldComponent === component) return\n\n    this.componentRegistry[compName] = component\n    this.rcBrowser.isStatus() && this.rcBrowser.status(this.rcBrowser.getName(this), \n      'Registered component with name', compName)\n  }\n\n  public getComponent(compName: string) {\n    return this.componentRegistry[compName]\n  }\n\n  public onMubbleScreenChange(url: string, outlet: OUTLET, lastNavMethod: NavMethod) {\n  \n  }\n\n  public onMubbleScreenNavEnd(url: string, lastNavMethod: NavMethod) {\n\n  }\n\n  public notifyUserBackPress() : boolean {\n    return true\n  }\n  \n  public notifyAppClose() {\n\n  }\n\n  public isToolTipShown() : boolean {\n    return true\n  }\n\n  public removeOverlayIfExists() {\n\n  }\n\n}\n\nclass HistoryWrapper {\n\n  constructor(private rc, private isSdkApp : boolean) {\n    rc.setupLogger(this, 'HistoryWrapper')\n  }\n\n  pushState(state: Mubble.uObject<any>, title: string, url: string) {\n    if (this.isSdkApp) return\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'before pushState', {\n      historyLength : history.length, \n      historyState  : history.state,\n      newState      : state\n    })\n    history.pushState(state, title, url)\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'after pushState', {\n      historyLength : history.length, \n      historyState  : history.state\n    })\n  }\n\n  replaceState(state: Mubble.uObject<any>, title: string, url: string) {\n    if (this.isSdkApp) return\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'before replaceState', {\n      historyLength : history.length, \n      historyState  : history.state,\n      title         : title,\n      url           : url,\n      newState      : state\n    })\n    history.replaceState(state, title, url)\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'after replaceState', {\n      historyLength : history.length, \n      historyState  : history.state\n    })\n  }\n\n  go(delta: number) {\n    if (this.isSdkApp) return\n    history.go(delta)\n  }\n\n  getState() {\n    if (this.isSdkApp) return\n    return history.state\n  }\n\n  getLength() {\n    if (this.isSdkApp) return\n    return history.length\n  }\n\n}","import {  Component, \n          OnInit, \n          OnDestroy,\n          AfterViewInit,\n          Inject, \n          Input,\n          SkipSelf,\n          HostBinding,\n          HostListener,\n          Renderer2,\n          ElementRef,\n          ComponentFactoryResolver, \n          ComponentFactory,\n          ViewContainerRef,\n          ComponentRef,\n          ChangeDetectorRef,\n          ViewChild }                 from '@angular/core'\n\nimport { ActivatedRoute }             from '@angular/router'\nimport { InjectionCaller,\n         InjectionParent, \n         InjectedChild, \n         INJECTION_PARAM }            from './injection-interface'\n\nimport { UiRouter }                   from '../router/ui-router'\nimport { RunContextBrowser }          from '../../rc-browser'\nimport { Mubble }                     from '@mubble/core'\n\nexport abstract class InjectionParentBase implements OnDestroy, InjectionParent {\n\n  childRequestedClose : boolean\n  injectedComponent   : InjectedChild\n  private icRef       : ComponentRef<any>\n  caller              : InjectionCaller\n  \n  constructor(public  rc: RunContextBrowser,\n              public  router: UiRouter, \n              private componentFactoryResolver: ComponentFactoryResolver,\n              private route: ActivatedRoute) {\n\n  }\n\n  onRouterInit(params: Mubble.uObject<any>, injectAt: ViewContainerRef, showTitle: boolean) {\n\n    this.rc.isStatus() && this.rc.status(this.rc.getName(this), 'onRouterInit called with', params)\n    \n    if (!this.injectedComponent) {\n      this.injectComponent(params.inject, injectAt)\n      this.caller = params[INJECTION_PARAM.CALLER]\n      if (this.injectedComponent.initFromParent) this.injectedComponent.initFromParent(this, showTitle)\n      if (this.caller && this.injectedComponent.setCaller) this.injectedComponent.setCaller(this.caller)\n    }\n    if (this.injectedComponent.setParam) this.injectedComponent.setParam(params)\n  }\n\n  // onInit(injectAt: ViewContainerRef, showTitle: boolean) {\n\n  //   this.querySub = this.route.queryParams.subscribe(inParams => {\n\n  //     const params = this.router.getQueryParams(inParams)\n  //     this.rc.isStatus() && this.rc.status(this.rc.getName(this), 'ngOnInit called with', params)\n\n  //     if (!this.injectedComponent) {\n  //       this.injectComponent(params.inject, injectAt)\n  //       this.caller = params[INJECTION_PARAM.CALLER]\n  //       if (this.injectedComponent.initFromParent) this.injectedComponent.initFromParent(this, showTitle)\n  //       if (this.caller && this.injectedComponent.setCaller) this.injectedComponent.setCaller(this.caller)\n  //     }\n  //     if (this.injectedComponent.setParam) this.injectedComponent.setParam(params)\n  //   })\n  // }\n\n  private injectComponent(compName, injectAt: ViewContainerRef) {\n    \n      const component = this.router.getComponent(compName)\n      \n      this.rc.isAssert() && this.rc.assert(this.rc.getName(this), component)\n\n      const factory:ComponentFactory<any>  = this.componentFactoryResolver.resolveComponentFactory(component)\n      this.icRef = injectAt.createComponent(factory)\n\n      this.icRef.changeDetectorRef.detectChanges()\n      this.injectedComponent = this.icRef.instance\n\n      this.rc.isStatus() && this.rc.status(this.rc.getName(this), 'Injected component with', \n        {injected: !!this.injectedComponent, factory: !!factory})\n  }\n\n  close() {\n    this.childRequestedClose = true\n    this.router.goBack()\n  }\n\n  ngOnDestroy() {\n    if (this.icRef) this.icRef.destroy()\n  }\n}","import {  Component, \n          OnInit, \n          OnDestroy,\n          AfterViewInit,\n          Inject, \n          Input,\n          HostBinding,\n          HostListener,\n          Renderer2,\n          ElementRef,\n          ComponentFactoryResolver, \n          ComponentFactory,\n          ViewContainerRef,\n          ComponentRef,\n          ChangeDetectorRef,\n          ViewChild }           from '@angular/core'\n\nimport {  ActivatedRoute }      from '@angular/router'\n\nimport { Nail,\n         NailInterface,\n         AXIS }                 from '../../nail'\n\nimport { UiRouter }             from '../../router/ui-router'\n\nimport { DomHelper }            from '../../../util/dom-helper'\n\nimport {  query, \n          style, \n          state,\n          trigger,\n          transition, \n          group,\n          animate }             from \"@angular/animations\"\n\nimport { Mubble, LOG_LEVEL }    from '@mubble/core'\n\nimport { InjectionParentBase }  from '../injection-base'\n\nimport { RunContextBrowser }    from '../../../rc-browser'\n\nimport { BottomInInterface }    from '../injection-interface'\n\nexport const STATE      = {HALF: 'HALF', FULL: 'FULL'}\n\nconst ROUTE_ANIM_MS     = 400,\n      PAN_ANIM_MS       = '300ms',\n      QUICK_ANIM_MS     = DomHelper.getQuickAnim(),\n      COMMIT_RATIO      = 1 / 3,\n      FAST_COMMIT_RATIO = COMMIT_RATIO / 2,\n      QUICK_SPEED       = .3\n\n@Component({\n  selector   : 'bottom-in',\n  templateUrl: './bottom-in.component.html',\n  styleUrls: ['./bottom-in.component.scss'],\n  animations: [\n    trigger('routeAnimation', [\n      \n      transition(':enter', [\n        group([\n          query(':self', [\n            style({\n              opacity: 0\n            }),\n            animate(ROUTE_ANIM_MS, style({\n              opacity: 1\n            }))\n          ]),\n          query('div.main', [\n            style(DomHelper.getPercentTransform(0, 100)),\n            animate(ROUTE_ANIM_MS, style('*'))\n          ])\n        ])\n      ]),\n      transition(':leave', [\n        group([\n          animate(ROUTE_ANIM_MS, style({\n            opacity: 0\n          })),\n          query('div.main', [\n            animate(ROUTE_ANIM_MS, style({\n              transform: 'translate3d(0, 100%, 0)'\n            }))\n          ])\n        ])\n      ])\n    ])\n  ]\n})\n\nexport class BottomInComponent extends InjectionParentBase implements  \n    AfterViewInit, NailInterface, OnDestroy {\n\n  @HostBinding('@routeAnimation') __routeAnimation  = null\n  @HostBinding('class.glb-animated-element') animElem   = true\n  // @HostBinding('style.z-index')   zIndex   = 2000\n \n  @HostListener('click', ['$event.target']) onHostClick(event) {\n    if (this.state === STATE.HALF) {\n      this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'Dismissing bottom-in due to host click')\n      this.animateClose()\n    }\n  }\n\n  @HostListener('@routeAnimation.start', ['$event']) onRouteAnimationStart(event) {\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'onRouteAnimation-start', event)\n    // console.log(event)\n  }\n\n  @HostListener('@routeAnimation.done', ['$event']) onRouteAnimationDone(event) {\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'onRouteAnimation-end', event)\n    // console.log(event)\n\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'onRouteAnimation-end', event)\n    if (this.childRequestedClose &&  this.injectedComponent.closeFromParent) {\n      if (this.routeEndProcessed) return\n      this.routeEndProcessed  = true\n      this.injectedComponent.closeFromParent()\n    } else if (this.backPressed && this.injectedComponent.onBackPressed) {\n      if (this.routeEndProcessed) return\n      this.routeEndProcessed  = true\n      this.injectedComponent.onBackPressed()\n    }\n  }\n\n  @ViewChild('main', { static: true })                                main          : ElementRef\n  @ViewChild('header', { static: true })                              header        : ElementRef\n  @ViewChild('compContainer', { static: true })                       compContainer : ElementRef\n\n  @ViewChild('injectAt', { read: ViewContainerRef, static: true })  injectAt;\n\n  injectedComponent       : BottomInInterface\n\n  private top             : number\n  @Input() title          : string  = ''\n  @Input() state          : string = STATE.HALF\n  @Input() allowFullPage  : boolean = true\n\n  private panY        : number\n  private animValue   : string\n\n  private panYMin     : number\n  private panYMax     : number\n  private nail        : Nail\n  private routeName   : string\n  private startTop    : number \n\n  private backPressed       : boolean\n  private routeEndProcessed : boolean = false\n\n  constructor(@Inject('RunContext') rc: RunContextBrowser,\n              router: UiRouter,\n              route: ActivatedRoute,\n              componentFactoryResolver: ComponentFactoryResolver,\n              private renderer: Renderer2,\n              private ref: ChangeDetectorRef) {\n\n    super(rc, router, componentFactoryResolver, route)\n    rc.setupLogger(this, 'BottomIn', LOG_LEVEL.DEBUG)\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'constructor')\n\n    if (rc.getGlobalLogLevel() === LOG_LEVEL.DEBUG) {\n      window['bi'] = this\n    }\n  }\n\n  onRouterInit(params: Mubble.uObject<any>) {\n\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'onRouterInit')\n\n    super.onRouterInit(params, this.injectAt, false)\n\n    this.title     = this.injectedComponent.getTitle()\n    let halfHeight = this.injectedComponent.getHalfHeight()\n\n    if (this.injectedComponent.getDefaultState) {\n      this.state = this.injectedComponent.getDefaultState()\n    }\n\n    if (this.state === STATE.FULL) {\n      halfHeight = document.body.clientHeight\n\n    } else if (halfHeight) {\n      if (halfHeight > document.body.clientHeight) {\n        this.rc.isError() && this.rc.error(this.rc.getName(this), 'Half height passed is incorrect', \n          {halfHeight, clientHeight: document.body.clientHeight})\n          halfHeight = 0.8 * document.body.clientHeight\n      }\n\n      this.top = document.body.clientHeight - halfHeight\n\n    } else {\n      this.allowFullPage = false\n    }\n  }\n  \n  ngAfterViewInit() {\n\n    // this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'ngAfterViewInit')\n\n    this.panYMax    = document.body.clientHeight\n\n    const $compCont    = this.compContainer.nativeElement,\n          compHeight   = $compCont.clientHeight,\n          headerHeight = this.header.nativeElement.getBoundingClientRect().height\n\n    if (this.allowFullPage) {\n      \n      this.panYMin    = 0\n      $compCont.style.height = document.body.clientHeight - headerHeight\n\n    } else {\n      this.top      = document.body.clientHeight - (compHeight + headerHeight)\n      this.panYMin  = this.top\n    }\n\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), \n    'ngAfterViewInit: Component container', {\n      clientHeight: document.body.clientHeight,\n      compHeight, headerHeight, \n      top: this.top\n    })\n    \n    this.main.nativeElement.style.transform = DomHelper.getTransform(0, this.top, 0).transform\n    \n    this.nail       = new Nail( this.rc, \n                                this.main.nativeElement, \n                                this, \n                                this.renderer,\n                                {axisX: false, axisY: true})\n\n    this.ref.detectChanges()\n  }\n\n  onPanStart() {\n\n    this.startTop = this.compContainer.nativeElement.scrollTop\n    // this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'onPanStart', {\n    //   panY: this.panY, state: this.state})\n  }\n\n  onPanMove(event: any): boolean {\n\n    let deltaY = event.deltaY\n    if (this.compContainer.nativeElement.scrollTop) {\n      this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'cancelling panMove',\n        {scrollTop: this.compContainer.nativeElement.scrollTop} )\n      return false\n    }\n    if (deltaY > 0) deltaY -= this.startTop\n  \n    let y = (this.state === STATE.HALF ? this.top : this.panYMin) + deltaY\n\n    if (y < this.panYMin) {\n      y = this.panYMin\n    } else if (y > this.panYMax) {\n      y = this.panYMax\n    }\n\n    // this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'onPanMove', {\n    //   type: event.type, deltaY, y, panY: this.panY, state: this.state\n    // })\n\n    const needAnimate = this.panY !== y\n\n    if (needAnimate) this.nail.requestAnimate(y)\n    return needAnimate\n  }\n\n  onPanAnimate(y: number) {\n    this.animateChange(y, false)\n  }\n\n  onPanEnd(event: any) {\n\n    // this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'onPanEnd', {\n    //   type: event.type, panY: this.panY, top: this.top, speed: event.speed\n    // })\n\n    if (this.state === STATE.HALF) {\n\n      if (this.panY > this.top) {\n        this.animateClose()\n      } else if (this.panY < this.top) {\n        this.onFull(true)\n      } else {\n        this.onHalf(true)\n      }\n\n    } else { // full\n\n      if (this.panY > this.panYMin) {\n        this.animateClose()\n      } else {\n        this.onFull(true)\n      }\n\n    }\n  }\n\n  onClick(event: any) {\n    event.preventDefault()\n    event.stopPropagation()\n  }\n\n  ngOnDestroy() {\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'ngOnDestroy')\n    super.ngOnDestroy()\n    if (this.nail)      this.nail.destroy()\n  }\n\n  onHalf(runAnimation: boolean) {\n    this.state = STATE.HALF\n    this.animateChange(this.top, runAnimation)\n  }\n\n  onFull(runAnimation: boolean) {\n    this.state = STATE.FULL\n    this.animateChange(this.panYMin, runAnimation)\n  }\n\n  animateChange(y: number, runAnimation: boolean) {\n\n    if (this.panY !== y) {\n\n      this.panY = y\n\n      const animValue = runAnimation ? PAN_ANIM_MS : QUICK_ANIM_MS\n\n      if (this.animValue !== animValue) {\n        this.animValue = animValue\n        this.main.nativeElement.style.transition = animValue\n      }\n      \n      DomHelper.setTransform(this.main.nativeElement, 0, y, 0)\n    }\n  }\n\n  animateClose() {\n    this.injectedComponent.closeFromParent()\n    this.router.goBack()\n  }\n\n  onBackPressed() {\n    this.backPressed = true\n  }\n}   \n","import {  Component, \n          OnInit, \n          OnDestroy,\n          AfterViewInit,\n          Inject, \n          Input,\n          SkipSelf,\n          HostBinding,\n          HostListener,\n          Renderer2,\n          ElementRef,\n          ComponentFactoryResolver, \n          ViewContainerRef,\n          ComponentRef,\n          ChangeDetectorRef,\n          ViewChild }                 from '@angular/core'\n          \nimport { Router, ActivatedRoute }     from '@angular/router'\n\nimport { query, \n         style, \n         state,\n         trigger,\n         transition, \n         group,\n         animate }                    from \"@angular/animations\"\n\nimport { Mubble, LOG_LEVEL }          from '@mubble/core'\n\nimport { InjectionParentBase }        from '../injection-base'\n\nimport { RunContextBrowser }          from '../../../rc-browser'\n\nimport { ModalInterface }             from '../injection-interface'\n\nimport { UiRouter }                   from '../../router/ui-router'\n\nconst ROUTE_ANIM_MS     = 400\n\n@Component({\n  selector    : 'modal-popup',\n  templateUrl: './modal-popup.component.html',\n  styleUrls: ['./modal-popup.component.scss'],\n  animations: [\n    // trigger('routeAnimation', [\n    //   state('*', \n    //     style({\n    //       'background-color': 'rgba(31,30,76, 0.6)', //primary color's 900 shade\n    //       opacity: 1\n    //     })\n    //   ),\n\n    //   transition(':enter', [\n    //     style({\n    //       'background-color': 'rgba(0,0,0,0)',\n    //       opacity: 1\n    //     }),\n    //     animate('1500ms')\n    //   ]),\n      \n    //   transition(':leave', [\n    //     animate('500ms', style({\n    //       'background-color': 'rgba(0,0,0,0)',\n    //       opacity: 0\n    //     }))\n    //   ])\n    // ]),\n\n    // trigger('ccAnimate', [\n    //   state('*',\n    //     style({\n    //       'transform': 'rotateX(0deg)',\n    //     })\n    //   ),\n\n    //   transition(':enter', [\n    //     style({\n    //       'transform': 'rotateX(90deg)',\n    //     }),\n    //     animate('300ms cubic-bezier(0.55, 0.055, 0.675, 0.19)')\n    //   ])\n      \n    // ])    \n\n    trigger('routeAnimation', [\n      \n      transition(':enter', [\n        group([\n          query(':self', [\n            style({\n              opacity: 0\n            }),\n            animate(ROUTE_ANIM_MS, style({\n              opacity: 1\n            }))\n          ]),\n          query('div.modal-root-div', [\n            style({\n              transform: 'rotateX(90deg)'\n            }),\n            animate(ROUTE_ANIM_MS, style('*'))\n          ])\n        ])\n      ]),\n      transition(':leave', [\n        group([\n          animate(ROUTE_ANIM_MS, style({\n            opacity: 0\n          }))\n        ])\n      ])\n    ])\n  ]\n})\n\nexport class ModalPopupComponent extends InjectionParentBase implements AfterViewInit, OnDestroy {\n\n  @HostBinding('class.glb-flex-centered') true\n  @HostBinding('@routeAnimation') __routeAnimation = true\n  @HostBinding('class.glb-animated-element') animElem   = true\n  // @HostBinding('style.z-index')   zIndex   = 3000;\n  // @HostBinding('style.background-color') bg   = 'rgba(0,0,0,.5)'\n \n  @HostListener('click', ['$event.target']) onHostClick(event) {\n    this.animateClose()\n  }\n  @HostListener('@routeAnimation.start', ['$event']) onRouteAnimationStart(event) {\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'onRouteAnimation-start', event)\n  }\n\n  @HostListener('@routeAnimation.done', ['$event']) onRouteAnimationDone(event) {\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'onRouteAnimation-end', event)\n    if (this.childRequestedClose &&  this.injectedComponent.closeFromParent) {\n      if (this.routeEndProcessed) return\n      this.routeEndProcessed  = true\n      this.injectedComponent.closeFromParent()\n    } else if (this.backPressed && this.injectedComponent.onBackPressed) {\n      if (this.routeEndProcessed) return\n      this.routeEndProcessed  = true\n      this.injectedComponent.onBackPressed()\n    }\n  }\n\n  @ViewChild('componentContainer', { static: true }) componentContainer: ElementRef\n  @ViewChild('injectAt', { read: ViewContainerRef, static: true }) injectAt;\n\n  injectedComponent : ModalInterface\n  private backPressed : boolean\n  private routeEndProcessed : boolean = false\n  \n  @Input() width:string = \"75vw\"\n  @Input() className : string \n\n  constructor(@Inject('RunContext') rc: RunContextBrowser, \n              router: UiRouter,\n              route: ActivatedRoute,\n              componentFactoryResolver: ComponentFactoryResolver,\n              private renderer: Renderer2,\n              private ref: ChangeDetectorRef) {\n\n    super(rc, router, componentFactoryResolver, route)\n    \n    rc.setupLogger(this, 'ModalPopup', LOG_LEVEL.DEBUG)\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'constructor')\n  }\n\n  onRouterInit(params: Mubble.uObject<any>) {\n    \n    super.onRouterInit(params, this.injectAt, true)\n    this.width      = this.injectedComponent.getWidth()\n\n    if (this.injectedComponent.getCssClassName) {\n      this.className  = this.injectedComponent.getCssClassName()\n    }\n  }\n\n  ngAfterViewInit() {\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'ngAfterViewInit')\n  }\n\n  onClick(event: any) {\n    event.preventDefault()\n    event.stopPropagation()\n  }\n\n  ignoreScroll(event : any) {\n    const notScrollable = this.injectedComponent.isNotScrollable \n                            && this.injectedComponent.isNotScrollable()\n    if (notScrollable) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  ngOnDestroy() {\n    super.ngOnDestroy()\n    this.rc.isStatus() && this.rc.status(this.rc.getName(this), 'ngOnDestroy')\n  }\n\n  animateClose() {\n\n    if (this.injectedComponent.isNotDismissable && \n        this.injectedComponent.isNotDismissable()) {\n      this.rc.isDebug() && this.rc.debug(this.rc.getName(this), \n      'Wont dismiss popup')\n    } else {\n      this.rc.isDebug() && this.rc.debug(this.rc.getName(this), \n      'Dismissing modal popup in due to host click')\n      this.router.goBack()\n    }\n  }\n\n  onBackPressed() {\n    this.backPressed = true\n  }\n\n  canGoBack() {\n    const childComponent  = this.injectedComponent\n    return childComponent.canGoBack ? childComponent.canGoBack() : true\n  }\n\n}\n","/*------------------------------------------------------------------------------\n   About      : <Write about the file here>\n   \n   Created on : Wed Aug 30 2017\n   Author     : Sid\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { Component, OnInit, \n         OnDestroy, Input, \n         AfterViewInit, Inject }            from '@angular/core'\n\n@Component({\n  selector    : 'loading-overlay',\n  templateUrl : './loading-overlay.component.html',\n  styleUrls : ['./loading-overlay.component.scss']\n})\nexport class LoadingOverlayComponent {\n  \n  @Input() loadingText  : string\n\n  constructor() {\n  }\n}","/*------------------------------------------------------------------------------\n   About      : Contains English translations. Before writing any translation, \n                make sure you append mu to the key.\n                Do not hard code any strings in component that are shown to the user.\n   \n   Created on : Fri Jun 28 2019\n   Author     : Sid\n   \n   Copyright (c) 2019 Obopay. All rights reserved.\n------------------------------------------------------------------------------*/\n\nexport const LANG_EN_TRANS = {\n\n  //Input Container Component\n  'mu_inpt_cont_futr_date_err'    : 'Future dates are invalid',\n  'mu_inpt_cont_min_amnt_err'     : 'Minimum amount should be greater than 0',\n  'mu_inpt_cont_strt_date_err'    : 'Provide a start date',\n  'mu_inpt_cont_end_date_err'     : 'Provide an end date',\n  'mu_inpt_cont_date_err'         : 'Start date should not exceed end date',\n  'mu_inpt_cont_amnt_err'         : 'Minimum amount should not exceed maximum amount',\n  'mu_inpt_cont_val_err'          : 'Please enter valid value',\n  'mu_fil_upl_retake_photo'       : 'Retake Photo',\n  'mu_fil_upl_take_photo'         : 'Take Photo',\n  'mu_fil_upl_change_text'        : 'Change photo',\n  'mu_fil_upl_upload_photo'       : 'Upload Photo',\n  'mu_fil_upl_upload_err'         : 'Please upload valid photo',\n  'mu_fil_upl_unknow_err'         : 'Could not capture photo',\n  'mu_inpt_cont_sel_err'          : 'Please select valid value',\n\n\n  //Filter Component\n  'mu_fltr_sub_titl'              : 'Filter By :',\n  'mu_fltr_aply_fltr'             : 'Apply Filters',\n  'mu_fltr_clr_fltr'              : 'Clear Filters',\n  'mu_fltr_rqrd'                  : '*',\n  'mu_fltr_clr_all'               : 'Clear all',\n\n  //Data table\n  'mu_dt_tbl_edit'                : 'Edit',\n  'mu_dt_tbl_save'                : 'Save',\n  'mu_dt_tbl_empty_state'         : 'No data to display',\n\n  //Page Not Found\n  'page_not_fond_vist_home'       : 'Visit Home'\n\n}","/*------------------------------------------------------------------------------\n   About      : Dictionary for library components\n   \n   Created on : Fri Jun 28 2019\n   Author     : Sid\n   \n   Copyright (c) 2019 Obopay. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { Mubble }        from '@mubble/core'\nimport { LANG_EN_TRANS } from './mu-lang-en'\n\nexport const muDictionary = {\n  [Mubble.Lang.English] : LANG_EN_TRANS\n}","/*------------------------------------------------------------------------------\n   About      : Provider for translations\n   \n   Created on : Tue Jul 04 2017\n   Author     : Sid\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { InjectionToken }   from '@angular/core'\nimport { muDictionary }     from './mu-dictionary'\n\n\nexport const TRANSLATIONS = new InjectionToken('translations')\n\nexport const TRANSLATION_PROVIDERS = [\n  { provide: TRANSLATIONS, useValue: muDictionary, multi : true },\n]\n\n\nexport function getTranslations(dictionary) {\n  return mergeDictionaries(muDictionary, dictionary)\n}\n\nexport function mergeDictionaries(muDictionary, dictionary) {\n  Object.keys(muDictionary).forEach((key) => {\n    const value = muDictionary[key]\n    if (dictionary[key]) muDictionary[key] = Object.assign(value, dictionary[key])\n  })\n  \n  return muDictionary\n}","/*------------------------------------------------------------------------------\n   About      : Single instance translation service injected on app level\n   \n   Created on : Tue Jul 04 2017\n   Author     : Sid\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { RunContextBrowser }                    from '../../../rc-browser'\nimport { Injectable, \n         Inject \n       }                                        from '@angular/core'\nimport { TRANSLATIONS }                         from './translations'\nimport { Mubble }                               from '@mubble/core'\n\nconst PLACEHOLDER = '%'\n\n@Injectable({\n  providedIn : 'root'\n})\n\nexport class TranslateService {\n\n  constructor(@Inject('RunContext') private rc: RunContextBrowser, \n              @Inject(TRANSLATIONS) private _translations: any) {\n \n    if (Array.isArray(this._translations)) {\n      const obj = {}\n      for (const translate of this._translations) {\n        const keys = Object.keys(translate)\n        for (const key of keys) {\n          if (!obj[key]) {\n            obj[key] = translate[key]\n          } else {\n            Object.assign(obj[key], translate[key])\n          }\n        }\n      }\n      this._translations  = obj\n    } else {\n      throw new Error(`Translations Error. Expected type array. Actual ${typeof this._translations} ${JSON.stringify(this._translations)}`)\n    }\n  }\n  \n  private defaultLang : string = Mubble.Lang.English\n  private currentLang : string\n  private fallback    : boolean = true\n  \n  public getCurrentLanguage() {\n    return this.currentLang || this.defaultLang\n  }\n\n  public setDefaultLanguage(lang: string) {\n    this.defaultLang = lang;\n  }\n\n  public enableFallback(enable: boolean) {\n    this.fallback = enable;\n  }\n  \n  public use(lang: string): void {\n    this.currentLang = lang\n  }\n\n  private translate(key: string): string {\n\n    let translation = key\n\n    // found in current language\n    if (this._translations[this.currentLang] && this._translations[this.currentLang][key]) {\n      return this._translations[this.currentLang][key]\n    }\n\n    // fallback disabled\n    if (!this.fallback) { \n        return translation;\n    }\n\n    // found in default language\n    if (this._translations[this.defaultLang] && this._translations[this.defaultLang][key]) {\n        return this._translations[this.defaultLang][key];\n    }\n\n    return translation\n  }\n\n  public addTranslations(langObj : object, lang : string) {\n    Object.assign(this._translations[lang], langObj)\n  }\n\n  public instant(key: string, words?: string | string[]) { // add optional parameter\n\n    const translation: string = this.translate(key)\n    if (!words) return translation\n    return this.replace(translation, words)\n  }\n\n  public replace(word: string = '', words: string | string[] = '') {\n\n    let translation: string = word\n    const values: string[] = [].concat(words)\n    values.forEach((e, i) => {\n        translation = translation.replace(PLACEHOLDER.concat(<any>i), e)\n    })\n    return translation\n  }\n\n  public addMoreTranslations(langObj : object, lang : string) {\n    this._translations[lang] = {...langObj, ...this._translations[lang]}\n  }\n}","/*------------------------------------------------------------------------------\n   About      : Generic component for filtering which can either be date,\n                date-range, dropdown list, number, number-range or text \n                search\n   \n   Created on : Tue Jun 11 2019\n   Author     : Divya Sinha\n   \n   Copyright (c) 2019 Obopay. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { InputContainerComponent }    from '..'\nimport { Component,\n         ViewChildren,\n         QueryList,\n         Input,\n         Output,\n         Inject,\n         EventEmitter\n       }                              from '@angular/core'\nimport { TrackableScreen }            from '../../../ui/router/trackable-screen'\nimport { RunContextBrowser }          from '../../../rc-browser'\nimport { DISPLAY_TYPE, \n         DISPLAY_MODE, \n         FilterItem,\n         MuSelectedFilter,\n         FILTER_MODE,\n         StepSelectedFilter\n       }                              from '@mubble/core'\nimport { OutputParams }               from '../cmn-inp-cont'\nimport { TranslateService } from '../translate/translate.service'\n\n\nenum CONTEXT {\n  INIT,\n  CLEAR,\n  UPDATE\n}\n\nexport interface SelectedFilter {\n  id           : string\n  mode         : FILTER_MODE\n  value        : any\n  displayType ?: DISPLAY_TYPE\n}\n\nexport interface DateRangeInterface { \n  startDate  : number\n  endDate   ?: number\n}\n\nexport interface NumberRangeInterface {\n  minAmount  : number\n  maxAmount ?: number\n}\n\n@Component({\n  selector    : 'filter',\n  templateUrl : './filter.component.html',\n  styleUrls   : ['./filter.component.scss']\n})\n\nexport class FilterComponent {\n\n  @ViewChildren('inputCont') inputContInstances : QueryList<InputContainerComponent>\n\n  @Input()  filterItems         : FilterItem[]      = []\n  @Input()  screen              : TrackableScreen\n  @Input()  webMode             : boolean           = false   //if we want to use filter component as full page\n  @Input()  displayCount        : number            = 1\n  @Input()  displayMode         : DISPLAY_MODE      = DISPLAY_MODE.HORIZONTAL\n  @Input()  applyBtnTitle       : string\n\n  @Output() selectedFilter      : EventEmitter<MuSelectedFilter[]> = new EventEmitter<MuSelectedFilter[]>()\n  @Output() stepSelectedFilter  : EventEmitter<StepSelectedFilter>  = new EventEmitter<StepSelectedFilter>()\n\n  filters      : MuSelectedFilter[]   = []\n  DISPLAY_MODE : typeof DISPLAY_MODE  = DISPLAY_MODE\n  filterChips  : string[]             = []\n  applyBtnText : string\n\n  constructor(@Inject('RunContext') protected rc  : RunContextBrowser,\n              private translate : TranslateService) { }\n\n  ngOnInit() {\n    this.applyBtnText = this.applyBtnTitle ? this.applyBtnTitle \n                                           : this.translate.instant('mu_fltr_aply_fltr')\n    this.initialize(CONTEXT.INIT)\n  }\n\n  /*=====================================================================\n                              UTILS\n  =====================================================================*/\n\n  public updateLastAppliedFilters(lastFilters : FilterItem[]) {\n    this.filterItems = lastFilters\n    this.initialize(CONTEXT.UPDATE)\n  }\n\n  /*=====================================================================\n                                  HTML\n  =====================================================================*/\n  applyFilters() {\n    \n    this.filterChips = []\n\n    const inputContInstances = this.inputContInstances.toArray()\n    \n    inputContInstances.forEach(inputContInstance => {\n      inputContInstance.onSubmit()\n    })\n\n    if (this.hasError()) return\n\n    if (!this.valueChanged()) {      \n      this.selectedFilter.emit([])  //empty array indicates that the previous filters and current filters are same\n      return\n    }\n    \n    this.selectedFilter.emit(this.filters)\n  }\n\n  clearFilters() {\n    const inputContInstances = this.inputContInstances.toArray()\n\n    inputContInstances.forEach(inputContInstance => {\n      inputContInstance.onSubmit()\n    })\n\n    this.initialize(CONTEXT.CLEAR)\n    this.filterChips = []\n    this.selectedFilter.emit(undefined)   //on clearing, we just return undefined\n  }\n\n  setFilterItems(event : OutputParams) {\n\n    this.setFilterChips(event)\n\n    const index = this.filters.findIndex(element => element.id === event.id)\n    this.filters[index].value = event.value\n  }\n\n  onFilterSelected(event: StepSelectedFilter) {\n    this.stepSelectedFilter.emit(event)\n  }\n\n  resetFilters(filterItems : FilterItem[]) {\n\n    for (const fItem of filterItems) {\n      const currentIdx = this.filterItems.findIndex(val => val.params.id === fItem.params.id)\n      if (currentIdx == -1) continue\n      this.filterItems.splice(currentIdx, 1, fItem)\n    }\n  }\n\n  /*=====================================================================\n                                  PRIVATE\n  =====================================================================*/\n\n  private hasError() {\n    const inputContInstances = this.inputContInstances.toArray()\n\n    return inputContInstances.some(inputContInstance => {\n      return inputContInstance.hasError()\n    })\n  }\n\n  private valueChanged() : boolean {\n\n    // const existingFilterItems = []\n\n    // for (const filterItem of this.filterItems) {\n\n    //   const muSelectedFilter : MuSelectedFilter  = {\n    //     id          : filterItem.params.id,\n    //     mode        : filterItem.mode,\n    //     value       : filterItem.params.value || null,\n    //     displayType : filterItem.params.displayType\n\n    //   }\n    //   existingFilterItems.push(muSelectedFilter)\n\n    // }\n\n    // console.log('isEqual',isEqual(existingFilterItems, this.filters))\n\n\n    for (const fItem of this.filterItems) {\n      const index = this.filters.findIndex(element => element.id === fItem.params.id)\n      let changed : boolean = false\n      \n      //checking if the previous filter value has changed or not according to the display type\n      switch(fItem.params.displayType) {\n\n        case DISPLAY_TYPE.CALENDAR_BOX              :\n        case DISPLAY_TYPE.INPUT_BOX                 :\n        case DISPLAY_TYPE.SELECTION_BOX             :\n        case DISPLAY_TYPE.ROW_INPUT_BOX             :\n        case DISPLAY_TYPE.MULTI_CHECK_BOX           :\n        case DISPLAY_TYPE.DROPDOWN_MULTI_CHECK_BOX  : \n        case DISPLAY_TYPE.RADIO                     :\n        case DISPLAY_TYPE.AUTOCOMPLETE_SELECT       :\n        case DISPLAY_TYPE.SLIDER                    : \n          (!fItem.params.value && !this.filters[index].value)\n          ? changed = false\n          : changed = fItem.params.value !== this.filters[index].value\n          break\n\n        case DISPLAY_TYPE.DATE_RANGE    :\n          const dateRangeKeys  = fItem.params.rangeKeys || ['startDate', 'endDate'];\n          ((!fItem.params.value[dateRangeKeys[0]] && !this.filters[index].value[dateRangeKeys[0]]) &&\n          (!fItem.params.value[dateRangeKeys[1]] && !this.filters[index].value[dateRangeKeys[1]]))\n          ? changed = false\n          : changed = (fItem.params.value[dateRangeKeys[0]] !== this.filters[index].value[dateRangeKeys[0]]) ||\n                      (fItem.params.value[dateRangeKeys[1]] !== this.filters[index].value[dateRangeKeys[1]])\n          break\n\n        case DISPLAY_TYPE.NUMBER_RANGE  :\n          const numRangeKeys  = fItem.params.rangeKeys || ['minAmount', 'maxAmount'];\n\n          ((!fItem.params.value[numRangeKeys[0]] && !this.filters[index].value[numRangeKeys[0]]) &&\n          (!fItem.params.value[numRangeKeys[1]] && !this.filters[index].value[numRangeKeys[1]]))\n          ? changed = false\n          : changed = (fItem.params.value[numRangeKeys[0]] !== this.filters[index].value[numRangeKeys[0]]) ||\n                      (fItem.params.value[numRangeKeys[1]] !== this.filters[index].value[numRangeKeys[1]])\n          break\n      }\n    // isEqual(existingFilterItems, this.filters), changed)\n\n      if (changed)  return changed\n    }\n\n    return false\n  }\n\n  private initialize (context : CONTEXT) {\n\n    if (context === CONTEXT.INIT) {\n      for (const fItem of this.filterItems) {\n        this.filters.push({ id : fItem.params.id, value : fItem.params.value, mode : fItem.mode, displayType : fItem.params.displayType })\n      }\n    } else if (context === CONTEXT.CLEAR) {\n      this.filters      = []\n      const fItems : FilterItem[] = []\n\n      for (const fItem of this.filterItems) {\n        const setNull = fItem.params.displayType === DISPLAY_TYPE.DATE_RANGE\n                        ? { startDate : null, endDate : null }\n                        : fItem.params.displayType === DISPLAY_TYPE.NUMBER_RANGE\n                        ? { minAmount : null, maxAmount : null }\n                        : null\n\n        fItem.params.value  = setNull\n\n        fItems.push({\n          params  : fItem.params,\n          mode    : fItem.mode\n        })\n\n        this.filters.push({ id : fItem.params.id, value : setNull, mode : fItem.mode, displayType : fItem.params.displayType })\n        \n      }\n\n      this.filterItems  = []\n      this.filterItems  = fItems\n    } else {\n      const fItems  : FilterItem[]        = [],\n            filters : MuSelectedFilter[]  = []\n\n      for (const fItem of this.filterItems) {\n\n        const currentValue  = this.filters.find(val => val.id === fItem.params.id && fItem.params.value)\n        fItem.params.value  = currentValue ? currentValue.value : null\n\n        fItems.push({\n          params  : fItem.params,\n          mode    : fItem.mode,\n        })\n\n        filters.push({ id : fItem.params.id, value : fItem.params.value, mode : fItem.mode, displayType : fItem.params.displayType })\n      }\n\n      this.filterItems  = []\n      this.filterItems  = fItems\n      this.filters      = filters\n      \n    }\n  }\n\n  private setFilterChips(event : OutputParams) {\n\n    switch(event.displayType) {\n\n      case DISPLAY_TYPE.CALENDAR_BOX  :\n        //Do we need it?\n        break\n\n      case DISPLAY_TYPE.INPUT_BOX     :\n      case DISPLAY_TYPE.ROW_INPUT_BOX :\n        if (event.value) this.filterChips.push(event.value)\n        break\n\n      case DISPLAY_TYPE.MULTI_CHECK_BOX           :\n      case DISPLAY_TYPE.DROPDOWN_MULTI_CHECK_BOX  : \n\n        if (event.value) {\n\n          const checkboxValues  = event.value\n\n          checkboxValues.forEach(val => {\n            this.filterChips.push(val.value)\n          })\n\n        }\n\n        break\n\n      case DISPLAY_TYPE.SELECTION_BOX       :\n      case DISPLAY_TYPE.RADIO               :\n      case DISPLAY_TYPE.AUTOCOMPLETE_SELECT :\n      case DISPLAY_TYPE.SLIDER              : \n        if (event.value) this.filterChips.push(event.value.value)\n        break\n\n      case DISPLAY_TYPE.DATE_RANGE  :\n        //Do we need it?\n        break\n\n      case DISPLAY_TYPE.NUMBER_RANGE  :\n        //Do we need it?\n        break\n\n\n    }\n\n  }\n\n}","import { NgModule }                     from '@angular/core'\nimport { RouterModule,\n         Routes\n       }                                from '@angular/router'\n\nimport { BottomInComponent }            from './bottom-in/bottom-in.component'\nimport { ModalPopupComponent }          from './modal-popup/modal-popup.component'\nimport { ComponentRoutes }              from '../router/shared-router-constants'\nimport { LoadingOverlayComponent }      from './loading/loading-overlay/loading-overlay.component'\nimport { FilterComponent }              from './filter/filter.component'\n\nconst routes: Routes = [\n  {\n    path      : ComponentRoutes.LoadingOverlay,\n    component : LoadingOverlayComponent\n  },\n  { \n    path      : ComponentRoutes.Modal,\n    component : ModalPopupComponent,\n    outlet    : 'modal'\n  },\n  {\n    path      : ComponentRoutes.BottomIn,\n    component : BottomInComponent,\n    outlet    : 'modal'\n  },\n  {\n    path      : ComponentRoutes.Filter,\n    component : FilterComponent\n  }\n]\n\n@NgModule({\n  imports: [\n    RouterModule.forChild(routes)\n  ],\n  exports: [\n    RouterModule\n  ]\n})\nexport class MuComponentsRoutingModule {}","/*------------------------------------------------------------------------------\n   About      : Globally accessible Pipe for translations\n   \n   Created on : Tue Jul 04 2017\n   Author     : Sid\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { Pipe, PipeTransform } from '@angular/core'\nimport { TranslateService}     from './translate.service'\n\n@Pipe({\n    name: 'translate',\n    pure: false\n})\n\nexport class TranslatePipe implements PipeTransform {\n\n  constructor(private _translate: TranslateService) { }\n\n  transform(value: string, args ?: string | string[]): any { // args can be string or string array\n    if (!value) return;\n    return this._translate.instant(value, args); // pass in args\n  }\n}","import { BREAKPOINT } from \"@angular/flex-layout\";\n\nconst CUSTOM_BREAKPOINTS = [\n  {\n    alias: \"sm\",\n    suffix: \"sm\",\n    mediaQuery: \"screen and (min-width: 780px) and (max-width: 959px)\",\n    overlapping: false\n  }\n]\n\nexport const CustomBreakPointsProvider = {\n  provide: BREAKPOINT,\n  useValue: CUSTOM_BREAKPOINTS,\n  multi: true\n}","/*------------------------------------------------------------------------------\n   About      : <Autofocuses the input element on page load every time>\n   \n   Created on : Thu Aug 10 2017\n   Author     : Aditya Baddur\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\n\nimport { Directive, ElementRef, \n         AfterViewInit, ChangeDetectorRef } from '@angular/core';\n\n@Directive({\n  selector: '[ncAutoFocus]'\n})\n\nexport class NcAutoFocusDirective implements AfterViewInit {\n\n  constructor(private element   : ElementRef,\n              private changeRef : ChangeDetectorRef) {\n  }\n\n  ngAfterViewInit() { \n    this.element.nativeElement.focus()\n    this.changeRef.detectChanges()\n  }\n}","/*------------------------------------------------------------------------------\n   About      : supports maxlength attribute for mobile devices\n   \n   Created on : Mon Mar 05 2018\n   Author     : Aditya Baddur\n   \n   Copyright (c) 2018 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\n\nimport { Directive,\n         ElementRef,  \n         Input, \n         Renderer2,\n         Output, \n         NgZone,\n         EventEmitter\n       }                        from '@angular/core'\n\n\nconst KEY_UP    = 'keyup',\n      PASTE     = 'paste',\n      CUT       = 'cut',\n      NUMERIC   = 'numeric',\n      BACKSPACE = 'Backspace'\n\nconst pattern = /[\\/\\- ]/\n\n@Directive({\n  selector: '[ncMaxLength]'\n})\n\nexport class NcMaxLengthDirective {\n  \n  @Input('ncMaxLength') protected maxLength : number = 0\n  @Input('format') format : string\n\n\n  @Output() updatedValue : EventEmitter<string> = new EventEmitter<string>()\n   \n  private eventHandlers : (()=>void)[] = []\n\n  constructor(protected element   : ElementRef,\n              protected renderer  : Renderer2,\n              protected ngZone    : NgZone) {\n  }\n\n  ngAfterViewInit() {\n    this.maxLength  = Number(this.maxLength) \n    if (typeof this.maxLength !== 'number') return\n    this.eventHandlers.push(this.renderer.listen(this.element.nativeElement, KEY_UP, this.eventHandler.bind(this)),\n    this.renderer.listen(this.element.nativeElement, PASTE, this.clipBoardEventHandler.bind(this)),\n    this.renderer.listen(this.element.nativeElement, CUT, this.clipBoardEventHandler.bind(this)))\n    \n  }\n\n  protected handleEvent(event : any) {\n    this.eventHandler(event)\n  }\n\n  private clipBoardEventHandler(event : any) {\n    \n    setTimeout(() => {\n      this.ngZone.runOutsideAngular(() => {\n        this.eventHandler(event)\n      })\n    }, 0)\n  } \n \n  private eventHandler(event : any) { \n   \n    this.ngZone.runOutsideAngular(() => {\n\n      const element   = event.srcElement\n\n      if (element.inputMode) {\n\n        const validInput : boolean =  element.inputMode === NUMERIC && element.value.trim().length \n                                      && !isNaN(element.value)\n\n        if (validInput === false) {\n          const currentValue  = element.value as string,\n                invalidIndex  = currentValue.indexOf(event.key)\n\n          element.value = (element.value as string).substring(0, invalidIndex)\n          event.srcElement.value  = element.value\n          return\n        }\n      }\n\n      \n      if (event.key === BACKSPACE) {\n        this.emitUpdatedValue(element.value)\n        return\n      }\n\n      if (element.value.length > this.maxLength) { \n        event.preventDefault()\n        element.value = element.value.substring(0, this.maxLength)\n      } \n\n      if (this.format) {\n\n        const formatStr = this.format\n        let val = element.value\n\n        for (let i = 0 ; i < element.value.length; i++) {\n      \n            if (pattern.test(formatStr[i + 1]) && val[i + 1] !== formatStr[i + 1]) {\n              val = val.substr(0,i + 1) + formatStr[i + 1] + val.substr(i + 1)\n            }    \n        }\n        element.value = val\n      }\n\n      const scrollHeight  = element.scrollHeight,\n            clientHeight  = element.clientHeight\n      if ( scrollHeight > clientHeight && element.scrollTop !== scrollHeight - clientHeight ) {\n        element.scrollTop = scrollHeight - clientHeight\n      }\n\n      this.emitUpdatedValue(element.value)\n      event.srcElement.value  = element.value\n      return\n    })\n  }\n\n  private emitUpdatedValue(value: string) {\n    this.ngZone.run(() => {\n      this.updatedValue.emit(value)\n    })\n    \n  }\n\n  ngOnDestroy() {\n    for (const eventHandler of this.eventHandlers) {\n      eventHandler()\n    }\n    this.eventHandlers = []\n  }\n\n}","import { Directive,\n         EventEmitter,\n         HostBinding,\n         HostListener,\n         Input,\n         Output }         from '@angular/core'\n\n@Directive({\n  selector: '[long-press]'\n})\nexport class LongPressDirective {\n\n  private timeoutId   : number = null\n  private intervalId  : number = null\n\n  private isLongPressing: boolean\n  private isPressing: boolean\n\n  @Output() onLongPress     = new EventEmitter()\n  @Output() onLongPressing  = new EventEmitter()\n  @Output() isTouching      = new EventEmitter()\n\n  @Input() timeout: number = 1000\n\n  @HostBinding('class.press')\n  get press() {\n    return this.isPressing\n  }\n\n  @HostBinding('class.long-press')\n  get longPress() {\n    return this.isLongPressing\n  }\n\n  @HostListener('touchstart', ['$event'])\n  public onMouseDown(event) {\n    this.isPressing     = true\n    this.isTouching.emit(true)\n    this.isLongPressing = false\n\n    this.timeoutId = (<any> window).setTimeout(() => {\n      this.isLongPressing = true\n      this.onLongPress.emit(event)\n\n      this.intervalId = (<any> window).setInterval(() => {\n        this.onLongPressing.emit(event)\n      }, 30)\n    }, this.timeout)\n  }\n\n  @HostListener('touchend', ['$event'])\n  public onMouseLeave() {\n    this.endPress()\n  }\n\n  private endPress() {\n    if (this.timeoutId !== null)\n      clearTimeout(this.timeoutId)\n\n    if (this.intervalId !== null)\n      clearInterval(this.intervalId)\n\n    this.isLongPressing = false\n    this.isPressing     = false\n    this.isTouching.emit(false)\n  }\n\n}","/*------------------------------------------------------------------------------\n   About      : dynamically adds class to the element\n   \n   Created on : Mon Jul 30 2018\n   Author     : Aditya Baddur\n   \n   Copyright (c) 2018 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { Directive,\n         ElementRef,  \n         Input, \n         Renderer2, \n       }                        from '@angular/core'\n\n@Directive({\n  selector: '[ncClass]'\n})\n\nexport class NcStyleClassDirective {\n\n  @Input('ncClass') ncClass : string \n\n  constructor(private element   : ElementRef,\n              private renderer  : Renderer2) {\n  }\n\n  ngAfterViewInit() {\n    this.renderer.addClass(this.element.nativeElement, this.ncClass)\n  }\n\n}","/*------------------------------------------------------------------------------\n   About      : Assign width and margin to elements in a single row\n   \n   Created on : Mon Nov 11 2019\n   Author     : Divya Sinha\n   \n   Copyright (c) 2019 Obopay. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { Directive,\n         ElementRef,\n         Input\n       }                        from '@angular/core'\n\nexport interface WebModeCss {\n  width         : string\n  marginRight  ?: string\n  maxWidth     ?: string\n}\n\n@Directive({\n  selector: '[adjustElements]'\n})\n\nexport class AdjustElementsDirective {\n  @Input('displayInSingleRow')  displayCount  : number  = 1     //number of elements to be displayed in a single row\n  @Input('elementIndex')        index         : number          //element index\n  @Input('webMode')             webMode       : boolean = false //if implemented in web mode, only then will this adjust otherwise it will take 100% width\n\n  constructor (private element  : ElementRef) { }\n\n  ngAfterViewInit() {\n    const webModeCss  : WebModeCss  = this.calcWidth()\n\n    if ((this.index + 1) % this.displayCount !== 0) {\n      this.element.nativeElement.style.width        = webModeCss.width\n      this.element.nativeElement.style.marginRight  = webModeCss.marginRight\n      this.element.nativeElement.style.maxWidth     = webModeCss.maxWidth\n    } else {\n      this.element.nativeElement.style.width        = webModeCss.width\n      this.element.nativeElement.style.maxWidth     = webModeCss.maxWidth\n    }\n  }\n\n  private calcWidth() : WebModeCss {\n    const webModeCss : WebModeCss = { } as WebModeCss\n\n    if (!this.webMode) {\n      webModeCss.width = '100%'\n      return webModeCss\n    }\n\n    switch(this.displayCount) {\n      /* If the situation says that the parent wants to display 1 or 2 elements per row, we \n      are assigning it manually. Otherwise we are iterating the 100% width in the for loop. */\n\n      case 1  : webModeCss.width    = '60%'\n                webModeCss.maxWidth = '400px'\n                break\n\n      case 2  : webModeCss.width        = '45%'\n                webModeCss.marginRight  = '10%'\n                webModeCss.maxWidth     = '400px'\n                break\n\n      case 3  : webModeCss.width        = '30%'\n                webModeCss.marginRight  = '3%'\n\n      default : let width       : string,\n                    marginRight : string,\n                    index       : number\n\n                /* Considering the full width to be 100%, we are looping from 99 to get the maximum\n                width and minimum margin. The total width of the element container should be a\n                multiple of display count where as the total margin width should be a multiple of\n                (display count - 1).\n\n                This is because we are not providing the margin to the last container but giving a\n                margin right to other divs. If the total width of element container is x% then\n                total margin width becomes (100 - x)%. For eg. say our display count is 4.\n\n                For display count 4, there are 4 elements and 3 empty spaces in one row. Largest \n                number closest to 100 is assigned to total width where are largest number closest\n                to 0 is assigned to total margin. This helps us show the content in the maximum\n                space and give minimum possible space between them.\n\n                Here we are not starting the loop from 100 because if the display count is a factor\n                of 100 then it won't provide any margin hence making it difficult to distinguish\n                between two adjacent divs.\n\n                For display count = 4, we calculate from the loop that maximum width of each element\n                is 19% and margin between any two consecutive elements will be 8%. Hence, (4 * 19) +\n                (3 * 8) = 76 + 24 = 100% width is covered.\n                \n                While checking for margin, we are keeping one more check that margin to be given on \n                right should be more than the total elements to be displayed in single row.*/\n\n                for (index = 99 ; index > 1 ; index--) {\n                  if ((index % this.displayCount === 0) &&\n                    (((100 - index) % (this.displayCount - 1) === 0) &&\n                    ((100 - index) / (this.displayCount - 1) > this.displayCount))) {\n\n                    width       = (index / this.displayCount).toString().concat('%')\n                    marginRight = ((100 - index) / (this.displayCount - 1)).toString().concat('%')\n                    break\n                  }\n                }\n\n                webModeCss.width        = width\n                webModeCss.marginRight  = marginRight\n                break\n    }\n\n    return webModeCss\n  }\n}","/*------------------------------------------------------------------------------\n   About      : Directive to provide colorful box with name initial inside of it\n   \n   Created on : Tue Dec 03 2019\n   Author     : Pulkit Chaturvedi\n   \n   Copyright (c) 2019 Obopay. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { Directive,\n         Input,\n         ElementRef \n       }                        from '@angular/core'\n       \n@Directive({\n  selector: '[ncFallbackChar]'\n})\n\nexport class NcFallbackCharDirective {\n\n  private dynamicColorObj : any = {} \n  private initialChar     : string\n\n  @Input('ncFallbackChar') data     :  string\n  @Input('needOneChar') needOneChar : boolean \n\n  constructor(private element : ElementRef) { \n\n  }\n\n  ngAfterViewInit() {\n    this.createDynamicColor()\n    this.initialChar = this.getFirstCharacter(this.data)\n    this.setColor(this.initialChar)\n  }\n\n  createDynamicColor() {\n    const l = '60%'\n  \n    let cac = 64,\n        spH = 0,\n        spL = 0\n\n    for(let i=1; i<=26; i++) {\n      const h = spH + 10\n      spH += 10\n\n      for(let j=0; j<=26; j++) {\n        const s = j ? spL + 3 : 60\n        spL += 3\n        const col = `hsl(${h}, ${s}%, ${l})`\n        if(j) {\n          this.dynamicColorObj[`${String.fromCharCode(cac + i)}${String.fromCharCode(cac + j)}`] = col\n        } else {\n          this.dynamicColorObj[String.fromCharCode(cac + i)] = col\n        }\n        \n      }\n\n      spL = 0\n    }\n  }\n\n  getFirstCharacter(str : string) : string {\n    const strArr : string[] = str.split(' ')\n\n    const regExp = new RegExp('[a-zA-Z][a-zA-Z ]*')\n\n    const charStr = strArr.filter((str) => {\n      return regExp.test(str)\n    })\n\n    let initials : string\n\n    if (this.needOneChar) {\n      return initials = charStr[0].charAt(0).toUpperCase()\n    }\n    \n    if (charStr.length > 1) {\n      initials = (charStr[0].charAt(0) + strArr[1].charAt(0)).toUpperCase()\n    } else {\n      initials = charStr[0].charAt(0).toUpperCase()\n    }\n\n    return initials\n  }\n\n  setColor(key : string) {\n    this.dynamicColorObj[key] as string\n    this.element.nativeElement.innerHTML        = this.initialChar\n    this.element.nativeElement.style.background = this.dynamicColorObj[key] as string\n  }\n}\n","/*------------------------------------------------------------------------------\n   About      : <Autofocuses the input element on page load every time>\n   \n   Created on : Thu Aug 10 2017\n   Author     : Aditya Baddur\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\n\nimport { Directive, \n         ElementRef,\n         Input, \n         Inject,\n         Renderer2\n       }                      from '@angular/core'\nimport debounce               from 'lodash/debounce'\n\n@Directive({\n  selector: '[keyboard]'\n})\n\nexport class KeyboardDirective {\n\n  @Input('keyboard') parentDiv  : HTMLElement\n\n  private originalParentHeight  : number\n  private originalBodyHeight    : number\n\n  private isHeghtAuto   : boolean\n  \n  constructor(@Inject('RunContext') protected rc  : any,\n              private element                     : ElementRef,\n              private renderer                    : Renderer2) {\n  }\n\n  ngAfterViewInit() {\n    \n    if (!this.parentDiv) return\n\n    if (this.isHeghtAuto === undefined) {\n      this.isHeghtAuto  = !this.parentDiv.style.height.length\n    } \n\n    this.renderer.addClass(this.element.nativeElement, 'mui-event-adjust-pan-screen')\n    this.renderer.listen(this.element.nativeElement, 'mui-event-adjust-pan-screen', this.onCustomEvent.bind(this))\n    this.renderer.listen(this.element.nativeElement, 'focus', this.onCustomEvent.bind(this))\n    this.renderer.listen(this.element.nativeElement, 'blur', this.onBlur.bind(this))\n\n    if (this.rc.bridge.isRunningInMWeb()) {\n      this.handleKeyBoardEvents()\n      window.addEventListener('resize', debounce(this.handleKeyBoardEvents.bind(this), 300))\n    }\n  }\n\n  private handleKeyBoardEvents() {\n\n    const bodyHeight  = document.body.getBoundingClientRect().height\n\n    if (!this.originalBodyHeight) this.originalBodyHeight = bodyHeight\n\n    const keyboardHeight          = this.originalBodyHeight - bodyHeight\n    this.rc.bridge.currKeyboardHt = - keyboardHeight\n\n    this.onCustomEvent()\n\n  }\n\n  private onBlur() {\n\n    if (this.rc.bridge.isRunningInBrowser() && !this.rc.bridge.isRunningInMWeb()) return\n\n    if (this.isHeghtAuto) {\n      this.renderer.removeStyle(this.parentDiv, 'height')\n    } else {\n      this.parentDiv.style.height = this.originalParentHeight + 'px'\n    }\n\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), `onBlur original Height ${this.originalParentHeight}`)\n\n    if (this.rc.bridge.isRunningInMWeb()) {\n      window.scrollTo(0,0)\n    }\n  }\n\n  private onCustomEvent() {\n\n    if (this.rc.bridge.isRunningInBrowser() && !this.rc.bridge.isRunningInMWeb()) return\n\n    const keyboardHeight  = this.rc.bridge.currKeyboardHt,\n          parentDiv       = this.parentDiv,\n          parentDivRect   = parentDiv.getBoundingClientRect()\n     \n\n          \n    if (document.activeElement !== this.element.nativeElement) return\n\n    if (keyboardHeight < 0) {\n      \n      this.originalParentHeight = this.parentDiv.getBoundingClientRect().height\n      parentDiv.style.height = (parentDivRect.height - keyboardHeight) + 'px'\n\n      const scrollOptions = {\n        behaviour : 'smooth',\n        block     : 'center',\n        inline    : 'start'\n      }\n\n      this.element.nativeElement.scrollIntoView(scrollOptions)\n\n      if (this.rc.bridge.isRunningInMWeb()) {\n        window.scrollTo(0,0)\n      }\n  \n    } else {\n      this.onBlur()\n    }\n  }\n\n  ngOnDestroy() {\n    this.renderer.removeClass(this.element.nativeElement, 'mui-event-adjust-pan-screen')\n  }\n}","/*------------------------------------------------------------------------------\n   About      : <Autofocuses the input element on page load every time>\n   \n   Created on : Thu Aug 10 2017\n   Author     : Aditya Baddur\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\n\nimport { Directive,\n         Input, \n         Inject,\n         HostListener,\n         Output,\n         EventEmitter\n       }                      from '@angular/core'\nimport { RunContextBrowser }  from '../../../rc-browser'\n\n@Directive({\n  selector: '[nextInpFocus]'\n})\n\nexport class NextInpFocusDirective {\n\n  @HostListener('keydown.enter', ['$event.target']) onHostSubmit(event : any ) {\n    this.onEnter(event)\n  }\n\n  @Input('nextInpFocus') nextInpFocusElem : HTMLElement\n  @Output() onSubmit : EventEmitter<any> = new EventEmitter<any>()\n\n  constructor(@Inject('RunContext') protected rc  : RunContextBrowser) {\n  }\n\n  private onEnter(event : any) {\n    if (this.nextInpFocusElem) {\n      this.nextInpFocusElem.focus()\n    } else {\n      this.onSubmit.emit(event)\n    }\n  }\n}","/*------------------------------------------------------------------------------\n   About      : This directive prevents accidental double clicking on elements.\n                It disables the click events on an element for ALLOW_CLICK_DELAY \n                milliseconds by default or you can pass it a number value in\n                milliseconds.\n   \n   Created on : Thu Nov 06 2017\n   Author     : Pranjal Dubey\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { Directive,\n         HostListener,\n         EventEmitter,\n         Input, \n         Output, \n         HostBinding,\n         Inject,\n         ElementRef,\n         Renderer2\n       }                      from '@angular/core'\nimport { RunContextBrowser }  from '../../../rc-browser'\n\nconst ALLOW_CLICK_DELAY  = 1000\nconst BUTTON  = 'BUTTON'\n\n@Directive({\n  selector: '[ncAllowSingleClick]'\n})\nexport class NcAllowSingleClickDirective {\n  \n  @Input('ncPreventDoubleClick') allowClickDelay: number\n  \n  @Output() ncClick : EventEmitter<any> = new EventEmitter<any>()\n\n  private clickEnabled: boolean = true\n  private originialColor  : string  = ''\n\n  constructor(@Inject('RunContext') protected rc  : RunContextBrowser,\n              private element                     : ElementRef,\n              private renderer                    : Renderer2) {\n  \n  }\n\n  onMouseOver() {\n    if (this.element.nativeElement.tagName  === BUTTON || !this.rc.bridge.isRunningInBrowser()) return\n\n    if (!this.originialColor) {\n      this.originialColor = window.getComputedStyle(this.element.nativeElement, null).getPropertyValue('background-color')\n    }\n\n    this.element.nativeElement.style.background = '#f2f5f7'\n  }\n\n  @HostListener ('click', ['$event']) onClick($event) {\n\n    this.applyOriginalBg()\n\n    if (!this.clickEnabled) return\n    \n    this.clickEnabled    = false\n    this.allowClickDelay = this.allowClickDelay || ALLOW_CLICK_DELAY\n\n    setTimeout(this.allowClick.bind(this), this.allowClickDelay)\n\n    this.ncClick.emit($event)\n  }\n\n  ngAfterViewInit() {\n    this.element.nativeElement.style.cursor = 'pointer'\n    this.renderer.listen(this.element.nativeElement, 'mouseover', this.onMouseOver.bind(this))\n    this.renderer.listen(this.element.nativeElement, 'mouseout',  this.applyOriginalBg.bind(this))\n    this.renderer.listen(this.element.nativeElement, 'click',     this.applyOriginalBg.bind(this))\n  }\n\n  allowClick() {\n    this.clickEnabled = true\n  }\n\n  /*=====================================================================\n                              PRIVATE\n  =====================================================================*/\n  private applyOriginalBg() {\n    if (this.element.nativeElement.tagName  === BUTTON || !this.rc.bridge.isRunningInBrowser()) return\n    this.element.nativeElement.style.background = this.originialColor || 'initial'\n  }\n}\n","import { Directive,\n         Input,\n         HostListener,\n         ElementRef }       from '@angular/core'\n\nexport enum IMAGE_TYPE {\n  WALLET  = 'WALLET',\n  APP     = 'APP',\n  BANK    = 'BANK',\n  PROFILE = 'PROFILE'\n}\n\nconst APP_ICON     = 'images/app-logo-hoz.jpg',\n      WALLET_ICON  = 'svg-icons/ic-primary-wallet.svg',\n      BANK_ICON    = 'svg-icons/ic-bank-activity-fill.svg',\n      PROFILE_ICON = 'svg-icons/ic-user-gray.svg'\n\n@Directive({\n  selector: '[ncImgFallback]'\n})\n\nexport class NcImgFallbackDirective {\n\n  @Input() data: [IMAGE_TYPE, any] | IMAGE_TYPE\n\n  constructor(private element: ElementRef) { }\n\n  @HostListener ('error') onError() {\n\n    if (!Array.isArray(this.data)) {\n      this.setFallbackImage(this.data)\n      return\n    }\n    \n    if (this.data[1] && this.data[1].r && this.data[1].g && this.data[1].b) {\n      this.element.nativeElement.style.background = this.getColor(this.data[1])\n      return\n    }\n\n    this.setFallbackImage(this.data[0])\n  }\n\n  private setFallbackImage(type: IMAGE_TYPE) {\n\n    switch(type) {\n      \n      case IMAGE_TYPE.WALLET:\n        this.element.nativeElement.src  = WALLET_ICON\n        break\n\n      case IMAGE_TYPE.APP:\n        this.element.nativeElement.src  = APP_ICON\n        break\n\n      case IMAGE_TYPE.BANK  :\n        this.element.nativeElement.src  = BANK_ICON\n        break\n\n      case IMAGE_TYPE.PROFILE:\n        this.element.nativeElement.src  = PROFILE_ICON\n        break\n        \n      default:\n        this.element.nativeElement.src = APP_ICON\n    }\n  }\n\n  private getColor(color: any): string {\n    return `rgb(${color.r}, ${color.g}, ${color.b})`\n  }\n}\n\n\n","import {\n         Directive,\n         Output,\n         HostListener,\n         ElementRef,\n         EventEmitter,\n         Input,\n         Renderer2\n       }                          from '@angular/core'\nimport { Mubble }                 from '@mubble/core'\n\n@Directive({\n  selector: '[validateImg]'\n})\n\nexport class ValidateImgDirective {\n\n  @Input() public payload   : Mubble.uObject<string> // { base64: string, ...args }\n  @Output() public imgLoaded : EventEmitter<Mubble.uObject<string>> = new EventEmitter<Mubble.uObject<string>>()\n  @Output() public imgError  : EventEmitter<Mubble.uObject<string>> = new EventEmitter<Mubble.uObject<string>>()\n\n  constructor(private element   : ElementRef,\n              private renderer  : Renderer2) {}\n\n  ngAfterViewInit() {\n\n    this.renderer.addClass(this.element.nativeElement, 'img-validator')\n    this.element.nativeElement.src = this.payload.base64\n  }\n\n  @HostListener('error') onError() {\n    this.imgError.emit(this.payload)\n  }\n\n  @HostListener('load') onLoad() {\n    this.imgLoaded.emit(this.payload)\n  }\n\n}\n","import { Pipe, \n         PipeTransform,\n         Inject, \n         Injector\n       }                      from '@angular/core'\nimport { RunContextBrowser }  from '../../../rc-browser'\n\n\n@Pipe({ name: 'genericPipe' })\n\nexport class GenericPipe implements PipeTransform {\n\n  constructor (@Inject('RunContext') private rc : RunContextBrowser,\n               private injector                 : Injector) { \n\n  }\n\n  transform(value : any, pipeName : string, pipeParams : any[]) {\n    \n    if (!pipeName) return value\n\n    const pipe = this.injector.get<PipeTransform>(<any>pipeName) \n\n    if (pipe.transform && typeof  pipe.transform === 'function') {\n\n      if (pipeParams) return pipe.transform(value, ...pipeParams)\n\n      return pipe.transform(value)\n    }\n    \n    return value  \n  }\n\n\n}\n","import { Pipe, \n         PipeTransform,\n         Inject \n       }                             from '@angular/core'\nimport { RunContextBrowser }        from '../../../rc-browser'\n\n\n@Pipe({\n  name: 'extractMobileNo'\n})\n\nexport class ExtractMobileNoPipe implements PipeTransform {\n\n  constructor (@Inject('RunContext') private rc : RunContextBrowser) {\n\n  }\n\n  transform(value: string) : string {\n    return this.rc.utils.get10digitMobNumber(value);\n  }\n\n}\n","import { Pipe, \n         PipeTransform,\n         Inject \n       }                      from '@angular/core'\nimport { RunContextBrowser }  from '../../../rc-browser'\n\nconst INR       = 'INR',\n      CURRENCY  = 'currency' \n\n@Pipe({\n  name: 'inrcurrency'\n})\n\nexport class CurrencyPipe implements PipeTransform {\n\n  constructor (@Inject('RunContext') private rc : RunContextBrowser) { }\n\n  transform(value: number, decimalReq : boolean = true) : string {\n\n    if (value === undefined) return\n\n    const options = {\n      currency              : INR,\n      style                 : CURRENCY,\n      maximumFractionDigits : 2\n    } as Intl.NumberFormatOptions\n\n    const formattedNumber = value.toLocaleString('en-IN', options)\n\n    return decimalReq ? formattedNumber : formattedNumber.split('.')[0]\n  }\n\n}\n","import { Component, \n         Inject, \n         Input,\n         Output,\n         EventEmitter,\n         HostListener,\n         ChangeDetectorRef\n       }                            from '@angular/core'\nimport { RunContextBrowser }        from '../../../rc-browser'\nimport { SelectionBoxParams }       from '@mubble/core'\nimport { MatCheckboxChange }        from '@angular/material/checkbox'\n\n@Component({\n  selector    : 'drop-down-multi-select',\n  templateUrl : './drop-down-multi-select.component.html',\n  styleUrls   : ['./drop-down-multi-select.component.scss']\n})\n\nexport class DropDownMultiSelectComponent {\n\n  showDropDown    : boolean\n  isDropDownOpen  : boolean   = false\n  isSelectAll     : boolean   = false\n  showPlaceHolder : boolean   = true\n  listOptions     : SelectionBoxParams[] = []\n\n  @Input() options        : SelectionBoxParams[]\n  @Input() showSelectAll  : boolean\n  @Input() placeholder    : string\n  @Output() selectedItems : EventEmitter<SelectionBoxParams>  = new EventEmitter<SelectionBoxParams>()\n  @Output() selectedAll   : EventEmitter<MatCheckboxChange>   = new EventEmitter<MatCheckboxChange>()\n\n  constructor(@Inject('RunContext') protected rc  : RunContextBrowser,\n    private changeRef                             : ChangeDetectorRef) { }\n\n  ngOnInit() {\n    this.rc.isAssert() && this.rc.assert(this.rc.getName(this), this.options, `missing options ${this.options}`)\n    this.listOptions = JSON.parse(JSON.stringify(this.options))\n  }\n\n  /*=====================================================================\n                              UTILS\n  =====================================================================*/\n\n    @HostListener('document:click', ['$event']) \n    onHostClick(element : any) {      \n      const calExpStr = ['drop-down-list', 'checkbox-cont']\n      let isMatched : boolean = false\n\n      if (this.showDropDown) {\n        for (let exp of calExpStr) {\n          const calExp = new RegExp(exp)\n          isMatched = calExp.test(element.target.offsetParent.className)\n          if (isMatched) return\n        }\n        if (!this.isDropDownOpen) {\n          this.showDropDown   = false\n        } else {\n          this.isDropDownOpen = false\n        }\n      } \n    }\n\n  /*=====================================================================\n                              PRIVATE\n  =====================================================================*/\n\n  private handlePlaceHolder() {\n\n    const index : number = this.listOptions.findIndex((option) => {\n      return option.selected\n    })\n\n    if (index !== -1) this.showPlaceHolder = false\n    else this.showPlaceHolder = true\n  }\n\n  /*=====================================================================\n                              HTML\n  =====================================================================*/\n\n  handleDropDown() {\n    this.showDropDown   = !this.showDropDown\n    this.isDropDownOpen = !this.isDropDownOpen\n  }\n\n  onCheckBoxClick(event : MatCheckboxChange, option : SelectionBoxParams) {\n    if (event.checked) {\n      option.selected       = true\n      this.showPlaceHolder  = false\n    } else {\n      option.selected = false\n      this.handlePlaceHolder()\n    }\n\n    this.changeRef.detectChanges()\n\n    this.selectedItems.emit(option)\n  }\n\n  onSelectAll(event : MatCheckboxChange) {\n\n    if (event.checked) {\n      this.showPlaceHolder = false\n      this.listOptions.forEach((option) => {\n        option.selected = true\n      })\n      this.isSelectAll = true\n    } else {\n      this.listOptions.forEach((option) => {\n        option.selected = false\n      })\n      this.isSelectAll = false\n      this.handlePlaceHolder()\n    }\n\n    this.selectedAll.emit(event)\n  }\n}","/*------------------------------------------------------------------------------\n   About      : <Write about the file here>\n   \n   Created on : Wed Aug 30 2017\n   Author     : Sid\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { Component,\n         OnInit, \n         Input, \n         Inject \n       }                                    from '@angular/core'\nimport { RunContextBrowser }                from '../../../rc-browser'\n\n@Component({\n  selector    : 'loading',\n  templateUrl : './loading.component.html',\n  styleUrls   : ['./loading.component.scss']\n})\n\nexport class LoadingComponent implements OnInit {\n\n  @Input() apiLoadingText       : string\n  @Input() apiLoadingBottomIn   : boolean\n  @Input() customClass          : string\n  @Input() graphicUrl           : string \n  \n  constructor(@Inject('RunContext') private rc  : RunContextBrowser) { }\n\n  ngOnInit() {\n    if (this.apiLoadingBottomIn === undefined) this.apiLoadingBottomIn = false\n  }\n}\n","/*------------------------------------------------------------------------------\n   About      : <Write about the file here>\n   \n   Created on : Wed Aug 30 2017\n   Author     : Sid\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { Component, \n         Input, \n         Output, \n         Inject, \n         EventEmitter \n       }                            from '@angular/core'\nimport { RunContextBrowser }        from '../../../../rc-browser'\n\n@Component({\n  selector    : 'loading-error',\n  templateUrl : './loading-error.component.html',\n  styleUrls   : ['./loading-error.component.scss']\n})\nexport class LoadingErrorComponent {\n\n  @Input()  apiErrorText   : string\n  @Input()  apiCanRetry    : string\n  @Input()  apiRetryText   : string\n  @Output() apiErrorAction : EventEmitter<any> = new EventEmitter<any>()\n  \n  constructor(@Inject('RunContext') private rc  : RunContextBrowser) { }\n\n  onErrorAction() {\n    this.apiErrorAction.emit()\n  }\n}\n","import {  Component, Input, HostBinding }     from '@angular/core'\nimport { animate, state, \n         style, transition, \n         trigger }                            from '@angular/animations'\n\n@Component({\n  selector    : 'toast',\n  templateUrl : './toast.component.html',\n  styleUrls   : ['./toast.component.scss'],\n  animations  : [\n    trigger('visibilityChanged', [\n\n      transition(':enter', [\n        style({'opacity': 0}),\n        animate('500ms', \n          style({'opacity': 1}))\n      ]),\n\n      transition(':leave', [\n        style({'opacity': 1}),\n        animate('500ms', \n          style({'opacity': 0}))\n      ])\n      \n    ]),\n  ]\n})\nexport class ToastComponent {\n\n  @Input() toastMessage : string\n\n}","/*------------------------------------------------------------------------------\n\n   About      : Infinite scroll\n   \n   Created on : Mon Jul 23 2018\n   Author     : Aditya Baddur\n   \n   Copyright (c) 2018 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { Component, \n         Input,\n         Output,\n         EventEmitter,\n         ViewChild,\n         ElementRef,\n         NgZone,\n         Renderer2\n       }                from '@angular/core'\nimport { DomHelper }    from '../../../util/dom-helper'\nimport { Mubble }       from '@mubble/core'\n \nconst SCROLL_EVENT  = 'scroll'\n\ninterface ListItem {\n  type    : string\n  params  : Mubble.uObject<any>\n}\n\n@Component({\n  selector    : 'infinite-scroll',\n  templateUrl : './infinite-scroll.component.html',\n  styleUrls   : ['./infinite-scroll.component.scss']\n})\n\nexport class InfiniteScrollComponent {\n\n  @Input() items            : ListItem[]  = []         //Items that have to be loaded into html in chunks\n  @Input() upperBufferCount : number  = 50  //min no. of elements that should be loaded at the top before we start removing items\n  @Input() lowerBufferCount : number  = 10  //min no. of elements that should be loaded at the bottom\n  @Input() customClass      : string \n  \n  @Output() listEnd       : EventEmitter<number>  = new EventEmitter<number>() // list ended event to the parent \n  @Output() activeElement : EventEmitter<number>  = new EventEmitter<number>() // active element event to the parent\n \n  @ViewChild('scrollCont', { static: true })    scrollCont    : ElementRef // container inside which divs are manipulated \n  @ViewChild('contentHolder', { static: true }) contentHolder : ElementRef // container holding scrollable div\n\n  viewPortItems     : any[]   = []  // these are the items that are loaded in html\n\n  //the indices which slices the main items list\n  previousStartIdx  : number  = 0   \n  previousEndIdx    : number  = -1 \n\n  itemsHeight       : {[index: number]: number } = {} //caching each divs height to translate the scrollable div\n  \n  private translateY    : number  = 0\n  private scrollHandler : () => void\n\n  private lastScrolledTop     : number  = 0\n  private currActiveElemIndex : number  = 0\n  private lastActiveElemIndex : number  = -1\n\n  constructor(private element   : ElementRef,\n              private ngZone    : NgZone,\n              private renderer  : Renderer2) { }\n\n  ngOnInit() {\n    this.viewPortItems  = this.items.slice(this.previousStartIdx, this.lowerBufferCount)\n    this.scrollHandler  = this.renderer.listen(this.element.nativeElement, SCROLL_EVENT, this.refreshList.bind(this))\n  }\n\n  ngOnChanges() {\n    this.refreshList()\n  }\n\n  ngAfterViewInit() {\n    this.setInitHolderHeight() \n  }\n\n  ngOnDestroy() {\n    if (this.scrollHandler) {\n      this.scrollHandler()\n    }\n  }\n\n  /*=====================================================================\n                              PRIVATE METHODS  \t\t\t\t\t\t\t\t\t\t\t\t\n  =====================================================================*/\n\n  private setInitHolderHeight() {\n    const viewPortChildren  = this.scrollCont.nativeElement.children,\n          holderHeight      = this.calculateHeight()/viewPortChildren.length * this.viewPortItems.length\n\n    this.renderer.setStyle(this.contentHolder.nativeElement, 'height', `${holderHeight}px`)\n  }\n\n  private calculateHeight() {\n    const viewPortChildren = this.scrollCont.nativeElement.children\n    let totalHeight = 0\n    for (let i = 0; i < viewPortChildren.length; i++) {\n      const height = viewPortChildren[i].getBoundingClientRect().height\n      totalHeight += height\n    }\n    return Math.ceil(totalHeight)\n  }\n\n  private cacheViewedItemsHeight() {\n    const viewPortChildren = this.scrollCont.nativeElement.children\n    let i = this.previousStartIdx\n    for (const child of viewPortChildren) {\n      const height        = child.getBoundingClientRect().height\n      this.itemsHeight[i] = height\n      i++\n    }\n  }\n\n  private updateViewPortItems() {\n    \n    const viewPortChildren    = this.scrollCont.nativeElement.children,\n          viewPortItemsHeight = this.calculateHeight(),\n          averageHeight       = Math.ceil(viewPortItemsHeight/ viewPortChildren.length),\n          scrollTop           = this.element.nativeElement.scrollTop,\n          containerHeight     = this.element.nativeElement.getBoundingClientRect().height\n\n    this.cacheViewedItemsHeight()\n\n    let start = this.previousStartIdx,\n        end   = this.previousEndIdx\n\n    const elementsScrolled  = Math.ceil(scrollTop/averageHeight),\n          elementsVisible   = Math.ceil(containerHeight/averageHeight) \n\n    start = elementsScrolled - this.upperBufferCount + elementsVisible\n    end   = elementsScrolled + elementsVisible + this.lowerBufferCount\n\n    start = Math.max(0, start)\n    end   = Math.min(this.items.length, end >= 0 ? end : Infinity )\n\n    let height  = 0\n    \n    if (start > this.previousStartIdx) {\n      //scrolling down\n      for (let i = this.previousStartIdx; i < start ; i++) {\n        height += this.itemsHeight[i] || averageHeight\n      }\n      this.translateY += height\n    } else if (start < this.previousStartIdx) {\n      //scrolling up\n      for (let i = start; i < this.previousStartIdx; i++) {\n        height += this.itemsHeight[i] || averageHeight\n      }\n      this.translateY -= height\n    }\n\n    const currentHolderHeight = Math.ceil(viewPortItemsHeight + this.translateY)\n\n    const holderHeight  = Math.ceil((averageHeight * (this.items.length - end) + currentHolderHeight))\n    this.renderer.setStyle(this.contentHolder.nativeElement, 'height', `${holderHeight}px`)\n\n    DomHelper.setTransform(this.scrollCont.nativeElement, 0, this.translateY, 0)\n\n    if (start !== this.previousStartIdx || end !== this.previousEndIdx) {\n\n      this.ngZone.run(() => {\n\n        this.previousStartIdx = start\n        this.previousEndIdx   = end\n\n        this.viewPortItems = this.items.slice(start, end)\n\n        if (this.previousEndIdx === this.items.length) this.listEnd.emit(this.items.length)\n        \n      })\n    }\n  }\n\n  private scrollTo(index : number, highlight : boolean = false) {\n    let totalHeight = 0\n    for (let i = 0; i < index; i++) {\n      totalHeight += this.itemsHeight[i]\n    }\n    this.element.nativeElement.scrollTop  = totalHeight\n    if (highlight) {\n      \n      //TODO: add bg color and delay\n    }\n    this.refreshList()\n  }\n\n  private isElementInViewPort(element) {\n    const parentElem      = this.element.nativeElement,\n          viewPortTop     = parentElem.scrollTop,\n          viewPortBottom  = viewPortTop + parentElem.clientHeight,\n          elemTop         = element.offsetTop + (0.1 * element.clientHeight),\n          elemBottom      = element.offsetTop + (0.9 * element.clientHeight)\n\n    return (elemBottom <= viewPortBottom) && (elemTop >= viewPortTop)\n  }\n\n  /*\n    if scrolling down, the first visible element from top is currentActive element else \n    the last visible element is currentActive element \n  */\n  private updateCurrActiveElemIdx() {\n    const parentElem        = this.element.nativeElement,\n          viewPortElements  = parentElem.children[1].children,\n          scrolledDown      = parentElem.scrollTop > this.lastScrolledTop\n    \n    for (let index = 0 ; index < viewPortElements.length ; index++) {\n\n      const elementVisible  = this.isElementInViewPort(viewPortElements[index]),\n            anchorId        = this.viewPortItems[index].anchorId || null\n\n      if (elementVisible && anchorId) {\n        this.currActiveElemIndex  = this.previousStartIdx + index\n        if (scrolledDown) break\n      }\n    }\n    this.lastScrolledTop  = parentElem.scrollTop \n  }\n\n  /*=====================================================================\n                                    UTILS  \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n  =====================================================================*/\n  scrollToTop() {\n    this.element.nativeElement.scrollTop  = 0\n    this.refreshList()\n  }\n\n  scrollToItem(index : number, highlight : boolean = false) {\n    if (this.itemsHeight[index]) {\n      this.scrollTo(index, highlight)\n    } else {\n      if (index < this.items.length) {\n        this.viewPortItems = this.items.slice(0, index + this.lowerBufferCount)\n        this.refreshList()\n        setTimeout(() => {\n          this.scrollTo(index, highlight)\n        },0)\n      }\n    }\n  }\n\n  getScrollableElement() {\n    return this.element\n  }\n\n  // getSkippedElementsId() : string[] {\n  //   const skippedElementsId = []\n\n  //   if (this.lastActiveElemIndex > this.currActiveElemIndex) {\n  //     for (let i = this.currActiveElemIndex; i < this.lastActiveElemIndex; i++) {\n  //       const anchorId = this.items[i].anchorId || null\n  //       if (anchorId) skippedElementsId.push(anchorId)\n  //     }\n  //   } else if (this.lastActiveElemIndex < this.currActiveElemIndex) {\n  //     for (let i = this.lastActiveElemIndex; i < this.currActiveElemIndex; i++) {\n  //       const anchorId = this.items[i].anchorId || null\n  //       if (anchorId) skippedElementsId.push(anchorId)\n  //     }\n  //   }\n  //   return skippedElementsId\n  // }\n\n\n  getViewedElementsId() : string[] {\n    const parentElem        = this.element.nativeElement,\n          viewPortElements  = parentElem.children[1].children,\n          viewedElementsIds = []\n\n    this.lastActiveElemIndex  = this.currActiveElemIndex\n\n    for (let index = 0 ; index < viewPortElements.length ; index++) {\n\n      const elementVisible  = this.isElementInViewPort(viewPortElements[index]),\n            anchorId        = this.viewPortItems[index].anchorId || null\n\n      if (elementVisible && anchorId) {\n        viewedElementsIds.push(anchorId)\n      }\n    }\n    this.updateCurrActiveElemIdx()\n    return viewedElementsIds\n  }\n\n\n  getActiveElementId(firstElem : boolean  = false) : string {\n    const parentElem        = this.element.nativeElement,\n          viewPortElements  = parentElem.children[1].children\n          \n    let activeElementId\n\n    for (let index = 0 ; index < viewPortElements.length ; index++) {\n\n      const elementVisible  = this.isElementInViewPort(viewPortElements[index]),\n            anchorId        = this.viewPortItems[index].anchorId || null\n\n      if (elementVisible && anchorId) {\n        activeElementId = anchorId\n      }\n    }\n    return activeElementId\n  }\n\n  /*=====================================================================\n                              HTML FUNCTIONS  \t\t\t\t\t\t\t\t\t\t\t\t\n  =====================================================================*/\n  refreshList() {\n    this.ngZone.runOutsideAngular(() => {\n      requestAnimationFrame(() => {\n        this.updateViewPortItems()\n      })\n    })\n  }\n  \n}\n","import { AbstractControl,\n         FormControl\n       }                        from '@angular/forms'\n\nexport class InputValidator {\n\n  static dateValidator(control : AbstractControl) {\n\n    let startDateTS = control.get('startDate').value,\n        endDateTS   = control.get('endDate').value\n\n    if (startDateTS) {\n      let isDate : boolean\n\n      switch (typeof startDateTS) {\n        case \"string\" : isDate = !isNaN(Date.parse(startDateTS))\n                        break\n\n        case \"object\" : isDate  = startDateTS instanceof Date\n                                  ? !isNaN(startDateTS.getTime())\n                                  : false\n                        break\n\n        default       : isDate = false\n      }\n\n      if (isDate) {\n        startDateTS = startDateTS.getTime()\n      } else {\n        startDateTS = startDateTS.toDate().getTime()\n      }\n    }\n\n    if (endDateTS) {\n      let isDate : boolean\n\n      switch (typeof endDateTS) {\n        case \"string\" : isDate = !isNaN(Date.parse(endDateTS))\n                        break\n\n        case \"object\" : isDate  = endDateTS instanceof Date\n                                  ? !isNaN(endDateTS.getTime())\n                                  : false\n                        break\n\n        default       : isDate = false\n      }\n\n      if (isDate) {\n        endDateTS = endDateTS.getTime()\n      } else {\n        endDateTS = endDateTS.toDate().getTime()\n      }\n    }\n\n    if (!startDateTS && endDateTS) {\n      control.get('startDate').setErrors({ noStartDate : true })\n    } else if (endDateTS && startDateTS && (endDateTS - startDateTS < 0)) {\n      control.get('startDate').setErrors({ startDateExceed: true })\n    } else {\n      return null\n    }\n  }\n\n  static futureDateValidatorIfAllowed(control : AbstractControl){\n    let startDateTS = control.get('startDate').value,\n        endDateTS   = control.get('endDate').value\n\n    const dateNowTS   = Date.now()\n\n    if (startDateTS) {\n      let isDate : boolean\n\n      switch (typeof startDateTS) {\n        case \"string\" : isDate = !isNaN(Date.parse(startDateTS))\n                        break\n\n        case \"object\" : isDate  = startDateTS instanceof Date\n                                  ? !isNaN(startDateTS.getTime())\n                                  : false\n                        break\n\n        default       : isDate = false\n      }\n\n      if (isDate) {\n        startDateTS = startDateTS.getTime()\n      } else {\n        startDateTS = startDateTS.toDate().getTime()\n      }\n    }\n\n    if (endDateTS) {\n      let isDate : boolean\n\n      switch (typeof endDateTS) {\n        case \"string\" : isDate = !isNaN(Date.parse(endDateTS))\n                        break\n\n        case \"object\" : isDate  = endDateTS instanceof Date\n                                  ? !isNaN(endDateTS.getTime())\n                                  : false\n                        break\n\n        default       : isDate = false\n      }\n\n      if (isDate) {\n        endDateTS = endDateTS.getTime()\n      } else {\n        endDateTS = endDateTS.toDate().getTime()\n      }\n    }\n\n    if (endDateTS && (dateNowTS - endDateTS) < 0) {\n      control.get('endDate').setErrors({ futureDate : true })\n    } else if (startDateTS && (dateNowTS - startDateTS) < 0) {\n      control.get('startDate').setErrors({ futureDate : true })\n    }\n  }\n\n  static amountValidator(control : AbstractControl) {\n\n    const minAmount = control.get('minAmount').value\n                      ? control.get('minAmount').value\n                      : null,\n          maxAmount = control.get('maxAmount').value\n                      ? control.get('maxAmount').value\n                      : null\n\n    if (!minAmount && maxAmount) {\n      control.get('minAmount').setErrors({ noMinAmount : true })\n    } else if (maxAmount && minAmount && (maxAmount - minAmount < 0)) {\n      control.get('minAmount').setErrors({ minAmountExceed : true })\n    } else {\n      return null\n    }\n  }\n\n  static futureDateValidator(control : FormControl) {\n\n    if (!control.value) return null\n\n    const dateNowTS = Date.now()\n\n    let date = control.value\n\n    if (date) {\n      let isDate : boolean\n\n      switch (typeof date) {\n        case \"string\" : isDate = !isNaN(Date.parse(date))\n                        break\n\n        case \"object\" : isDate  = date instanceof Date\n                                  ? !isNaN(date.getTime())\n                                  : false\n                        break\n\n        default       : isDate = false\n      }\n\n      if (isDate) {\n        date = date.getTime()\n      } else {\n        date = date.toDate().getTime()\n      }\n    }\n\n    if (date && (dateNowTS - date) < 0) {\n      return { futureDate : true }\n    } else {\n      return null\n    }\n  }\n}","import { Component, \n         OnInit, \n         Inject, \n         Input,\n         ViewChild,\n         ElementRef,\n         Output,\n         EventEmitter\n       }                          from '@angular/core'\nimport { TrackableScreen }        from '../../../ui/router/trackable-screen'\nimport { TranslateService }       from '../translate/translate.service'\n\nexport const PERMISSION = {\n  CAMERA  : 'CAMERA'\n}\n\n\nexport interface UploadedDocParams {\n base64   : string\n checksum : string\n mimeType : string\n}\n\n@Component({\n  selector    : 'file-upload',\n  templateUrl : './file-upload.component.html',\n  styleUrls   : ['./file-upload.component.scss']\n})\n\nexport class FileUploadComponent implements OnInit {\n\n  @ViewChild('uploadFileCont', { static: false }) uploadFileCont : ElementRef\n\n  @Input() screen         : TrackableScreen\n  @Input() eventPropagate : boolean\n  @Input() isRequired     : boolean\n\n  @Output() value         : EventEmitter<UploadedDocParams> = new EventEmitter<UploadedDocParams>()\n\n  uploadedDocParams     : UploadedDocParams\n\n  /*rc type is any since it is of type RuncontextApp and it is app specific\n    and should not be imported here\n  */\n  constructor(@Inject('RunContext') public rc : any,\n              private translate               : TranslateService) { }\n\n  ngOnInit() {\n  }\n\n  ngAfterViewInit() {\n\n    if (this.rc.bridge.isRunningInBrowser()) {\n      if(this.uploadFileCont)\n        this.uploadFileCont.nativeElement.addEventListener('change', this.onFileUpload.bind(this))\n    }\n  }\n\n  /*=====================================================================\n                              PRIVATE\n  =====================================================================*/\n  private async onFileUpload(event: any) {\n\n    const file = event.target.files[0]\n\n    if (!file.type.includes('image')) {\n      const errorText = this.translate.instant('upl_invalid_mime_type')\n      this.rc.uiRouter.showToast(errorText)\n      return\n    }\n\n    if (file.size > 512000) {\n      const warnText = this.translate.instant('upl_max_size_err')\n      this.rc.uiRouter.showToast(warnText)\n      return\n    }\n\n    const base64 = await this.rc.utils.getBase64(file) as string,\n      strippedBase64 = base64.replace(`data:${file.type};base64,`, '')\n\n    const uploadDoc: UploadedDocParams = {\n      base64: strippedBase64,\n      mimeType: file.type,\n      checksum: await this.rc.utils.getCheckSum(strippedBase64)\n    }\n\n    if (!this.uploadedDocParams) this.uploadedDocParams = {} as UploadedDocParams\n    this.uploadedDocParams = uploadDoc\n\n    this.uploadFileCont.nativeElement.value = null\n\n  }\n\n  private async updatePicture() {\n\n    const resp = await this.rc.bridge.takePictureFromCamera()\n\n    if (!resp['success']) {\n      this.rc.uiRouter.showToast(this.translate.instant('mu_fil_upl_unknow_err'))\n      return\n    }\n\n    const uploadDoc: UploadedDocParams = {\n      base64    : resp['base64'],\n      mimeType  : resp['mimeType'],\n      checksum  : await this.rc.utils.getCheckSum(resp['base64'])\n    }\n\n    if (!this.uploadedDocParams) this.uploadedDocParams = {} as UploadedDocParams\n    this.uploadedDocParams = uploadDoc\n    \n    if (this.eventPropagate) {\n      this.onSubmit()\n    }\n\n  }\n\n  /*=====================================================================\n                              HTML\n  =====================================================================*/\n  async takePicture() {\n    \n    if (this.rc.bridge.isRunningInBrowser()) return\n    \n    const resp = await this.rc.bridge.getPermission(PERMISSION.CAMERA,false)\n    if (!resp.permGiven) {\n      return \n    }\n\n    this.rc.bridge(PERMISSION.CAMERA).then((permResp: any) => {\n      if (permResp.permGiven) this.updatePicture()\n    })\n  }\n\n  async uploadFile() {\n\n    if (this.rc.bridge.isRunningInBrowser()) {\n      const event = new MouseEvent('click', {bubbles: false})\n      this.uploadFileCont.nativeElement.dispatchEvent(event)\n      return\n    }\n\n    const docObj  = await this.rc.bridge.selectDocumentFile()\n\n    if (docObj['error']) return\n\n    if (!docObj['base64']) {\n      this.rc.uiRouter.showToast(this.translate.instant('cmn_toast_err_unknown'))\n      return\n    }\n\n    const uploadDoc  = {\n      base64    : docObj['base64'],\n      checksum  : docObj['checksum'],\n      mimeType  : docObj['mimeType']\n    }\n\n    if (!this.uploadedDocParams) this.uploadedDocParams = {} as UploadedDocParams\n    this.uploadedDocParams= uploadDoc\n\n    if (this.eventPropagate) {\n      this.onSubmit()\n    }\n\n  }\n  \n  onSubmit() {\n    \n    if ( this.isRequired && (!this.uploadedDocParams || !Object.keys(this.uploadedDocParams).length)) {\n      this.rc.uiRouter.showToast(this.translate.instant('mu_fil_upl_upload_err'))\n    } else {\n      this.value.emit(this.uploadedDocParams)\n    }\n    \n  }\n\n}\n","/*------------------------------------------------------------------------------\n   About          : Child component which has individual control for each input\n                    type\n   \n   Created on     : Fri May 24 2019\n   Author         : Pulkit Chaturvedi\n   Last edited by : Divya Sinha\n   \n   Copyright (c) 2019 Obopay. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { Component,\n         Input,\n         Output,\n         Inject,\n         EventEmitter,\n         ViewChild,\n         OnChanges,\n         ElementRef\n       }                                  from '@angular/core'\nimport { FormControl,\n         Validators,\n         FormGroup,\n         FormBuilder\n       }                                  from '@angular/forms'\nimport { TrackableScreen }                from '../../../ui/router/trackable-screen'\nimport { RunContextBrowser }              from '../../../rc-browser'\nimport { MatSliderChange }                from '@angular/material/slider'\nimport { MatAutocompleteSelectedEvent }   from '@angular/material/autocomplete'\nimport { MatSelectChange }                from '@angular/material/select'\nimport { MatButtonToggleChange }          from '@angular/material/button-toggle'\nimport { MatDatepicker,\n         MatDatepickerInputEvent\n       }                                  from '@angular/material/datepicker'\nimport { MatCheckboxChange }              from '@angular/material/checkbox'\nimport { MatRadioChange }                 from '@angular/material/radio'\nimport { MatSlideToggleChange }           from '@angular/material/slide-toggle'\n\n\nimport { InputValidator }                 from './input-validator'\nimport { Observable }                     from 'rxjs'\nimport { map,\n         startWith\n       }                                  from 'rxjs/operators'\nimport { FileUploadComponent, \n         UploadedDocParams \n       }                                  from '../file-upload/file-upload.component'\nimport { DISPLAY_TYPE, \n         DISPLAY_MODE,\n         InputParams,\n         SelectionBoxParams,\n         StepSelectedFilter\n       }                                  from '@mubble/core'\nimport { OutputParams }                   from '../cmn-inp-cont/cmn-inp-cont-interfaces'\n\n@Component({\n  selector    : 'input-container',\n  templateUrl : './input-container.component.html',\n  styleUrls   : ['./input-container.component.scss']\n})\n\nexport class InputContainerComponent implements OnChanges {\n\n  @ViewChild(MatDatepicker, { static: false }) picker             : MatDatepicker<any>\n  @ViewChild(FileUploadComponent, { static: false }) fileUplInst  : FileUploadComponent\n\n  @Input()  inputParams         : InputParams\n  @Input()  screen              : TrackableScreen\n  @Input()  webMode             : boolean\n  @Input()  parentCont          : ElementRef\n  @Input()  eventPropagate      : boolean                           = false\n  @Input()  displayMode         : DISPLAY_MODE         \n  @Input()  displayLabel        : boolean                           = true\n  @Output() value               : EventEmitter<any>                 = new EventEmitter<any>()\n  @Output() dropdownOpen        : EventEmitter<boolean>             = new EventEmitter<boolean>()\n  @Output() stepSelectedFilter  : EventEmitter<StepSelectedFilter>  = new EventEmitter<StepSelectedFilter>()\n\n  inputForm       : FormControl\n  dateRange       : FormGroup\n  numberRange     : FormGroup\n  filteredOptions : Observable<SelectionBoxParams[]>\n  sliderLabel     : string \n\n  DISPLAY_TYPE      : typeof DISPLAY_TYPE       = DISPLAY_TYPE\n  DISPLAY_MODE      : typeof DISPLAY_MODE       = DISPLAY_MODE\n\n  private fileUploadParams : UploadedDocParams\n\n  constructor(@Inject('RunContext') protected rc  : RunContextBrowser,\n              private formBuilder                 : FormBuilder) { \n\n  }\n\n  ngOnChanges() {\n    this.initialize()\n  }\n\n  ngOnInit() {\n    this.initialize()      \n  }\n\n  getFilterId(): string {\n    return this.inputParams.id\n  }\n\n  reset(inputParams: InputParams) {\n    this.inputParams = inputParams\n    this.initialize()\n  }\n\n  /*=====================================================================\n                              UTILS\n  =====================================================================*/\n  onSubmit() {\n\n    if (this.inputForm && (this.inputParams.validators || this.inputParams.isRequired))\n      this.inputForm.markAsTouched()\n\n    if (this.dateRange && ( this.inputParams.isRequired || this.inputParams.validators)) {\n      this.dateRange.controls.startDate.markAsTouched()\n      this.dateRange.controls.endDate.markAsTouched()\n    }\n\n    if (this.numberRange && ( this.inputParams.isRequired || this.inputParams.validators)) {\n      this.numberRange.controls.minAmount.markAsTouched()\n      this.numberRange.controls.maxAmount.markAsTouched()\n    }\n\n    if (this.hasError()) return\n\n    let params    : OutputParams,\n        emitValue : boolean = true    \n\n    switch (this.inputParams.displayType) {\n\n      case DISPLAY_TYPE.CALENDAR_BOX        :\n        params  = { \n                    id          : this.inputParams.id,\n                    value       : this.inputForm.value ? this.inputForm.value.getTime() : null,\n                    displayType : this.inputParams.displayType\n                  }\n        break\n\n      case DISPLAY_TYPE.INPUT_BOX           :\n      case DISPLAY_TYPE.SELECTION_BOX       :\n      case DISPLAY_TYPE.AUTOCOMPLETE_SELECT :\n      case DISPLAY_TYPE.TEXT_AREA           :\n      case DISPLAY_TYPE.TOGGLE              :\n      case DISPLAY_TYPE.BUTTON_TOGGLE       :\n      case DISPLAY_TYPE.ROW_INPUT_BOX       :\n      case DISPLAY_TYPE.SLIDER              : \n        params  = { \n                    id          : this.inputParams.id,\n                    value       : this.inputForm.value,\n                    displayType : this.inputParams.displayType\n                  }\n        break\n\n      case DISPLAY_TYPE.DATE_RANGE  :\n        const dateRangeKeys   = this.inputParams.rangeKeys  || ['startDate', 'endDate'],\n              dateRangeValue  = {}\n\n        dateRangeValue[dateRangeKeys[0]] = this.dateRange.controls.startDate.value\n                                      ? this.dateRange.controls.startDate.value.getTime()\n                                      : null\n\n        dateRangeValue[dateRangeKeys[1]] = this.dateRange.controls.endDate.value\n                                      ? this.dateRange.controls.endDate.value.getTime()\n                                      : null\n\n        params  = { \n                    id          : this.inputParams.id,\n                    value       : dateRangeValue,\n                    displayType : this.inputParams.displayType\n                  }\n        break\n\n      case DISPLAY_TYPE.NUMBER_RANGE  :\n\n        const numRangeKeys  = this.inputParams.rangeKeys  || ['minAmount', 'maxAmount'],\n              numRangeValue = {}\n\n        numRangeValue[numRangeKeys[0]]  = this.numberRange.controls.minAmount.value\n        numRangeValue[numRangeKeys[1]]  = this.numberRange.controls.maxAmount.value\n\n        params  = { \n                    id          : this.inputParams.id,\n                    value       : numRangeValue,\n                    displayType : this.inputParams.displayType\n                  }\n        break\n\n      case DISPLAY_TYPE.IMAGE_UPLOAD  : \n        params  = {\n                    id          : this.inputParams.id,\n                    value       : this.fileUploadParams,\n                    displayType : this.inputParams.displayType\n                  }\n        break\n\n      case DISPLAY_TYPE.RADIO     : \n      case DISPLAY_TYPE.ROW_RADIO :\n\n        params  = {\n                    id          : this.inputParams.id,\n                    value       : this.inputForm.value ? this.inputForm.value : null,\n                    displayType : this.inputParams.displayType\n                  }\n        break\n\n      case DISPLAY_TYPE.MULTI_CHECK_BOX : \n      case DISPLAY_TYPE.DROPDOWN_MULTI_CHECK_BOX : \n        params  = { \n                    id          : this.inputParams.id,\n                    value       : this.inputForm.value,\n                    displayType : this.inputParams.displayType\n                  }\n        break  \n\n    }\n\n    if (emitValue) this.value.emit(params)\n  }\n\n  isCalanderOpen() : boolean {\n    return this.picker.opened\n  }\n\n  closeCalander() {\n    this.picker.close()\n  }\n\n  /*=====================================================================\n                              HTML\n  =====================================================================*/\n  selectedOption(event : MatSelectChange | MatRadioChange) {\n\n    if (event.value === 'ALL') {\n      const values : SelectionBoxParams[] = this.inputParams.options\n      this.inputParams.options.forEach((option) => option.selected = true)\n      this.inputForm.setValue(values)\n      this.emitStepSelection(values)\n\n    } else {\n      this.inputForm.setValue(event.value)\n      this.emitStepSelection(event.value)\n    }\n\n    if (this.eventPropagate) this.onSubmit()\n  }\n\n  onToggleChane(event : MatSlideToggleChange) {\n    this.inputForm.setValue(event.checked)\n    if (this.eventPropagate)  this.onSubmit()\n  }\n\n  onBtnToggleChange(event : MatButtonToggleChange, index ?: number) {\n    this.inputForm.setValue(event.value)\n    if (this.eventPropagate)  this.onSubmit()\n  }\n\n  fileUploadValue(event : UploadedDocParams) {\n    this.fileUploadParams = event\n    if (this.eventPropagate)  this.onSubmit()\n  }\n\n  checkAllOptions(event : MatCheckboxChange) {\n\n    if (event.checked) { // Check All options\n      const values : SelectionBoxParams[] = this.inputParams.options\n      this.inputParams.options.forEach((option) => option.selected = true)\n      this.inputForm.setValue(values)\n      this.emitStepSelection(values)\n\n    } else { // Uncheck all options\n      this.inputParams.options.forEach((option) => option.selected = false)\n      this.inputForm.setValue([])\n      this.emitStepSelection([])\n    }\n\n    if (this.eventPropagate) this.onSubmit()\n  }\n\n  checkedOption(option : SelectionBoxParams) {\n\n    const value = this.inputForm.value as any[]\n\n    if (value) {\n\n      const idIndex = value.findIndex(val => val.id === option.id)\n\n      if (idIndex !== -1) {\n        value.splice(idIndex, 1)\n        this.inputForm.setValue(value)\n        this.emitStepSelection(value)\n\n      } else {\n        value.push(option)\n        this.inputForm.setValue(value)\n        this.emitStepSelection(value)\n      }\n\n    } else {\n      this.inputForm.setValue([option])\n      this.emitStepSelection([option])\n    }\n\n    if (this.eventPropagate)  this.onSubmit()\n  }\n\n  setChangedValues(event : string) {\n    this.inputForm.setValue(event)\n    if (this.eventPropagate)  this.onSubmit()\n  }\n\n  setDate(event : MatDatepickerInputEvent<Date>) {\n    const value : any = event.value\n    value && !this.isDateObj(value) ? this.inputForm.setValue(value.toDate())\n                                    : this.inputForm.setValue(value)\n    \n    if (this.eventPropagate)  this.onSubmit()\n  }\n\n  setDateRange(event : MatDatepickerInputEvent<Date>) {\n    const sDate = this.dateRange.controls.startDate.value,\n          eDate = this.dateRange.controls.endDate.value\n\n    sDate && !this.isDateObj(sDate) ? this.dateRange.controls.startDate.setValue(sDate.toDate())\n                                    : this.dateRange.controls.startDate.setValue(sDate)\n\n    eDate && !this.isDateObj(eDate) ? this.dateRange.controls.endDate.setValue(eDate.toDate())\n                                    : this.dateRange.controls.endDate.setValue(eDate)\n\n    if (this.eventPropagate)  this.onSubmit()\n  }\n\n  setNumberRange(event : string) {\n    this.numberRange.controls.minAmount.setValue(this.numberRange.controls.minAmount.value)\n    this.numberRange.controls.maxAmount.setValue(this.numberRange.controls.maxAmount.value)\n\n    if (this.eventPropagate)  this.onSubmit()\n  }\n\n  setAutocompleteValue(event : MatAutocompleteSelectedEvent) {\n    this.inputForm.setValue(event.option.value)\n    if (this.eventPropagate)  this.onSubmit()\n  }\n\n  displayFn(value: any) : string {\n    return value && typeof value === 'object' ? value.value : value\n  }\n\n  onSliderValueChange(event : MatSliderChange) {\n    this.inputForm.setValue({minValue : event.source.min, maxValue : event.value})\n  }\n\n  hasError() : boolean {\n    let hasError : boolean = false\n\n    switch (this.inputParams.displayType) {\n\n      case DISPLAY_TYPE.CALENDAR_BOX              :\n      case DISPLAY_TYPE.INPUT_BOX                 :\n      case DISPLAY_TYPE.SELECTION_BOX             :\n      case DISPLAY_TYPE.AUTOCOMPLETE_SELECT       :\n      case DISPLAY_TYPE.TEXT_AREA                 :\n      case DISPLAY_TYPE.MULTI_CHECK_BOX           :\n      case DISPLAY_TYPE.RADIO                     :\n      case DISPLAY_TYPE.ROW_RADIO                 :\n      case DISPLAY_TYPE.TOGGLE                    :\n      case DISPLAY_TYPE.BUTTON_TOGGLE             :\n      case DISPLAY_TYPE.ROW_INPUT_BOX             :\n\n        hasError = this.inputParams.isRequired \n                   ? this.inputForm.invalid\n                   : this.inputForm.value && this.inputForm.invalid\n        break\n\n      case DISPLAY_TYPE.DATE_RANGE    :\n        hasError  = this.inputParams.isRequired \n                    ? this.dateRange.invalid\n                    : ((this.dateRange.controls.startDate.value && this.dateRange.controls.startDate.invalid )\n                      || (this.dateRange.controls.startDate.value && !this.dateRange.controls.endDate.value)\n                      || ( this.dateRange.controls.endDate.value && this.dateRange.controls.endDate.invalid) )\n        break\n\n      case DISPLAY_TYPE.NUMBER_RANGE  :\n        hasError  = this.inputParams.isRequired \n                    ? this.numberRange.invalid\n                    : ((this.numberRange.controls.minAmount.value && this.numberRange.controls.minAmount.invalid )\n                      || ( this.numberRange.controls.minAmount.value && !this.numberRange.controls.maxAmount.value ) \n                      || (this.numberRange.controls.maxAmount.value && this.numberRange.controls.maxAmount.invalid) )\n        break\n\n      case DISPLAY_TYPE.IMAGE_UPLOAD  :\n        this.fileUplInst.onSubmit()\n        hasError  = this.inputParams.isRequired\n                    ? (!this.fileUploadParams || Object.keys(this.fileUploadParams).length === 0)\n                    : false\n    }\n  \n    return hasError\n  }\n\n  dropDownToggle(event : boolean) {\n    this.dropdownOpen.emit(event)\n  }\n\n  valueEntered(value) {\n    if (this.inputParams.displayType === DISPLAY_TYPE.AUTOCOMPLETE_SELECT) {\n      const option = this.inputParams.options.find(option => option.value === value)\n    \n      option  ? this.inputForm.setValue(option)\n              : this.inputForm.setValue({ id : value, value : value })   \n\n      if (this.eventPropagate)  this.onSubmit()\n    }\n  }\n\n  formatLabel = (value: number) => {\n    return value + this.sliderLabel\n  }\n\n  /*=====================================================================\n                              PRIVATE\n  =====================================================================*/\n\n  private initialize() {\n    const params          = this.inputParams,\n          formValidations = []\n\n    if (params.isRequired) formValidations.push(Validators.required)\n\n    if (params.validators) formValidations.push(Validators.pattern(params.validators.validation))\n\n    switch (params.displayType) {\n      case DISPLAY_TYPE.INPUT_BOX                 :\n      case DISPLAY_TYPE.TEXT_AREA                 :\n      case DISPLAY_TYPE.RADIO                     : \n      case DISPLAY_TYPE.ROW_RADIO                 :\n      case DISPLAY_TYPE.SELECTION_BOX             :\n      case DISPLAY_TYPE.TOGGLE                    : \n      case DISPLAY_TYPE.MULTI_CHECK_BOX           :\n      case DISPLAY_TYPE.BUTTON_TOGGLE             :\n      case DISPLAY_TYPE.ROW_INPUT_BOX             :\n      case DISPLAY_TYPE.DROPDOWN_MULTI_CHECK_BOX  :\n        this.inputForm  = new FormControl(params.value || null, formValidations)\n\n        if (params.options && params.options.length) {\n          const selectedValues  = []\n          params.options.forEach(opt => {\n            if (opt.selected) selectedValues.push(opt)\n          })\n          if (selectedValues.length) this.inputForm.setValue(selectedValues)\n        }\n        if (params.value) this.inputForm.setValue(params.value)\n        this.setDisabled(params.isDisabled)\n        break\n\n      case DISPLAY_TYPE.AUTOCOMPLETE_SELECT :\n        this.inputForm        = new FormControl(params.value || null, formValidations)\n        this.filteredOptions  = this.inputForm.valueChanges.pipe(\n                                  startWith(''),\n                                  map(value => typeof value === 'string' ? value : value.value),\n                                  map(value => value  ? this.filterOptions(value)\n                                                      : this.inputParams.options.slice()))\n\n        this.setDisabled(params.isDisabled)\n        break\n\n      case DISPLAY_TYPE.CALENDAR_BOX  :\n        if (params.value) params.value = new Date(params.value)\n\n        formValidations.push(InputValidator.futureDateValidator)\n\n        this.inputForm  = new FormControl(params.value || null, formValidations)\n        this.setDisabled(params.isDisabled)\n        break\n\n      case DISPLAY_TYPE.DATE_RANGE  : \n      const dateRangeKeys  = params.rangeKeys || ['startDate', 'endDate']\n\n        if (params.value) {\n\n          if (params.value[dateRangeKeys[0]]) params.value[dateRangeKeys[0]] = new Date(params.value[dateRangeKeys[0]])\n          if (params.value[dateRangeKeys[1]]) params.value[dateRangeKeys[1]] = new Date(params.value[dateRangeKeys[1]])\n        } else {\n          params.value  = {}\n        }\n\n        this.dateRange = this.formBuilder.group({\n          startDate : [params.value[dateRangeKeys[0]] || null, formValidations],\n          endDate   : [params.value[dateRangeKeys[1]]   || null, formValidations]\n        })\n\n        const valiArr = [InputValidator.dateValidator]\n        if(!params.validators || !params.validators.allowFutureDate) \n          valiArr.push(InputValidator.futureDateValidatorIfAllowed)\n        this.dateRange.setValidators(valiArr)\n        if (params.isDisabled) this.dateRange.disable()\n        break\n \n      case DISPLAY_TYPE.NUMBER_RANGE  : \n\n        if (params.value) {\n          const numRangeKeys  = params.rangeKeys || ['minAmount', 'maxAmount']\n          this.numberRange = this.formBuilder.group({\n            minAmount : [params.value[numRangeKeys[0]] || null, formValidations],\n            maxAmount : [params.value[numRangeKeys[1]] || null, formValidations]\n          },\n          {\n            validator : [InputValidator.amountValidator]\n          })\n        } else {\n          params.value  = {}\n        }\n        if (params.isDisabled) this.numberRange.disable()\n        break\n\n      case DISPLAY_TYPE.SLIDER :\n        // this.numberRange = this.formBuilder.group({\n        //   minAmount : [params.value['minAmount'] || null, formValidations],\n        //   maxAmount : [params.value['maxAmount'] || null, formValidations]\n        // },\n        // {\n        //   validator : [InputValidator.amountValidator]\n        // })\n        // if (params.isDisabled) this.numberRange.disable()\n        this.inputForm  = new FormControl(params.value || null, formValidations)\n\n        if (params.options && params.options.length) {\n          const selectedValues  = []\n          params.options.forEach(opt => {\n            if (opt.selected) selectedValues.push(opt)\n            this.sliderLabel = opt.id === 'formatLabel' ? opt.value as string : ''\n          })\n\n          if (selectedValues.length) this.inputForm.setValue(selectedValues)\n        }\n        this.setDisabled(params.isDisabled)\n        break\n    }\n  }\n\n  private emitStepSelection(value: any) {\n    const selFilter : StepSelectedFilter = {\n      id    : this.inputParams.id,\n      value : value\n    }\n    this.stepSelectedFilter.emit(selFilter)\n  }\n\n  private filterOptions(inputText : string): SelectionBoxParams[] {\n    const filterValue = inputText.toLowerCase()\n    return this.inputParams.options.filter(option =>\n      (option.value as string).toLowerCase().includes(filterValue))\n  }\n\n  private setDisabled(value : boolean) {\n    value ? this.inputForm.disable() : this.inputForm.enable()\n  }\n\n\n  private isDateObj(value : any) : boolean {\n    let isDate : boolean\n\n    switch (typeof value) {\n      case \"string\" : isDate = !isNaN(Date.parse(value))\n                      break\n\n      case \"object\" : isDate  = value instanceof Date\n                                ? !isNaN(value.getTime())\n                                : false\n                      break\n\n      default       : isDate = false\n    }\n\n    return isDate\n  }\n}","import { Component, \n         Inject, \n         Input,\n         EventEmitter,\n         Output,\n         ElementRef,\n         NgZone,\n         ViewChild,\n         HostListener,\n         Renderer2\n       }                            from '@angular/core'\nimport { RunContextBrowser }          from '../../../rc-browser'\nimport { Nail, \n         NailInterface \n       }                              from '../../nail'\nimport { MultiStepValue, \n         DomHelper \n       }                            from '../../../util'\n       \n\nconst ANIM_TRANSITION   = 600\nconst KEY_ANIM_TRANS    = 200\nconst EVENT_TIME_TAKEN  = 250   \n\nexport interface DialerOptions  {\n  id         : string | number\n  value      : string | number\n}\n\nexport interface DialerCssClasses {\n  bgColor       ?: string\n  activeColor   ?: string\n  inActiveColor ?: string\n}\n\nexport interface DialerParams {\n  dialerOptions      : DialerOptions[]\n  isCircular        ?: boolean\n  highlightPos      ?: number\n  dialerCssClasses  ?: DialerCssClasses\n  selectedItem      ?: DialerOptions\n}\n\n@Component({\n  selector    : 'dialer',\n  templateUrl : './dialer.component.html',\n  styleUrls   : ['./dialer.component.scss']\n})\n\nexport class DialerComponent implements NailInterface {\n\n  @HostListener('keydown', ['$event']) onHostKeyup(event : KeyboardEvent) {\n    this.onKeyDown(event)\n  }\n  \n  @ViewChild('scrollCont',    { static: true }) scrollCont    : ElementRef\n  @ViewChild('contentHolder', { static: true }) contentHolder : ElementRef\n\n\n  @Input() parentDiv      : ElementRef\n  @Input() dialerParams   : DialerParams\n  @Input() eventPropagte  : boolean  = false \n  // @Input() screen         : TrackableScreen\n\n  @Output() value : EventEmitter<DialerOptions> \n\n  viewPortItems : DialerOptions[]\n  selectedItem  : DialerOptions\n\n  private nail          : Nail\n  private multiStepVal  : MultiStepValue\n  private lastIndex     : number\n  private sound         : any\n\n  constructor(@Inject('RunContext') protected rc  : RunContextBrowser,\n              private renderer                    : Renderer2,\n              private ngZone                      : NgZone) { \n                \n    this.value          = new EventEmitter<DialerOptions>()\n    // window['dialer']    = this\n\n    // user howler for sound if being implemented in mobile \n    //( https://cdnjs.cloudflare.com/ajax/libs/howler/2.1.2/howler.core.min.js)\n\n    // this.sound = new (window as any).Howl({\n    //   src     : ['sounds/select.mp3'],\n    //   volume  : 0.15\n\n    // });\n    \n  }\n\n  ngOnInit() {\n    \n    const slicedItems   = this.dialerParams.dialerOptions.slice(0)\n    this.viewPortItems  = slicedItems\n    this.selectedItem   = this.dialerParams.selectedItem || this.viewPortItems[0]\n  }\n\n  ngAfterViewInit() {\n\n    const scrollElem        = this.scrollCont.nativeElement,\n          viewPortChildren  = scrollElem.children,\n          rect              = viewPortChildren[1].getBoundingClientRect(),\n          width             = rect.width\n\n    this.contentHolder.nativeElement.style.height = `${rect.height}px`\n    this.contentHolder.nativeElement.style.width  = `${width}px`\n    this.contentHolder.nativeElement.style.top    = this.dialerParams.highlightPos \n                                                    ? `(${this.dialerParams.highlightPos} * ${rect.height})px`\n                                                    : `${rect.height}px`\n    this.scrollCont.nativeElement.style.top       = this.dialerParams.highlightPos \n                                                    ? `(${this.dialerParams.highlightPos} * ${rect.height})px`\n                                                    : `${rect.height}px`\n\n    this.nail           = new Nail(this.rc, this.scrollCont.nativeElement, this, this.renderer, { axisX : false, axisY : true})\n    this.multiStepVal   = new MultiStepValue(0, rect.height, this.dialerParams.dialerOptions.length, false, true)\n\n  }\n\n  ngOnDestroy() {\n\n  }\n\n  /*=====================================================================\n                              PRIVATE\n  =====================================================================*/\n\n  private onKeyDown(event : KeyboardEvent) {\n\n    const scrollElem        = this.scrollCont.nativeElement,\n          viewPortChildren  = scrollElem.children,\n          rect              = viewPortChildren[1].getBoundingClientRect(),\n          lastIndex         = this.lastIndex\n          \n    if (event.which === 38) {\n      this.multiStepVal.final(rect.height, 0.2)\n    } else if (event.which === 40) {\n      this.multiStepVal.final(-rect.height, 0.2)\n    } else {\n      return\n    }\n\n    event.stopImmediatePropagation()\n    event.stopPropagation()\n    event.preventDefault()\n\n    const currentIndex  = this.multiStepVal.currentIndex\n\n    if (currentIndex === lastIndex) return\n\n    this.scrollCont.nativeElement.style.transition  = `${KEY_ANIM_TRANS}ms`\n    DomHelper.setTransform(this.scrollCont.nativeElement, 0, -this.multiStepVal.currentValue, 0)\n    this.lastIndex    = this.multiStepVal.currentIndex\n    this.selectedItem = this.dialerParams.dialerOptions[this.lastIndex]\n    // this.rc.audio.play(this.rc.audio.SELECT)\n    if (this.sound) this.sound.play()\n    if (this.eventPropagte) this.value.emit(this.selectedItem)\n\n  }\n\n  /*=====================================================================\n                              CALLBACKS\n  =====================================================================*/\n  onPanStart() {\n    this.scrollCont.nativeElement.style.transition  = 'none'\n  }\n\n  onPanMove(event : any) {\n\n    this.ngZone.runOutsideAngular(() => {\n\n      const scrollElem        = this.scrollCont.nativeElement,\n            viewPortChildren  = scrollElem.children,\n            rect              = viewPortChildren[1].getBoundingClientRect(),\n            deltaY            = event.deltaY,\n            value             = this.multiStepVal.transition(deltaY),\n            lastIndex         = this.lastIndex\n\n      const newIndex  = Math.round(value/rect.height)\n\n      if (lastIndex !== newIndex) {\n        if (this.sound) this.sound.play()\n        this.lastIndex  = newIndex\n      }\n\n      this.nail.requestAnimate(value)\n      this.rc.isDebug() && this.rc.debug(this.rc.getName(this), \n      `onPanMove ${JSON.stringify({event, lastIndex : this.lastIndex})}`)\n\n      this.selectedItem = this.dialerParams.dialerOptions[this.lastIndex]\n\n    })\n\n    \n    return true\n  }\n\n  onPanAnimate(value : number) {\n    this.ngZone.run(() => {\n      DomHelper.setTransform(this.scrollCont.nativeElement, 0, -value, 0) \n    })\n  }\n\n  onPanEnd(event : any) {\n\n    this.ngZone.runOutsideAngular(() => {\n      \n      const deltaY            = event.deltaY,\n            scrollElem        = this.scrollCont.nativeElement,\n            viewPortChildren  = scrollElem.children,\n            rect              = viewPortChildren[1].getBoundingClientRect(),\n            value             = this.multiStepVal.transition(deltaY)\n   \n      const currentIndex  = this.multiStepVal.currentIndex\n\n      this.multiStepVal.final(deltaY, event.speed, event.quickRatio)\n\n      const latestIndex = this.multiStepVal.currentIndex\n      const newIndex  = Math.round(value/rect.height)\n\n      this.rc.isDebug() && this.rc.debug(this.rc.getName(this), \n      `onPanEnd ${JSON.stringify({event, lastIndex : this.lastIndex, newIndex, currentIndex, latestIndex})}`)\n\n      if (currentIndex === latestIndex) return\n\n      this.scrollCont.nativeElement.style.transition  = `${ANIM_TRANSITION}ms`\n      const totalDisplacement = Math.abs((event.timeTaken < EVENT_TIME_TAKEN ? currentIndex : newIndex ) - latestIndex) || 1\n\n      this.rc.isDebug() && this.rc.debug(this.rc.getName(this), \n      `totalDisplacement ${JSON.stringify(totalDisplacement)}`)\n\n      const interval  = setInterval(() => {\n        if (this.sound) this.sound.play()\n      }, ANIM_TRANSITION/totalDisplacement)\n\n      if (latestIndex >= currentIndex) {\n\n        for (let i = currentIndex ; i <= latestIndex; i = i + 0.25) {\n          DomHelper.setTransform(this.scrollCont.nativeElement, 0, -rect.height * i, 0)\n        }\n\n      } else {\n\n        for (let i = latestIndex; i < currentIndex; i = i + 0.25) {\n          DomHelper.setTransform(this.scrollCont.nativeElement, 0, rect.height * i, 0)\n        }\n      }\n\n      setTimeout(() => {\n        clearInterval(interval)\n      }, ANIM_TRANSITION)\n    \n    })\n\n    this.ngZone.run(() => {\n      \n      DomHelper.setTransform(this.scrollCont.nativeElement, 0, -this.multiStepVal.currentValue, 0)\n    \n      this.lastIndex    = this.multiStepVal.currentIndex\n      this.selectedItem = this.dialerParams.dialerOptions[this.lastIndex]\n      \n      if (this.eventPropagte) this.value.emit(this.selectedItem)\n\n    })\n  }\n\n  /*=====================================================================\n                              UTILS\n  =====================================================================*/\n  getSelectedItem() {\n    this.value.emit(this.selectedItem)\n  }\n\n  scrollToElem(index : number) {\n\n    if (index === this.multiStepVal.currentIndex) return\n\n    const scrollElem        = this.scrollCont.nativeElement,\n          viewPortChildren  = scrollElem.children,\n          rect              = viewPortChildren[1].getBoundingClientRect()\n\n    if (index > this.multiStepVal.currentIndex) {\n      this.multiStepVal.final(-rect.height, 0.2)\n    } else {\n      this.multiStepVal.final(rect.height, 0.2)\n    }\n\n    this.scrollCont.nativeElement.style.transition  = `${KEY_ANIM_TRANS}ms`\n    DomHelper.setTransform(this.scrollCont.nativeElement, 0, -this.multiStepVal.currentValue, 0)\n\n    this.lastIndex    = this.multiStepVal.currentIndex\n    this.selectedItem = this.dialerParams.dialerOptions[this.lastIndex]\n\n    // this.rc.audio.play(this.rc.audio.SELECT)\n    if (this.sound) this.sound.play()\n    if (this.eventPropagte) this.value.emit(this.selectedItem)\n\n  }\n\n}\n","/*------------------------------------------------------------------------------\n   About      : Replacement of input-container. Ranges are not handled as of now\n   \n   Created on : Fri Mar 06 2020\n   Author     : Aditya Baddur\n   \n   Copyright (c) 2020 Obopay. All rights reserved.\n\n   https://developers.google.com/web/fundamentals/design-and-ux/input/forms/#recommended_input_name_and_autocomplete_attribute_values\n------------------------------------------------------------------------------*/\n\n\nimport { Component,\n         Input,\n         Output,\n         Inject,\n         EventEmitter,\n         ViewChild,\n         OnChanges,\n         ElementRef,\n         ViewChildren,\n         QueryList,\n         ChangeDetectorRef\n       }                                  from '@angular/core'\nimport { FormControl,\n         Validators,\n         FormGroup,\n         FormBuilder\n       }                                  from '@angular/forms'\nimport { TrackableScreen }                from '../../router/trackable-screen'\nimport { RunContextBrowser }              from '../../../rc-browser'\nimport { MatAutocompleteSelectedEvent }   from '@angular/material/autocomplete'\nimport { MatSelectChange }                from '@angular/material/select'\nimport { MatButtonToggleChange }          from '@angular/material/button-toggle'\nimport { MatDatepicker,\n         MatDatepickerInputEvent\n       }                                  from '@angular/material/datepicker'\nimport { MatCheckboxChange }              from '@angular/material/checkbox'\nimport { MatRadioChange }                 from '@angular/material/radio'\nimport { MatSlideToggleChange }           from '@angular/material/slide-toggle'\n\nimport { InputValidator }                 from '../input-container/input-validator'\nimport { Observable }                     from 'rxjs'\nimport { map,\n         startWith\n       }                                  from 'rxjs/operators'\nimport { FileUploadComponent, \n         UploadedDocParams \n       }                                  from '../file-upload/file-upload.component'\nimport { Mubble,\n         DISPLAY_TYPE, \n         DISPLAY_MODE,\n         InputParams,\n         SelectionBoxParams,\n         MuFormParams\n       }                                  from '@mubble/core'\nimport { MuFormOutputParams, \n         FormOutputValue \n       }                                  from '../cmn-inp-cont/cmn-inp-cont-interfaces'\n\n@Component({\n  selector    : 'mu-form-container',\n  templateUrl : './mu-form-container.component.html',\n  styleUrls   : ['./mu-form-container.component.scss']\n})\n\nexport class MuFormContainerComponent implements OnChanges {\n\n  @ViewChildren(MatDatepicker) picker                             : QueryList<MatDatepicker<Date>>\n  @ViewChild(FileUploadComponent, { static: false }) fileUplInst  : FileUploadComponent\n  @ViewChildren('inputCont') inputCont                            : QueryList<ElementRef>\n\n  @Input()  formParams      : MuFormParams\n  @Input()  screen          : TrackableScreen\n  @Input()  webMode         : boolean\n  @Input()  parentCont      : ElementRef\n  @Input()  eventPropagate  : boolean               = false\n  @Input()  displayMode     : DISPLAY_MODE         \n  @Input()  displayLabel    : boolean               = true\n  @Input()  displayCount    : number   \n\n  @Output() value           : EventEmitter<MuFormOutputParams>  = new EventEmitter<MuFormOutputParams>()\n  @Output() dropdownOpen    : EventEmitter<boolean>             = new EventEmitter<boolean>()\n  @Output() lastInpField    : EventEmitter<any>                 = new EventEmitter<any>()\n\n  inputForm         : FormGroup = {} as FormGroup\n  filteredOptions   : Observable<SelectionBoxParams[]>\n\n  DISPLAY_TYPE      : typeof DISPLAY_TYPE       = DISPLAY_TYPE\n  DISPLAY_MODE      : typeof DISPLAY_MODE       = DISPLAY_MODE\n  maxDate           : Date                      = new Date()\n\n  inputContainers : HTMLElement[]\n\n  private fileUploadParams  : UploadedDocParams\n\n  constructor(@Inject('RunContext') protected rc  : RunContextBrowser,\n              private formBuilder                 : FormBuilder,\n              private changeRef                   : ChangeDetectorRef) { \n\n    this.inputForm  = this.formBuilder.group({}) \n    \n  }\n\n  ngOnChanges() {\n    this.initialize()\n  }\n\n  ngOnInit() {\n    this.initialize() \n  }\n\n  ngAfterViewInit() {\n\n    setTimeout(() => {\n      this.inputContainers  = this.inputCont.toArray().map(val => val.nativeElement)        \n    }, 10)\n    \n  }\n\n  /*=====================================================================\n                              UTILS\n  =====================================================================*/\n  onSubmit(manual : boolean = true, id ?: string) {\n\n    for (const inputParams of this.formParams.inputParams) {\n    \n      if (this.inputForm && (inputParams.validators || inputParams.isRequired) && manual)\n        this.inputForm.get(inputParams.id).markAsTouched()\n    }\n\n    if (manual && this.hasError()) return false\n\n    const formOutputParams  : MuFormOutputParams  = { } as MuFormOutputParams\n\n    for (const inputParams of this.formParams.inputParams) {\n\n      if (id && id !== inputParams.id) continue\n\n      let params    : FormOutputValue\n      \n      switch (inputParams.displayType) {\n\n        case DISPLAY_TYPE.CALENDAR_BOX        :\n          params  = { \n                      value       : this.inputForm.get(inputParams.id).value ? this.inputForm.get(inputParams.id).value.getTime() : null,\n                      displayType : inputParams.displayType\n                    }\n          break\n\n        case DISPLAY_TYPE.INPUT_BOX           :\n        case DISPLAY_TYPE.SELECTION_BOX       :\n        case DISPLAY_TYPE.AUTOCOMPLETE_SELECT :\n        case DISPLAY_TYPE.TEXT_AREA           :\n        case DISPLAY_TYPE.TOGGLE              :\n        case DISPLAY_TYPE.BUTTON_TOGGLE       :\n        case DISPLAY_TYPE.ROW_INPUT_BOX       :\n        case DISPLAY_TYPE.TIME                :\n          params  = { \n                      value       : this.inputForm.get(inputParams.id).value,\n                      displayType : inputParams.displayType\n                    }\n          break\n\n        case DISPLAY_TYPE.DATE_RANGE  :\n          const dateFormGroup : FormGroup               = this.inputForm.get(inputParams.id) as FormGroup,\n                dateRangeKeys : string[]                = inputParams.rangeKeys || ['startDate', 'endDate'],\n                dateValue     : Mubble.uObject<string>  = {}\n\n          dateValue[dateRangeKeys[0]] = dateFormGroup.controls.startDate.value\n                                        ? dateFormGroup.controls.startDate.value.getTime()\n                                        : null\n      \n          dateValue[dateRangeKeys[1]] = dateFormGroup.controls.endDate.value\n                                        ? dateFormGroup.controls.endDate.value.getTime()\n                                        : null                          \n                                    \n\n          params  = { \n                      value       : dateValue,\n                      displayType : inputParams.displayType\n                    }\n          break\n\n        case DISPLAY_TYPE.NUMBER_RANGE  :\n          const numFormGroup  : FormGroup               = this.inputForm.get(inputParams.id) as FormGroup,\n                numRangeKeys  : string[]                = inputParams.rangeKeys || ['minAmount', 'maxAmount'],\n                numRangeValue : Mubble.uObject<string>  = {}\n\n\n          numRangeValue[numRangeKeys[0]]  = numFormGroup.controls.minAmount.value,\n          numRangeValue[numRangeKeys[1]]  = numFormGroup.controls.maxAmount.value     \n\n          params  = { \n                      value       : numRangeValue,\n                      displayType : inputParams.displayType\n                    }\n          break\n\n        case DISPLAY_TYPE.IMAGE_UPLOAD  : \n          params  = {\n                      value       : this.fileUploadParams,\n                      displayType : inputParams.displayType\n                    }\n          break\n\n        case DISPLAY_TYPE.RADIO     : \n        case DISPLAY_TYPE.ROW_RADIO :\n\n          params  = {\n                      value       : this.inputForm.get(inputParams.id).value ||  null,\n                      displayType : inputParams.displayType\n                    }\n          break\n\n        case DISPLAY_TYPE.MULTI_CHECK_BOX :  \n          params  = { \n                      value       : this.inputForm.get(inputParams.id).value,\n                      displayType : inputParams.displayType\n                    }\n          break  \n      }\n      \n      formOutputParams[inputParams.id]  = params\n\n    }\n\n    this.value.emit(formOutputParams)\n    return true\n\n  }\n\n  isCalanderOpen() : boolean {\n    const pickers = this.picker.toArray()\n    return pickers.some(val => val.opened)\n  }\n\n  closeCalander() {\n    const pickers = this.picker.toArray(),\n          length  = pickers.length\n\n    for (let i = 0 ; i < length; i++) {\n      if (pickers[i].opened) {\n        pickers[i].close()\n        break\n      }\n    }\n  }\n\n  clearForm() {\n    this.inputForm.reset()\n  }\n  /*=====================================================================\n                              HTML\n  =====================================================================*/\n\n  selectedOption(event : MatSelectChange | MatRadioChange, i : number) {\n\n    const inputParams = this.formParams.inputParams[i]\n    this.inputForm.get(inputParams.id).setValue(event.value)\n\n    if (this.eventPropagate)  this.onSubmit(false, inputParams.id)\n  }\n\n  onToggleChane(event : MatSlideToggleChange, i : number) {\n    const inputParams = this.formParams.inputParams[i]\n    this.inputForm.get(inputParams.id).setValue(event.checked)\n    if (this.eventPropagate)  this.onSubmit(false, inputParams.id)\n  }\n\n  onBtnToggleChange(event : MatButtonToggleChange, i : number) {\n    const inputParams = this.formParams.inputParams[i]\n    this.inputForm.get(inputParams.id).setValue(event.value)\n    if (this.eventPropagate)  this.onSubmit(false, inputParams.id)\n  }\n\n  fileUploadValue(event : UploadedDocParams, id : string) {\n    this.fileUploadParams = event\n    if (this.eventPropagate)  this.onSubmit(false, id)\n  }\n\n  checkedOption(event : MatCheckboxChange, option : SelectionBoxParams, i : number) {\n\n    const inputParams = this.formParams.inputParams[i],\n          value       = this.inputForm.get(inputParams.id).value as any[]\n          \n\n    if (value) {\n\n      const idIndex = value.findIndex(val => val.id === option.id)\n\n      if (idIndex !== -1) {\n        value.splice(idIndex, 1)\n        this.inputForm.get(inputParams.id).setValue(value)\n      } else {\n        value.push(option)\n        this.inputForm.get(inputParams.id).setValue(value)\n      }\n\n    } else {\n      this.inputForm.get(inputParams.id).setValue([option])\n    }\n\n    if (this.eventPropagate)  this.onSubmit(false, inputParams.id)\n  }\n\n  setChangedValues(event : string, i : number) {\n    const inputParams = this.formParams.inputParams[i]\n    this.inputForm.get(inputParams.id).setValue(event)\n\n    if (this.eventPropagate)  this.onSubmit(false, inputParams.id)\n  }\n\n  setDate(event : MatDatepickerInputEvent<Date>, i : number) {\n    const value : any = event.value,\n          inputParams = this.formParams.inputParams[i]\n\n    value && !this.isDateObj(value) ? this.inputForm.get(inputParams.id).setValue(value.toDate())\n                                    : this.inputForm.get(inputParams.id).setValue(value)\n    \n    if (this.eventPropagate)  this.onSubmit(false, inputParams.id)\n  }\n\n  setDateRange(event : MatDatepickerInputEvent<Date>, i : number) {\n    const formName  : string    = this.formParams.inputParams[i].id,\n          dateGroup : FormGroup = this.inputForm.get(formName) as FormGroup\n\n    const sDate = dateGroup.controls.startDate.value,\n          eDate = dateGroup.controls.endDate.value\n\n    sDate && !this.isDateObj(sDate) ? dateGroup.controls.startDate.setValue(sDate.toDate())\n                                    : dateGroup.controls.startDate.setValue(sDate)\n\n    eDate && !this.isDateObj(eDate) ? dateGroup.controls.endDate.setValue(eDate.toDate())\n                                    : dateGroup.controls.endDate.setValue(eDate)\n\n    if (this.eventPropagate)  this.onSubmit(false, formName)\n  }\n\n  setNumberRange(event : string, i : number) {\n    const formName  : string    = this.formParams.inputParams[i].id,\n          numGroup  : FormGroup = this.inputForm.get(formName) as FormGroup\n\n    numGroup.controls.minAmount.setValue(numGroup.controls.minAmount.value)\n    numGroup.controls.maxAmount.setValue(numGroup.controls.maxAmount.value)\n\n    if (this.eventPropagate)  this.onSubmit(false, formName)\n  }\n\n  setAutocompleteValue(event : MatAutocompleteSelectedEvent, i : number) {\n    const inputParams = this.formParams.inputParams[i]\n    this.inputForm.get(inputParams.id).setValue(event.option.value)\n    if (this.eventPropagate)  this.onSubmit(false, inputParams.id)\n  }\n\n  displayFn(value: any) : string {\n    return value && typeof value === 'object' ? value.value : value\n  }\n\n  hasError() : boolean {\n\n    let hasError : boolean = false\n\n    for (const inputParams of this.formParams.inputParams) {\n\n      switch (inputParams.displayType) {\n\n        case DISPLAY_TYPE.CALENDAR_BOX        :\n        case DISPLAY_TYPE.INPUT_BOX           :\n        case DISPLAY_TYPE.SELECTION_BOX       :\n        case DISPLAY_TYPE.AUTOCOMPLETE_SELECT :\n        case DISPLAY_TYPE.TEXT_AREA           :\n        case DISPLAY_TYPE.MULTI_CHECK_BOX     :\n        case DISPLAY_TYPE.RADIO               :\n        case DISPLAY_TYPE.ROW_RADIO           :\n        case DISPLAY_TYPE.TOGGLE              :\n        case DISPLAY_TYPE.BUTTON_TOGGLE       :\n        case DISPLAY_TYPE.ROW_INPUT_BOX       :\n        case DISPLAY_TYPE.TIME                :\n\n          hasError = inputParams.isRequired \n                    ? this.inputForm.invalid\n                    : this.inputForm.get(inputParams.id).value && this.inputForm.invalid\n          break\n\n        case DISPLAY_TYPE.DATE_RANGE    :\n          const dateFormGroup : FormGroup = this.inputForm.get(inputParams.id) as FormGroup\n\n          hasError  = inputParams.isRequired \n                      ? dateFormGroup.invalid\n                      : ((dateFormGroup.controls.startDate.value && dateFormGroup.controls.startDate.invalid)\n                        || (dateFormGroup.controls.startDate.value && !dateFormGroup.controls.endDate.value)\n                        || (dateFormGroup.controls.endDate.value && dateFormGroup.controls.endDate.invalid))\n          break\n\n        case DISPLAY_TYPE.NUMBER_RANGE  :\n          const numFormGroup : FormGroup = this.inputForm.get(inputParams.id) as FormGroup\n\n          hasError  = inputParams.isRequired \n                      ? numFormGroup.invalid\n                      : ((numFormGroup.controls.minAmount.value && numFormGroup.controls.minAmount.invalid)\n                        || (numFormGroup.controls.minAmount.value && !numFormGroup.controls.maxAmount.value) \n                        || (numFormGroup.controls.maxAmount.value && numFormGroup.controls.maxAmount.invalid))\n          break\n\n        case DISPLAY_TYPE.IMAGE_UPLOAD  :\n          this.fileUplInst.onSubmit()\n          hasError  = inputParams.isRequired\n                      ? (!this.fileUploadParams || Object.keys(this.fileUploadParams).length === 0)\n                      : false\n      }\n    }\n    \n    return hasError\n  }\n\n  dropDownToggle(event : boolean, index : number) {\n\n    const inputParams = this.formParams.inputParams[index]\n    \n\n    if (!event && this.inputForm.get(inputParams.id).value) {\n      \n      if (this.inputContainers[index + 1]) {\n        this.inputContainers[index + 1].focus()\n      } else {\n        this.lastInpField.emit()\n      }\n    }\n    \n    this.dropdownOpen.emit(event)\n  }\n\n  valueEntered(value, i : number) {\n\n    const inputParams = this.formParams.inputParams[i]\n    if (inputParams.displayType === DISPLAY_TYPE.AUTOCOMPLETE_SELECT) {\n      const option = inputParams.options.find(option => option.value === value)\n    \n      option  ? this.inputForm.get(inputParams.id).setValue(option)\n              : this.inputForm.get(inputParams.id).setValue({ id : value, value : value })   \n\n      if (this.eventPropagate)  this.onSubmit(false, inputParams.id)\n    }\n  }\n\n  enterOnLastInput(event : any) {\n    this.lastInpField.emit(event)\n  }\n\n  /*=====================================================================\n                              PRIVATE\n  =====================================================================*/\n\n  private initialize() {\n\n    for (const params of this.formParams.inputParams) {\n      const formValidations = []\n       \n      if (params.isRequired) formValidations.push(Validators.required)\n\n      if (params.validators) formValidations.push(Validators.pattern(params.validators.validation))\n\n      switch (params.displayType) {\n        case DISPLAY_TYPE.INPUT_BOX       :\n        case DISPLAY_TYPE.TEXT_AREA       :\n        case DISPLAY_TYPE.RADIO           : \n        case DISPLAY_TYPE.ROW_RADIO       :\n\n        case DISPLAY_TYPE.SELECTION_BOX   :\n        case DISPLAY_TYPE.TOGGLE          : \n        case DISPLAY_TYPE.MULTI_CHECK_BOX :\n        case DISPLAY_TYPE.BUTTON_TOGGLE   :\n        case DISPLAY_TYPE.ROW_INPUT_BOX   :\n        case DISPLAY_TYPE.TIME            :\n\n          this.inputForm.addControl(params.id, new FormControl(params.value || null, formValidations))\n\n          if (params.options && params.options.length) {\n            const selectedValues  = []\n            params.options.forEach(opt => {\n              if (opt.selected) selectedValues.push(opt)\n            })\n            if (selectedValues.length) this.inputForm.get(params.id).setValue(selectedValues[0])\n          }\n          this.setInputDisabled(params.id,params.isDisabled)\n          break\n    \n\n        case DISPLAY_TYPE.AUTOCOMPLETE_SELECT :\n          this.inputForm.addControl(params.id, new FormControl(params.value || null, formValidations))\n          this.filteredOptions      = this.inputForm.valueChanges.pipe(\n                                      startWith(''),\n                                      map(value => typeof value === 'string' ? value : value.value),\n                                      map(value => value  ? this.filterOptions(value, params)\n                                                        : params.options.slice()))\n\n          this.setInputDisabled(params.id,params.isDisabled)\n          break\n\n        case DISPLAY_TYPE.CALENDAR_BOX  :\n          if (params.value) params.value = new Date(params.value)\n\n          formValidations.push(InputValidator.futureDateValidator)\n\n          this.inputForm.addControl(params.id, new FormControl(params.value || null, formValidations))\n          this.setInputDisabled(params.id,params.isDisabled)\n          break\n\n        case DISPLAY_TYPE.DATE_RANGE  : \n          if (!params.value) params.value  = {}\n\n          const valiArr = [InputValidator.dateValidator]\n          if(!params.validators || !params.validators.allowFutureDate)\n            valiArr.push(InputValidator.futureDateValidatorIfAllowed)\n\n          this.inputForm.addControl(params.id, new FormGroup({\n            startDate : new FormControl(params.value['startDate'] ? new Date(params.value.startDate)\n                                                                  : null, formValidations),\n            endDate   : new FormControl(params.value['endDate'] ? new Date(params.value.endDate)\n                                                                : null, formValidations),\n          },\n          {\n            validators : valiArr\n          }))\n\n          this.setInputDisabled(params.id,params.isDisabled)\n          break\n\n        case DISPLAY_TYPE.NUMBER_RANGE  : \n          if (!params.value) params.value  = {}\n\n          this.inputForm.addControl(params.id, new FormGroup({\n            minAmount : new FormControl(params.value['minAmount'] || null, formValidations),\n            maxAmount : new FormControl(params.value['maxAmount'] || null, formValidations),\n          },\n          {\n            validators : [InputValidator.amountValidator]\n          }))\n\n          this.setInputDisabled(params.id,params.isDisabled)\n          break\n      }\n    }\n\n    if (this.formParams.formValidators) this.inputForm.setValidators(this.formParams.formValidators.validation)\n\n  }\n\n  private filterOptions(inputText : string, params : InputParams): SelectionBoxParams[] {\n\n    const filterValue = inputText.toLowerCase()\n    return params.options.filter(option =>\n      (option.value as string).toLowerCase().includes(filterValue))\n  }\n\n  private setInputDisabled(id : string, value : boolean) {\n    value ? this.inputForm.get(id).disable() : this.inputForm.get(id).enable()\n  }\n\n\n  private isDateObj(value : any) : boolean {\n    let isDate : boolean\n\n    switch (typeof value) {\n      case \"string\" : isDate = !isNaN(Date.parse(value))\n                      break\n\n      case \"object\" : isDate  = value instanceof Date\n                                ? !isNaN(value.getTime())\n                                : false\n                      break\n\n      default       : isDate = false\n    }\n\n    return isDate\n  }\n\n  /*=====================================================================\n                              UTILS\n  =====================================================================*/\n\n  focusElement(index : number) {\n    \n    this.inputContainers[index].focus()\n\n  }\n\n  updateValidators(formIds : string[]) {\n\n    for (let i = 0 ; i < formIds.length; i++) {\n\n      const form = this.inputForm.get(formIds[i])\n\n      if (form) {\n        const params = this.formParams.inputParams.find(val => val.id === formIds[i])\n        if (params) {\n          if (params.isDisabled) {\n            form.disable()\n          } else {\n            form.enable()\n          }\n        }\n      }\n\n    }\n  }\n\n}\n","import { Component, \n         OnInit, \n         Input, \n         Output, \n         EventEmitter,\n         ViewChild,\n         Inject,\n         ElementRef,\n         ChangeDetectorRef,\n         SimpleChanges,\n         ViewChildren,\n         QueryList\n       }                            from '@angular/core'\nimport { MatCheckboxChange, \n         MatCheckbox \n       }                            from '@angular/material/checkbox'\nimport { MatRadioChange }           from '@angular/material/radio'\nimport { MatMenuTrigger }           from '@angular/material/menu'\nimport { MatSlideToggleChange }     from '@angular/material/slide-toggle'\nimport { FormControl, \n         FormGroup\n       }                            from '@angular/forms'\n\nimport { TableHeader, \n         FilterItem, \n         DISPLAY_MODE,\n         LOG_LEVEL,              \n         COL_TYPE,\n         MuSelectedFilter,\n         MuStickyTableConfig,\n         NavInfo,\n         expandTemplate\n       }                            from '@mubble/core'\nimport { RunContextBrowser }        from '../../../rc-browser'\nimport { FilterComponent }          from '../filter/filter.component'\nimport { MuUtility }              from '../../../util'\n\nexport interface TableConfig {\n  headers            : TableHeader[]\n  data               : Array<Object>\n  dispRows          ?: number     \n  enableSelect      ?: boolean\n  enableRadio       ?: boolean\n  enableFilter      ?: boolean\n  enableDownload    ?: boolean\n  selectedIndexes   ?: number[]\n  lazyLoad          ?: boolean\n  totalRecords      ?: number\n  horizFilterParams ?: FilterItem[],\n  vertFilterParams  ?: FilterItem[],\n  downloadFormats   ?: string[]\n  stickyConfig      ?: MuStickyTableConfig\n}\n\nexport interface MuTableRowSelEvent {\n  rowIndex      : number\n  rowData       : Object\n  isSelected    : boolean\n  browserEvent  : any\n}\n\nexport interface MuTableDetailEvent {\n  id      : string\n  rowData : Object\n}\n\nexport interface MuTableSelAllEvent {\n  selectedRows : Object[]\n  isSelected   : boolean\n}\n\nexport interface MuTableClickEvent {\n  rowIndex   : number\n  headerKey  : string\n  rowData   ?: Object\n  navInfo   ?: NavInfo\n}\n\nexport interface MuTableMoreDetail {\n  id    : string\n  value : string\n}\n\nexport interface MuTableEditEvent {\n  rowIndex     : number\n  rowData      : Object\n  editedValues : Object\n}\n\n@Component({\n  selector    : 'mu-data-table',\n  templateUrl : './mu-data-table.component.html',\n  styleUrls   : ['./mu-data-table.component.scss']\n})\n\nexport class MuDataTableComponent implements OnInit {\n\n  @ViewChild('slctAllBox',  {static : false}) slctAllBox  : MatCheckbox\n  @ViewChild('filterCont',  {static : false}) filterCont  : ElementRef\n  @ViewChild('muTableCont', {static : false}) muTableCont : ElementRef\n  @ViewChild('menuTrigger', { static : true }) menuTrigger : MatMenuTrigger\n\n  @ViewChildren(FilterComponent)  filterCompChildren      : QueryList<FilterComponent>\n\n  @Input()  tableConfig        : TableConfig\n  @Output() loadMoreData       : EventEmitter<number> = new EventEmitter() \n  @Output() onRowSelect        : EventEmitter<MuTableRowSelEvent>  = new EventEmitter()\n  @Output() onSelectAll        : EventEmitter<MuTableSelAllEvent>  = new EventEmitter()\n  @Output() onDetailClick      : EventEmitter<MuTableDetailEvent>  = new EventEmitter()\n  @Output() onCellClick        : EventEmitter<MuTableClickEvent>   = new EventEmitter()\n  @Output() onRowEdit          : EventEmitter<MuTableEditEvent>    = new EventEmitter()\n  @Output() onDownload         : EventEmitter<string>              = new EventEmitter()\n\n  @Output() selectedFilter     : EventEmitter<MuSelectedFilter[]> = new EventEmitter<MuSelectedFilter[]>()\n\n  pageIndex         : number   \n  currPageIndex     : number  \n  prevPageIndex     : number   \n  isTogglePresent   : boolean\n\n  selectedIndexes   : Object   = {} \n  selAllMap         : Object   = {} \n  headerFields      : string[] = []\n  dataToDisplay     : Object[] = []\n  pageNumbers       : number[] = []\n  stickyInfo        : MuStickyTableConfig\n\n  private filterFields : string[] = []\n  private dataMap      : Object   = {}\n\n  editForm          : FormGroup = new FormGroup({})\n  COL_TYPE          : typeof COL_TYPE     = COL_TYPE  \n  DISPLAY_MODE      : typeof DISPLAY_MODE = DISPLAY_MODE\n\n  constructor(@Inject('RunContext') protected rc      : RunContextBrowser,\n                                    private changeDet : ChangeDetectorRef) {\n\n    if (rc.getLogLevel() === LOG_LEVEL.DEBUG) window['datatable'] = this\n  }\n\n  ngOnChanges(changes : SimpleChanges) {\n    this.tableConfig  = changes['tableConfig'].currentValue\n    this.setUpTable()\n  }\n\n\n  ngOnInit() {\n    this.setUpTable()\n  }\n\n\n  ngAfterViewInit() {\n\n    const top = this.filterCont.nativeElement.offsetTop\n    this.filterCont.nativeElement.style.maxHeight = `calc(100% - ${top}px)`\n  }\n\n  /*=====================================================================\n                              PRIVATE\n  =====================================================================*/\n\n  private setUpTable() {\n\n    if (this.tableConfig) {\n\n      for (let header of this.tableConfig.headers) {\n\n        if (header.colType === COL_TYPE.TOGGLE) this.isTogglePresent = true \n        \n        if (header.isEditable) this.editForm.addControl(header.dataKey, new FormControl())\n        \n        this.headerFields.push(header.dataKey)\n\n        if (this.tableConfig.enableFilter && \n            (header.colType === COL_TYPE.HYPER_LINK ||\n            header.colType === COL_TYPE.TEXT)) {\n          this.filterFields.push(header.dataKey)\n        }\n      }\n\n      if (this.tableConfig.selectedIndexes)\n      this.tableConfig.selectedIndexes.map(index => this.selectedIndexes[index]= true)          \n      this.tableConfig.totalRecords  = this.tableConfig.totalRecords || this.tableConfig.data.length\n      this.tableConfig.dispRows      = this.tableConfig.dispRows     || this.tableConfig.data.length\n      \n      this.createDataMap(this.tableConfig.data, 0)\n      this.createPageNumbers()\n    }\n\n    if (this.tableConfig.stickyConfig && this.tableConfig.stickyConfig.noOfCols > 0) {\n      this.stickyInfo = this.tableConfig.stickyConfig\n      if (this.stickyInfo && !this.stickyInfo.nonStickyWidth) {\n        // Use 200% width for default, so table can scroll max double of its width\n        this.stickyInfo.nonStickyWidth = 200 - this.stickyInfo.stickyWidth\n      }\n      const nSColWidth = this.stickyInfo.nonStickyWidth / (this.tableConfig.headers.length - this.stickyInfo.noOfCols)\n      for (const header of this.tableConfig.headers) {\n        if (header.widthPerc) {\n          this.stickyInfo.nonStickyWidth += header.widthPerc - nSColWidth\n        }\n      }\n      this.stickyInfo.nonStickyWidth = Math.max((100 - this.stickyInfo.stickyWidth), this.stickyInfo.nonStickyWidth)\n    }\n  }\n  \n\n  /**\n   * Creates the page numbers needed for pagination\n   * Called during initialization of table and updation of data inside table\n   */\n  private createPageNumbers() {\n    \n    this.pageNumbers    = []\n    this.currPageIndex  = this.prevPageIndex = this.pageIndex = 0\n    let totalPages      = this.tableConfig.totalRecords / this.tableConfig.dispRows\n    \n    if (this.tableConfig.totalRecords % this.tableConfig.dispRows) totalPages++\n\n    for (let pageNumber = 1; pageNumber <= totalPages; pageNumber++) \n      this.pageNumbers.push(pageNumber)  \n  }\n\n\n  /**\n   * changes the pagenumbers according to the current selected page number\n   * @param pageIndex \n   */\n  private updatePageNumbers(pageIndex : number) {\n    \n    this.pageIndex     = pageIndex - 2\n    if (this.pageIndex <= 0) {\n      this.pageIndex = 0\n    } else {\n      if (this.pageIndex >= (this.pageNumbers.length - 4)) this.pageIndex = this.pageNumbers.length - 5\n    }\n  }\n\n\n  /**\n   * sends a callback to parent with main event and row data on click of radio button, checkbox or \n   * toggle button so that parent can stop the default action\n   * @param event \n   * @param rowData \n   */\n  rowClick(event : any, rowData : any) {\n\n    const selEvent : MuTableRowSelEvent = {\n      rowData       : rowData,\n      rowIndex      : rowData['rowIndex'],\n      isSelected    : this.selectedIndexes[rowData['rowIndex']] ? false : true,\n      browserEvent  : event\n    }\n\n    this.onRowSelect.emit(selEvent) \n  }\n\n\n  /**\n   * Changes the select all indexes map according to user preference on click of checkbox\n   * @param event \n   * @param rowData \n   */\n  rowSelect(event : MatCheckboxChange, rowData : any) {\n    \n    if (event.checked) {\n\n      this.selectedIndexes[rowData['rowIndex']] = true\n    } else {\n      \n      this.slctAllBox.checked = false\n      this.selAllMap[this.currPageIndex] = false\n      this.selectedIndexes[rowData['rowIndex']] = false\n    }   \n  }\n\n\n  /**\n   * Selects all the rows in the page that is being displayed and a callback is \n   * sent to the parent with the rows that are selected.\n   */\n  selectAll(event : MatCheckboxChange) {\n        \n    this.slctAllBox.checked = event.checked\n    this.selAllMap[this.currPageIndex] = event.checked \n        \n    for (let index = 0; index < (this.currPageIndex + this.tableConfig.dispRows); index++) \n      this.selectedIndexes[index + (this.currPageIndex * this.tableConfig.dispRows)] = event.checked\n    \n    const selAllEvent : MuTableSelAllEvent = {\n      selectedRows : this.dataMap[this.currPageIndex],\n      isSelected   : event.checked\n    }\n    this.onSelectAll.emit(selAllEvent)\n  }\n\n\n  /**\n   * Changes the select all indexes map according to user preference on click of radio button\n   * @param event \n   * @param rowData \n   */\n  radioSelect(event : MatRadioChange, rowData : Object) {\n\n    this.selectedIndexes = { }\n    const selectedIndex  = rowData['rowIndex']\n    this.selectedIndexes[selectedIndex] = true\n  }\n\n\n  /**\n   * Sends call back to the parent on click of an option inside moredetails along with\n   * the ID of the option and rowData\n   * @param detKey \n   * @param rowData \n   */\n  moreDetailsClick(detKey : string, rowData : Object) {\n\n    const moreSelEvent : MuTableDetailEvent = {\n      id      : detKey,\n      rowData : rowData\n    }\n    this.onDetailClick.emit(moreSelEvent)\n  }\n\n\n  /**\n   * Changes the select all indexes map according to user preference on click of toggle button\n   * @param event \n   * @param rowData \n   */\n  toggleRow(event : MatSlideToggleChange, rowData : Object) {\n  \n    this.selectedIndexes[rowData['rowIndex']] = event.checked    \n  }\n\n\n  /**\n   * mapData creates a map of row objects that needs to be displayed in the table\n   * with index as the key and array of objects as its value\n   * @param data the data that needs to be mapped\n   * @param startPageIndex - index from which data needs to be mapped\n   */\n  createDataMap(data : Array<Object>, startPageIndex : number) {\n                    \n    const dataSetCount = Math.ceil(data.length/this.tableConfig.dispRows),\n          currData     = JSON.parse(JSON.stringify(data))\n    \n    for (let index = 0; index < currData.length; index++) \n      currData[index]['rowIndex'] = index + (startPageIndex * this.tableConfig.dispRows)\n\n    for (let i = 0; i < dataSetCount; i++) {\n     \n      const mapData = currData.splice(0, this.tableConfig.dispRows),\n            mapKey  = startPageIndex + i\n                  \n      if (mapData.length === this.tableConfig.dispRows \n          || !this.tableConfig.lazyLoad \n          || (this.tableConfig.lazyLoad && this.tableConfig.totalRecords <= ((mapKey * this.tableConfig.dispRows) + mapData.length))) \n        this.dataMap[mapKey] = mapData \n    }\n    \n    this.dataToDisplay = this.dataMap[startPageIndex] || []\n    this.changeDet.detectChanges()\n  }\n\n\n  /**\n   * Called when user clicked on a page with its index as parameter.\n   * Displays the data of that index from the data map, if the data does not exists,\n   * a callback is given to the parent to load more data.\n   * @param pageIndex \n   */\n  onPageClick(pageIndex : number) {\n\n    if (pageIndex >= this.pageNumbers.length) {\n      pageIndex = this.pageNumbers.length - 1\n    } else if (pageIndex < 0) {\n      pageIndex = 0\n    }\n    \n    this.prevPageIndex = this.currPageIndex\n    this.currPageIndex = pageIndex \n\n    if (this.slctAllBox) {\n      this.slctAllBox.checked = this.selAllMap[this.currPageIndex] || false\n    }\n  \n    //Handling page numbers change\n    if (this.pageNumbers.length > 5) this.updatePageNumbers(pageIndex)\n        \n    //Handling data change\n    if (this.dataMap[this.currPageIndex]) {\n      this.dataToDisplay = this.dataMap[pageIndex]\n    } else {      \n      this.loadMoreData.emit(pageIndex * this.tableConfig.dispRows)\n    } \n  }  \n  \n\n  /**\n   * Updates the table data with new data, an optional parameter currentIndex should\n   * be sent as '0' inorder to clear the refresh the table.\n   * @param data \n   * @param currentIndex\n   * @param totalRecords \n   */\n  updateData(data : Object[], currentIndex ?: number, totalRecords ?: number) {\n\n    if (currentIndex === 0) {\n      \n      this.currPageIndex = currentIndex\n      this.dataMap       = {}\n      this.createPageNumbers()\n    }\n\n    if (totalRecords) this.tableConfig.totalRecords = totalRecords\n    else if (!this.tableConfig.lazyLoad) this.tableConfig.totalRecords = data.length\n    this.createDataMap(data, this.currPageIndex)     \n  }\n\n\n  /**\n   * Method invoked by the parent in case of api loading failure which brings back\n   * the table to previous state\n   */\n  loadingFailed(lastAppliedFilters  ?: FilterItem[], isHzFilters ?: boolean) {\n    \n    this.currPageIndex = this.prevPageIndex\n    this.updatePageNumbers(this.currPageIndex)\n\n    if (lastAppliedFilters) {\n      const index       = isHzFilters ? 0 : 1,\n            filterInsts = this.filterCompChildren.toArray()\n\n      filterInsts[index].updateLastAppliedFilters(lastAppliedFilters)   \n    }\n  }\n\n\n  /**\n   * Sends callback to the parent when the user clicks on hyperlink\n   * @param rowData \n   * @param headerKey \n   */\n  cellClick(rowData : Object, header : TableHeader) {\n    \n    const buttonEvent : MuTableClickEvent = {\n      headerKey : header.colType === COL_TYPE.MULTI_LINE ? header.dataKeyArr[0] : header.dataKey,\n      rowIndex  : rowData['rowIndex']\n    } \n\n    if (header.navInfo) {\n      const navUrl  = JSON.parse(JSON.stringify(header.navInfo.navUrl)),\n            utility = new MuUtility()\n\n      header.navInfo.navUrl = utility.createNavUrl(navUrl, rowData)\n      buttonEvent.navInfo   = header.navInfo\n    } else {\n      buttonEvent.rowData = rowData\n    }\n\n    this.onCellClick.emit(buttonEvent)\n  }\n\n\n  /**\n   * performs search operation on the data available in the table only if table\n   * is not lazy loaded. In case of lazy loading a callback is given to parent.\n   * @param event \n   */\n  search(inputText ?: string) {\n    \n    this.dataMap     = {}\n    let filteredData = []\n\n    if (!inputText) {\n\n      filteredData = this.tableConfig.data\n    } else {\n\n      filteredData = this.tableConfig.data.filter(dataRow => {\n        if (this.filterFields.filter(header => dataRow[header] && dataRow[header].toString().toLowerCase()\n                                               .includes(inputText.toString().toLowerCase()))\n                                               .length) \n          return true\n      })\n    }\n\n    this.tableConfig.totalRecords = filteredData.length\n    this.createDataMap(filteredData, 0)\n    this.createPageNumbers()\n  }\n\n\n  /**\n   * Inserts a data row at the beginning of the table by clearing the datamap \n   * @param obj - data object that needs to be inserted\n   */\n  insertRow(obj : Object) {\n    \n    let newData = []\n    if (!this.tableConfig.lazyLoad) {\n\n      this.tableConfig.data.unshift(obj)\n      newData = this.tableConfig.data\n\n      //Need to verify\n      let newIndexes = {}\n      for (let index of Object.keys(this.selectedIndexes)) newIndexes[Number(index) + 1] = true\n      this.selectedIndexes = {}\n      this.selectedIndexes = newIndexes\n    } else {\n\n      let firstPageData = this.dataMap[0]      \n      firstPageData.unshift(obj)\n      firstPageData.pop()    \n      newData = firstPageData\n    }\n    \n    this.dataMap = {}\n    this.tableConfig.totalRecords++\n    this.createDataMap(newData, 0)\n    this.createPageNumbers()\n  }\n\n\n  /**\n   * Deletes a row of given row index assuming that the index which is to deleted is currently \n   * being displayed. Checks whether next page data exists in the map and reorders the sequence by \n   * shifting the data, if not a callback is sent to parent to load data for that index. \n   * @param rowIndex - index of the data which needs to be deleted\n   */\n  deleteRow(rowIndex : number) {\n    \n    if (!this.tableConfig.lazyLoad) {\n      this.tableConfig.data.splice(rowIndex, 1)\n      this.dataMap = {}\n      this.createDataMap(this.tableConfig.data, 0)\n      this.tableConfig.totalRecords--\n      this.createPageNumbers()\n\n      //Need to verify\n      let newIndexes = {}\n      for (let index of Object.keys(this.selectedIndexes)) newIndexes[Number(index) - 1] = true\n      this.selectedIndexes = {}\n      this.selectedIndexes = newIndexes\n      return\n    }\n\n    if (this.dataMap[this.currPageIndex + 1]) {\n\n      this.dataMap[this.currPageIndex].splice(rowIndex%this.tableConfig.dispRows, 1)\n      this.dataMap[this.currPageIndex].push(this.dataMap[this.currPageIndex + 1][0])\n    } else if(this.tableConfig.totalRecords <= this.tableConfig.dispRows) {\n\n      this.tableConfig.totalRecords--\n      this.dataMap[this.currPageIndex].splice(rowIndex%this.tableConfig.dispRows, 1)\n    } else {\n\n      this.loadMoreData.emit(this.currPageIndex * this.tableConfig.dispRows)\n    }\n    \n    if (this.tableConfig.enableSelect) this.selectedIndexes = { }\n    const keys = Object.keys(this.dataMap)\n    for (const key of keys) if (Number(key) > this.currPageIndex) delete this.dataMap[key]\n\n    this.changeDet.detectChanges()\n  }\n\n\n  /**\n   * Enables editing the data for editable coloumns when the user clicks on edit button.\n   * Sends callback to the parent with new values when user saves the data.\n   */\n  editRow(rowData : Object, isEdit : boolean) {\n    \n    this.selectedIndexes = {}\n    if (isEdit) {\n\n      this.selectedIndexes[rowData['rowIndex']] = true\n    } else {\n\n      const editEvent : MuTableEditEvent = {\n        editedValues : this.editForm.value,\n        rowData      : rowData,\n        rowIndex     : rowData['rowIndex']\n      }\n      this.onRowEdit.emit(editEvent)\n    }\n    this.editForm.reset()\n  }\n\n\n  /**\n   * updates the data of given rowIndex, usually called after editing the data.\n   * @param rowIndex \n   * @param data \n   */\n  updateRow(rowIndex : number, data : Object) {\n    this.dataMap[this.currPageIndex][rowIndex % this.tableConfig.dispRows] = data\n  }\n\n\n  /**\n   * Call back from filter component on applying filters that was directly passed\n   * back to the parent\n   * @param event \n   */\n  applyFilter(event : MuSelectedFilter[]) {\n    /*\n    If data table has all the data, filters are applied by the table itself \n    instead of making an api call\n    */\n    if (!this.tableConfig.lazyLoad) {\n      if (event && event[0]) this.search(event[0].value.toString())\n      else this.search()\n      return\n    }\n    this.changeDet.detectChanges()\n    this.selectedFilter.emit(event)\n  }\n\n  /**\n   * Method invoked by parent to unselect the rows\n   * @param rowIndexes\n   */\n  unselectIndexes(rowIndexes : number[]) {\n\n    for (const index of rowIndexes) this.selectedIndexes[index]  = false\n    if (this.slctAllBox) this.slctAllBox.checked = false\n    this.selAllMap[this.currPageIndex] = false\n  }\n\n  /**\n   * Method invoked by parent to unselect the rows\n   * @param rowIndexes\n   */\n  downloadTableData() { }\n\n  getEditedRows() : Object[] {\n    let editedRows = []\n    Object.keys(this.dataMap).forEach(index => {\n      this.dataMap[index].forEach(rowObject => {\n        editedRows.push(rowObject)\n      })\n    })\n    return editedRows\n  }\n\n  /**\n   * Method invoked by parent to download the records in XLSX, CSV or XLS format\n   * @param rowIndexes\n   */\n\n  onDownloadClick() {\n    this.menuTrigger.closeMenu()\n\n    if (this.tableConfig.downloadFormats.length === 1) {\n      this.onSelectingFormat(this.tableConfig.downloadFormats[0])\n    } else {\n      this.menuTrigger.openMenu()\n    }\n  }\n\n  onSelectingFormat(fileFormat : string) {\n    this.onDownload.emit(fileFormat)\n  }\n\n}\n","import { Component, \n         Inject,\n         Output,\n         EventEmitter,\n         Input\n        }                         from '@angular/core'\nimport { RunContextBrowser } from '../../../rc-browser'\n\nexport enum KEYBOARD_MODE {\n  NORMAL    = 'NORMAL',\n  SHOW_DOT  = 'SHOW_DOT'\n}\n\nexport enum KEY_TYPE {\n  NUMBER  = 'NUMBER',\n  BACK    = 'BACK',\n  DONE    = 'DONE',\n  DOT     = 'DOT'\n}\n\nexport interface KeyPressData {\n  keyType : KEY_TYPE\n  key     : string\n}\n\n@Component({\n  selector    : 'keypad',\n  templateUrl : './keypad.component.html',\n  styleUrls   : ['./keypad.component.scss']\n})\nexport class KeypadComponent {\n\n  @Input('mode') mode : KEYBOARD_MODE\n  @Output('keyPress')   keyPress  = new EventEmitter<KeyPressData>()\n\n  KEYBOARD_MODE = KEYBOARD_MODE\n  \n  constructor(@Inject('RunContext') public rc : RunContextBrowser) { }\n\n  ngOnInit() {\n    if(!this.mode) this.mode = KEYBOARD_MODE.NORMAL\n  }\n\n  keyClick(inputNum: string) {\n    const data : KeyPressData = { key : inputNum, keyType : KEY_TYPE.NUMBER } \n    this.keyPress.emit(data)\n  }\n\n  onKeyBoardBack() {\n    const data : KeyPressData = { key : null, keyType : KEY_TYPE.BACK } \n    this.keyPress.emit(data)\n  }\n\n  onKeyBoardOk() {\n    const data : KeyPressData = { key : null, keyType : KEY_TYPE.DONE } \n    this.keyPress.emit(data)\n  }\n\n  onKeyBoardDot() {\n    const data : KeyPressData = { key : '.', keyType : KEY_TYPE.DOT } \n    this.keyPress.emit(data)\n  }\n\n}\n","import { Component, \n         OnInit,\n         Inject\n       }                      from '@angular/core'\nimport { RunContextBrowser } from '../../../rc-browser'\n\n@Component({\n  selector    : 'page-not-found',\n  templateUrl : './page-not-found.component.html',\n  styleUrls   : ['./page-not-found.component.scss']\n})\n\nexport class PageNotFoundComponent implements OnInit {\n\n  constructor(@Inject('RunContext') protected rc  : RunContextBrowser) { }\n\n  ngOnInit() {\n\n  }\n\n  /*=====================================================================\n                                  HTML\n  =====================================================================*/\n\n  onHomeClick() {\n    // this.rc.uiRouter.rootNavigate(ComponentRoute.LandingProxy)\n  }\n\n}\n","/*------------------------------------------------------------------------------\n   About      : <Write about the file here>\n   \n   Created on : Wed May 20 2020\n   Author     : Aditya Baddur\n   \n   Copyright (c) 2020 Obopay. All rights reserved.\n\n   Fails under following condition : \n   1. Quick inputs.\n   2. If user holds on to the key.\n------------------------------------------------------------------------------*/\n\nimport { Directive,\n         Output,\n         EventEmitter,\n         ElementRef,\n         Renderer2,\n         Input,\n         NgZone\n       }                            from '@angular/core'\nimport { NcMaxLengthDirective }     from './nc-maxlength.directive'\n\nconst KEY_UP    = 'keyup',\n      BACKSPACE = 'Backspace'\n\n\nexport interface MaskingParams {\n  maxLength        : number\n  maskedLength     : number\n  maskWith        ?: string\n  startSkipCount  ?: number\n  endSkipCount    ?: number\n}\n\n@Directive({\n  selector: '[maskingValue]'\n})\n\nexport class MaskingValueDirective extends NcMaxLengthDirective {\n\n  @Input('maskingValue') maskingParams : MaskingParams\n\n  @Output() maskedValue : EventEmitter<string> = new EventEmitter<string>()\n\n  private updatedString : string = ''\n\n  constructor(protected element   : ElementRef,\n              protected renderer  : Renderer2,\n              protected ngZone    : NgZone) {\n\n    super(element, renderer, ngZone)\n    window['mask']  = this\n  }\n\n  ngOnInit() {   \n    this.maxLength = this.maskingParams.maxLength\n  }\n  \n  ngAfterViewInit() {\n\n\n    const clonedInputNode = this.element.nativeElement.cloneNode(true),\n          parentElem      = this.element.nativeElement.parentElement\n          \n    this.renderer.appendChild(parentElem, clonedInputNode) \n    this.element.nativeElement.hidden = true\n\n    super.ngAfterViewInit()\n\n    if (this.element.nativeElement.value) {\n      const value         = this.element.nativeElement.value,\n            maskingParams = this.maskingParams,\n            startSkipCount  = maskingParams.startSkipCount || 0,\n            totalSkipCount  = startSkipCount + (maskingParams.endSkipCount   || 0)\n\n      this.value(value, startSkipCount, totalSkipCount)\n      this.updatedString  = value\n    }\n\n\n    this.renderer.listen(this.element.nativeElement.nextSibling, KEY_UP, this.handelEvent.bind(this))\n  }\n\n  /*=====================================================================\n                              PRIVATE\n  =====================================================================*/\n  private value(value : string, startSkipCount : number, totalSkipCount : number) {\n\n    value = value.substring(0, startSkipCount) \n            + value.substring(startSkipCount, totalSkipCount+ 1).replace(/\\w+/g, this.maskingParams.maskWith || '*') \n            + value.substring(totalSkipCount + 1)\n  \n    return value\n\n  }\n\n  private handelEvent(event : any) {\n\n    super.handleEvent(event)\n    \n    let startSkipCount  = this.maskingParams.startSkipCount || 0,\n        endSkipCount    = this.maskingParams.endSkipCount   || 0,\n        value           = event.srcElement.value,\n        totalSkipCount  = startSkipCount  + endSkipCount\n        length          = value.length\n\n    const isBackPressed = event.key === BACKSPACE\n\n    if (!isBackPressed && this.updatedString.length === this.maskingParams.maxLength) {\n      return\n    }\n\n\n    if (isBackPressed) {\n      this.updatedString  = this.updatedString.substr(0, length)\n      return\n    }\n\n    if (length <= startSkipCount) {\n      this.updatedString  = value.substr(0, startSkipCount)\n    }\n\n    if (length > startSkipCount && length <= totalSkipCount) {\n      this.updatedString  = this.updatedString.substr(0) + \n                            value.substr(this.updatedString.length, length)\n    }\n\n    if (length > totalSkipCount && length <= this.maskingParams.maxLength) {\n      this.updatedString  = this.updatedString.substr(0) + value.substr(length - 1)\n    }\n\n    \n    event.srcElement.value  = this.value(value, startSkipCount, totalSkipCount)\n    \n    this.element.nativeElement.value = this.updatedString\n    this.maskedValue.emit(this.updatedString)\n\n  }\n\n}\n","import { NgModule,\n         ModuleWithProviders\n       }                                    from '@angular/core'\nimport { FormsModule,\n         ReactiveFormsModule\n       }                                    from '@angular/forms'\nimport { CommonModule }                     from '@angular/common'\nimport { FlexLayoutModule }                 from '@angular/flex-layout'\nimport { MatRippleModule }                  from '@angular/material/core'\n\nimport { MatCheckboxModule }                from '@angular/material/checkbox'\nimport { MatDatepickerModule }              from '@angular/material/datepicker'\nimport { MatFormFieldModule }               from '@angular/material/form-field'\nimport { MatInputModule }                   from '@angular/material/input'\nimport { MatSelectModule }                  from '@angular/material/select'\nimport { MatAutocompleteModule }            from '@angular/material/autocomplete'\nimport { MatRadioModule }                   from '@angular/material/radio'\nimport { MatProgressBarModule }             from '@angular/material/progress-bar'\nimport { MatSliderModule }                  from '@angular/material/slider'\nimport { MatSlideToggleModule }             from '@angular/material/slide-toggle'\nimport { MatButtonToggleModule }            from '@angular/material/button-toggle'\nimport { MatMenuModule }                    from '@angular/material/menu'\nimport { MatCardModule }                    from '@angular/material/card'\nimport { MatDividerModule }                 from '@angular/material/divider'\n\n\n\nimport { MuComponentsRoutingModule }        from './ui/mu-components/mu-components-routing.module'\n\nimport { TRANSLATION_PROVIDERS }            from './ui/mu-components/translate/translations'\nimport { TranslatePipe }                    from './ui/mu-components/translate/translate.pipe'\n\nimport { CustomBreakPointsProvider }        from './ui/mu-components/custom-breakpoints'\nimport { NcAutoFocusDirective }             from './ui/mu-components/directives/nc-autofocus.directive'\nimport { NcMaxLengthDirective }             from './ui/mu-components/directives/nc-maxlength.directive'\nimport { LongPressDirective }               from './ui/mu-components/directives/longpress.directive'\nimport { NcStyleClassDirective }            from './ui/mu-components/directives/nc-style-class.directive'\nimport { AdjustElementsDirective }          from './ui/mu-components/directives/adjust-elements.directive'\nimport { NcFallbackCharDirective }          from './ui/mu-components/directives/nc-fallback-char.directive'\nimport { KeyboardDirective }                from './ui/mu-components/directives/keyboard.directive'\nimport { NextInpFocusDirective }            from './ui/mu-components/directives/next-inp-focus.directive'\nimport { NcAllowSingleClickDirective }      from './ui/mu-components/directives/nc-allow-single-click.directive'\nimport { NcImgFallbackDirective }           from './ui/mu-components/directives/nc-img-fallback.directive'\nimport { ValidateImgDirective }             from './ui/mu-components/directives/validate-img.directive'\n\n\n\n\nimport { GenericPipe }                      from './ui/mu-components/pipes/generic.pipe'\nimport { ExtractMobileNoPipe }              from './ui/mu-components/pipes/extract-mobile-no.pipe'\nimport { CurrencyPipe }                     from './ui/mu-components/pipes/currency.pipe'\n\nimport { DropDownMultiSelectComponent }     from './ui/mu-components/drop-down-multi-select/drop-down-multi-select.component'\nimport { BottomInComponent }                from './ui/mu-components/bottom-in/bottom-in.component'\nimport { ModalPopupComponent }              from './ui/mu-components/modal-popup/modal-popup.component'\nimport { LoadingComponent }                 from './ui/mu-components/loading/loading.component'\nimport { LoadingErrorComponent }            from './ui/mu-components/loading/loading-error/loading-error.component'\nimport { LoadingOverlayComponent }          from './ui/mu-components/loading/loading-overlay/loading-overlay.component'\nimport { ToastComponent }                   from './ui/mu-components/toast/toast.component'\nimport { InfiniteScrollComponent }          from './ui/mu-components/infinite-scroll/infinite-scroll.component'\nimport { FilterComponent }                  from './ui/mu-components/filter/filter.component'\nimport { InputContainerComponent}           from './ui/mu-components/input-container/input-container.component'\nimport { DialerComponent }                  from './ui/mu-components/dialer/dialer.component'\nimport { MuFormContainerComponent }         from './ui/mu-components/mu-form-container/mu-form-container.component'\n\n\nimport { AlertDialogComponent }             from './ui/mu-components//alert-dialog/alert-dialog.component'\nimport { MuDataTableComponent }             from './ui/mu-components//mu-data-table/mu-data-table.component'\nimport { FileUploadComponent }              from './ui/mu-components//file-upload/file-upload.component'\nimport { KeypadComponent }                  from './ui/mu-components//keypad/keypad.component'\nimport { PageNotFoundComponent }            from './ui/mu-components//page-not-found/page-not-found.component'\nimport { MaskingValueDirective }            from './ui/mu-components//directives/masking-value.directive'\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    FlexLayoutModule,\n    MuComponentsRoutingModule,\n    MatFormFieldModule,\n    MatDatepickerModule,\n    MatInputModule,\n    MatSelectModule,\n    MatAutocompleteModule,\n    MatCheckboxModule,\n    MatProgressBarModule,\n    MatRadioModule,\n    MatSliderModule,\n    MatSlideToggleModule,\n    MatButtonToggleModule,\n    MatMenuModule,\n    MatCardModule,\n    MatRippleModule,\n    MatDividerModule\n  ],\n\n  declarations: [\n    BottomInComponent,\n    ModalPopupComponent,\n    LoadingComponent,\n    LoadingErrorComponent,\n    LoadingOverlayComponent,\n    ToastComponent,\n    AlertDialogComponent,\n    InfiniteScrollComponent,\n    FilterComponent,\n    InputContainerComponent,\n    MuDataTableComponent,\n    DialerComponent,\n    FileUploadComponent,\n    MuFormContainerComponent,\n    PageNotFoundComponent,\n    DropDownMultiSelectComponent,\n\n    NcAutoFocusDirective,\n    NcMaxLengthDirective,\n    LongPressDirective,\n    NcStyleClassDirective,\n    NextInpFocusDirective,\n    AdjustElementsDirective,\n    NcFallbackCharDirective,\n    KeyboardDirective,\n    MaskingValueDirective,\n    NcAllowSingleClickDirective,\n    NcImgFallbackDirective,\n    ValidateImgDirective,\n\n    TranslatePipe,\n    GenericPipe,\n    CurrencyPipe,\n    KeypadComponent,\n    ExtractMobileNoPipe\n  ],\n\n  entryComponents : [\n    AlertDialogComponent,\n    KeypadComponent\n  ],\n\n  exports: [\n    BottomInComponent,\n    ModalPopupComponent,\n    LoadingComponent,\n    LoadingErrorComponent,\n    LoadingOverlayComponent,\n    ToastComponent,\n    InfiniteScrollComponent,\n    FilterComponent,\n    InputContainerComponent,\n    MuDataTableComponent,\n    DialerComponent,\n    KeypadComponent,\n    MuFormContainerComponent,\n    PageNotFoundComponent,\n    DropDownMultiSelectComponent,\n\n    NcAutoFocusDirective,\n    NcMaxLengthDirective,\n    LongPressDirective,\n    NcStyleClassDirective,\n    NextInpFocusDirective,\n    AdjustElementsDirective,\n    NcFallbackCharDirective,\n    KeyboardDirective,\n    MaskingValueDirective,\n    NcAllowSingleClickDirective,\n    NcImgFallbackDirective,\n    ValidateImgDirective,\n\n    TranslatePipe,\n    GenericPipe,\n    ExtractMobileNoPipe,\n    CurrencyPipe,\n\n\n    //Angular imports\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    FlexLayoutModule,\n    MatCheckboxModule,\n    MatDatepickerModule,\n    MatFormFieldModule,\n    MatInputModule,\n    MatSelectModule,\n    MatAutocompleteModule,\n    MatRadioModule,\n    MatProgressBarModule,\n    MatSliderModule,\n    MatSlideToggleModule,\n    MatButtonToggleModule,\n    MatMenuModule,\n    MatCardModule,\n    MatDividerModule\n  ],\n\n\n  providers: [\n    CustomBreakPointsProvider,\n    TRANSLATION_PROVIDERS,\n    // {provide: HAMMER_GESTURE_CONFIG, useClass: GestureConfig}\n  ]\n})\n\n\nexport class MuBrowserModule {\n  static forRoot(): ModuleWithProviders<any> {\n    return {\n      ngModule: MuBrowserModule,\n      providers: [\n        TRANSLATION_PROVIDERS,\n        // {provide: HAMMER_GESTURE_CONFIG, useClass: GestureConfig}\n      ]\n    }\n  }\n}\n","/*------------------------------------------------------------------------------\n   About      : <Write about the file here>\n   \n   Created on : Mon Jun 26 2017\n   Author     : Raghvendra Varma\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { \n         Mubble,\n         ConnectionInfo,\n         WireObject,\n         DataLeader,\n         Encoder,\n         WssProviderConfig\n       }                      from '@mubble/core'\nimport { RunContextBrowser }  from '../rc-browser'\nimport { TextEncDec }         from './text-enc-dec'\n\nconst ASYM_ALGO = {name: 'RSA-OAEP', hash: {name: 'SHA-1'}}\n\nlet arShortCode : Uint8Array\nlet arUniqueId  : Uint8Array\nlet pwc         : PakoWorkerClient\n\nexport class EncryptionBrowser {\n\n  private syncKey: any // can be sent as null by server\n  private symAlgo     \n\n  constructor(private rc: RunContextBrowser, \n              private ci: ConnectionInfo, \n              private rsaPubKey: Uint8Array,\n              private iv : Uint8Array) {\n\n    rc.setupLogger(this, 'EncryptionBrowser')\n\n    this.symAlgo = { name: \"AES-CBC\", length: 256, iv: this.iv }\n\n    if (!arShortCode) this.extractShortCode(rc, ci.shortName)\n    if (!arUniqueId)  this.extractUniqueId(rc, ci.customData.jsVersion)\n    if (!pwc)         pwc = new PakoWorkerClient(rc)\n  }\n\n  async init() {\n    this.syncKey = await crypto.subtle.generateKey(this.symAlgo, true, ['encrypt', 'decrypt'])\n  }\n\n  async encodeHeader(wsConfig: WssProviderConfig): Promise<string> {\n\n    const now           = Date.now() * 1000, // microseconds\n          tsBuffer      = await this.encrypt(this.strToUnit8Ar(now.toString())),\n          encTs         = new Uint8Array(tsBuffer) as any,\n          tsB64         = btoa(String.fromCharCode(...encTs))\n\n    const keyBuffer     = await this.encryptSymKey(),\n          encKey        = new Uint8Array(keyBuffer) as any,\n          keyB64        = btoa(String.fromCharCode(...encKey))\n\n    const configBuffer  = await this.encrypt(this.strToUnit8Ar(JSON.stringify(wsConfig))),\n          encConfig     = new Uint8Array(configBuffer) as any,\n          configB64     = btoa(String.fromCharCode(...encConfig))\n\n    return `${tsB64}${keyB64}${configB64}`\n  }\n\n  private async encryptSymKey() {\n\n    /*\n      this.ci.syncKey: Sym key that is generated by client and then changed by server\n      this.syncKey: Public key that is used to protect this.ci.syncKey\n    */\n   const buffer = await crypto.subtle.exportKey('raw', this.syncKey),\n         key    = await crypto.subtle.importKey('spki', this.rsaPubKey, ASYM_ALGO , false, ['encrypt']),\n         encKey = await crypto.subtle.encrypt(ASYM_ALGO, key, buffer)\n    \n    return encKey\n  }\n\n  private async encrypt(ar: Uint8Array): Promise<ArrayBuffer> {\n    return await crypto.subtle.encrypt(this.symAlgo, this.syncKey, ar)\n  }\n\n  private async decrypt(ar: Uint8Array): Promise<ArrayBuffer> {\n    return await crypto.subtle.decrypt(this.symAlgo, this.syncKey, ar)\n  }\n\n  private getArrayBuffer(ar: Uint8Array) {\n    if (ar.byteOffset === 0 && ar.byteLength === ar.buffer.byteLength) return ar.buffer as ArrayBuffer\n    return ar.buffer.slice(ar.byteOffset, ar.byteOffset + ar.byteLength) as ArrayBuffer\n  }\n\n  async encodeBody(data: WireObject[]): Promise<Uint8Array> {\n\n    const str = this.stringifyWireObjects(data)\n    let   firstPassArray,\n          leader  = -1,\n          deflate = false\n\n    if (str.length > Encoder.MIN_SIZE_TO_COMPRESS) {\n      const ar = await pwc.deflate(str)\n      if (ar.length < str.length) {\n        firstPassArray = ar\n        deflate        = true\n      }\n    }\n\n    if (!firstPassArray) {\n      firstPassArray = this.strToUnit8Ar(str)\n    }\n\n    const secondPassArray = new Uint8Array(await this.encrypt(firstPassArray)),\n          arOut           = new Uint8Array(secondPassArray.byteLength + 1)\n\n    leader = deflate ? DataLeader.ENC_DEF_JSON : DataLeader.ENC_JSON\n\n    arOut.set([leader])\n    arOut.set(secondPassArray, 1)\n\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'encodeBody', {\n      first       : data[0].name,\n      messages    : data.length, \n      json        : str.length, \n      wire        : arOut.byteLength,\n      encrypted   : true,\n      compressed  : deflate,\n    })\n    return arOut\n  }\n\n  private stringifyWireObjects(objects: WireObject[]) {\n\n    const strArray = objects.map(wm => wm.stringify())\n    return `[${strArray.join(', ')}]`\n  }\n\n  async decodeBody(data: ArrayBuffer): Promise<[WireObject]> {\n\n    const inAr    = new Uint8Array(data, 1),\n          ar      = new Uint8Array(data, 0, 1),\n          leader  = ar[0],\n          temp    = new Uint8Array(await this.decrypt(inAr))\n    \n    let arData, index, decLen, deflated = false\n\n    if (leader === DataLeader.BINARY) {\n\n      const newLineCode = '\\n'.charCodeAt(0)\n      for (index = 0; index < temp.length; index++) if (temp[index] === newLineCode) break\n\n      const jsonStr = String.fromCharCode(...temp.slice(0, index) as any),\n            wo      = WireObject.getWireObject(JSON.parse(jsonStr)) as WireObject,\n            outAr   = temp.slice(index + 1)\n            \n      wo.data = outAr\n      arData  = [wo]\n      decLen  = outAr.byteLength\n\n    } else {\n\n      deflated        = leader === DataLeader.DEF_JSON || leader === DataLeader.ENC_DEF_JSON\n      const inJsonStr = deflated ? await pwc.inflate(temp) : this.uint8ArToStr(temp),\n            inJson    = JSON.parse(inJsonStr)\n\n      decLen = inJsonStr.length\n      arData = Array.isArray(inJson) ? inJson: [inJsonStr]\n      \n      for (index = 0; index < arData.length; index++) {\n        arData[index] = WireObject.getWireObject(JSON.parse(arData[index]))\n      }\n    }\n  \n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'decodeBody', {\n      first       : arData[0].name, \n      messages    : arData.length, \n      wire        : data.byteLength, \n      message     : decLen,\n      encrypted   : leader === DataLeader.ENC_JSON || leader === DataLeader.ENC_BINARY || leader === DataLeader.ENC_DEF_JSON,compressed  : leader === DataLeader.BINARY ? 'binary' : deflated\n    })\n\n    return arData as [WireObject]\n  }\n\n  public async setNewKey(syncKey: string) {\n\n    const arEncNewKey = this.binToUnit8Ar(atob(syncKey))\n    this.syncKey      = await crypto.subtle.importKey('raw', arEncNewKey, this.symAlgo, true, ['encrypt', 'decrypt'])\n  }\n\n  async getSyncKeyB64(): Promise<string> {\n\n    const buffer = await crypto.subtle.exportKey('raw', this.syncKey),\n          arr    = new Uint8Array(buffer) as any\n\n    return btoa(String.fromCharCode(...arr))   \n  }\n\n  binToUnit8Ar(binStr : string): Uint8Array {\n    const cls:any     = Uint8Array\n    return cls.from(binStr, (c : any) => c.charCodeAt(0))\n  }\n\n  strToUnit8Ar(str : string): Uint8Array {\n    const TextEncoder = (window as any).TextEncoder\n    return TextEncoder ?  new TextEncoder('utf-8').encode(str) : new TextEncDec('utf-8').encode(str)\n  }\n\n  uint8ArToStr(uar : Uint8Array): string {\n    const TextDecoder = (window as any).TextDecoder\n    return TextDecoder ? new TextDecoder('utf-8').decode(uar) : new TextEncDec('utf-8').decode(uar)\n  }\n\n  private extractShortCode(rc: RunContextBrowser, code: string) {\n\n    rc.isAssert() && rc.assert(rc.getName(this), code.length <= 4)\n    arShortCode = new Uint8Array(4)\n    \n    for (let index = 0; index < code.length; index++) {\n      const str = code.charAt(index)\n      rc.isAssert() && rc.assert(rc.getName(this), str.match(/[a-zA-Z0-9]/))\n      arShortCode[index] = str.charCodeAt(0) - 40\n    }\n  }\n      \n  \n  private extractUniqueId(rc: RunContextBrowser, id: string) {\n\n    let ar = id.split('.').map(i => Number(i))\n\n    if (ar.length > 1) {\n\n      rc.isAssert() && rc.assert(rc.getName(this), ar.length === 3 && \n        !isNaN(ar[0]) && !isNaN(ar[1])  && !isNaN(ar[2]))\n\n    } else {\n\n      let num = Number(ar[0])\n      rc.isAssert() && rc.assert(rc.getName(this), !isNaN(num) && num <= 999999)\n\n      ar[2] = num % 100\n      num   = Math.floor(num / 100)\n\n      ar[1] = num % 100\n      ar[0] = Math.floor(num / 100)\n\n    }\n    arUniqueId = Uint8Array.from(ar)\n  }\n}\n\nclass AsyncRequest {\n\n  static nextRequestId: number = 1\n\n  requestId       : number\n  promise         : Promise<any>\n  resolve         : (...params: any[]) => void\n  reject          : () => void\n\n  constructor(public apiName: string) {\n\n    this.requestId  = AsyncRequest.nextRequestId++\n\n    this.promise    = new Promise((resolve, reject) => {\n      this.resolve  = resolve\n      this.reject   = reject\n    })\n  }\n}\n\nclass PakoWorkerClient {\n\n  private worker: Worker\n  private reqMap: Mubble.uObject<AsyncRequest> = {}\n\n  constructor(private rc: RunContextBrowser) {\n    const worker = this.worker = new Worker('js/pwc.js')\n    worker.onmessage = this.onMessage.bind(this)\n  }\n\n  async inflate(inU8Array: Uint8Array): Promise<string> {\n    return await this.sendMessage('inflate', inU8Array, {to: 'string'}) as string\n  }\n\n  async deflate(str: string): Promise<Uint8Array> {\n    return await this.sendMessage('deflate', str) as Uint8Array\n  }\n\n  private sendMessage(apiName : string, ...params : Array<any>) {\n    const asyncRequest = new AsyncRequest(apiName)\n    this.reqMap[asyncRequest.requestId] = asyncRequest\n    this.worker.postMessage([asyncRequest.requestId, apiName, ...params])\n    return asyncRequest.promise\n  }\n\n  onMessage(event : MessageEvent) {\n    const [reqId, ...resp] = event.data\n    const asyncRequest = this.reqMap[reqId]\n    this.rc.isAssert() && this.rc.assert(this.rc.getName(this), asyncRequest)\n    delete this.reqMap[reqId]\n    asyncRequest.resolve(...resp)\n  }\n\n}\n\n","const utf8Encodings = ['utf8', 'utf-8']\n\nexport class TextEncDec {\n\n  constructor(encFormat : string) {\n\n    if (utf8Encodings.indexOf(encFormat) < 0 && typeof encFormat !== 'undefined' && encFormat != null) {\n      throw new RangeError('Invalid encoding type. Only utf-8 is supported')\n    } \n\n  }\n\n  encode(str : string) {\n\n    if (typeof str !== 'string') {\n      throw new TypeError('passed argument must be of tye string')\n    }\n\n    const binstr  = unescape(encodeURIComponent(str)),\n          uar     = new Uint8Array(binstr.length),\n          split   = binstr.split('')\n\n    for (let i = 0; i < split.length; i++) {\n      uar[i] = split[i].charCodeAt(0)\n    }\n    return uar\n  }\n\n  decode(uar : Uint8Array) {\n\n    if (typeof uar === 'undefined') {\n      return ''\n    }\n\n    if (!ArrayBuffer.isView(uar)) {\n      throw new TypeError('passed argument must be an array buffer view')\n    } else {\n      const arr     = new Uint8Array(uar.buffer, uar.byteOffset, uar.byteLength),\n            charArr = new Array(arr.length)\n\n      for (let i = 0; i < arr.length; i++) {\n        charArr[i] = String.fromCharCode(arr[i])\n      }\n\n      return decodeURIComponent(escape(charArr.join('')))\n    }\n  }\n}\n","/*------------------------------------------------------------------------------\n   About      : <Write about the file here>\n   \n   Created on : Mon Apr 17 2017\n   Author     : Raghvendra Varma\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n\n  Ping: Ping indicates to the server that client is up and kicking.... \n  Websocket carries ephemeral events too. Design of Ping also helps in carrying \n  ephemeral events. This is the reason we don't tick timer when we receive \n  messages from the server\n\n------------------------------------------------------------------------------*/\n\nimport { \n         ConnectionInfo,\n         XmnError,\n         SYS_EVENT,\n         WireEvent,\n         WireEphEvent,\n         WireSysEvent,\n         ConnectionError,\n         TimerInstance,\n         WireObject,\n         XmnProvider,\n         WssProviderConfig,\n         HANDSHAKE,\n         WIRE_TYPE,\n         WireRequest\n       }                                from '@mubble/core'\nimport { RunContextBrowser }            from '../rc-browser'\nimport { EncryptionBrowser }            from './enc-provider-browser'\nimport { XmnRouterBase }                from './xmn-router-base'\n\nconst PING_SECS             = 29,\n      TOLERANCE_SECS        = 5,\n      RFRSH_LAST_REQ_SECS   = 60\n\nexport class WsBrowser implements XmnProvider {\n\n  private ws                  : WebSocket\n  private encProvider         : EncryptionBrowser\n  private timerPing           : TimerInstance\n  private lastRequestTimer    : TimerInstance\n  private wsProviderConfig    : WssProviderConfig\n  private pendingMessage      : WireObject[] | WireObject\n  \n  private socketCreateTs      : number          = 0\n  private lastMessageTs       : number          = 0\n  private sending             : boolean         = false\n  private configured          : boolean         = false\n  private connExpired         : boolean         = false\n  private lastRequestTs       : number          = 0\n\n  private ephemeralEvents     : WireEvent[]     = []\n  private sessionTimedoutSecs : number    \n\n  constructor(private rc     : RunContextBrowser, \n              private ci     : ConnectionInfo,\n              private router : XmnRouterBase) {\n\n    rc.setupLogger(this, 'WsBrowser')\n    this.timerPing        = rc.timer.register('ws-ping', this.cbTimerPing.bind(this))\n    this.lastRequestTimer = rc.timer.register('ws-request', this.cbRequestTimer.bind(this))\n\n    rc.isDebug() && rc.debug(rc.getName(this), 'constructor')\n\n  }\n\n  private uiArToB64(ar : any) {\n    return btoa(String.fromCharCode(...ar))\n  }\n\n  public sendEphemeralEvent(event: WireEphEvent) {\n\n    this.rc.isAssert() && this.rc.assert(this.rc.getName(this), this.ci.provider)\n\n    if (this.ephemeralEvents.length >= 20) {\n      this.rc.isWarn() && this.rc.warn(this.rc.getName(this), 'Too many ephemeralEvents. Sizing to 20')\n      while (this.ephemeralEvents.length >= 20) this.ephemeralEvents.shift()\n    }\n    this.ephemeralEvents.push(event)\n  }\n\n  public send(rc: RunContextBrowser, data: WireObject[] | WireObject): string | null {\n\n    const ws = this.ws\n\n    if ( this.sending || \n        (ws && (ws.readyState !== WebSocket.OPEN || !this.configured || ws.bufferedAmount)) ) {\n\n      rc.isStatus() && rc.status(rc.getName(this), 'Websocket is not ready right now', {\n        anotherSendInProgress : this.sending,\n        configured            : this.configured,\n        readyState            : this.ws ? this.ws.readyState : 'to be created',\n        bufferedAmount        : this.ws.bufferedAmount\n      })\n\n      return XmnError._NotReady\n    }\n\n    const objects: WireObject[] = Array.isArray(data) ? data : [data] \n\n    if (this.ephemeralEvents.length) {\n      objects.push(...this.ephemeralEvents)\n      this.ephemeralEvents.length = 0\n    }\n    this.sendInternal(rc, objects)\n    return null\n  }\n\n  public requestClose() {\n    const ws  = this.ws\n    if(ws && ws.readyState !== WebSocket.CLOSED)\n      ws.close()\n  }\n\n  private async sendInternal(rc: RunContextBrowser, data: WireObject[]) {\n\n    let messageBody\n    this.sending = true\n\n    if (!this.ws) {\n\n      this.pendingMessage = data\n\n      if (!this.encProvider) {\n        this.encProvider = new EncryptionBrowser(rc, this.ci, \n          this.router.getPubKey(), this.router.getEncIV())\n        await this.encProvider.init()\n      }\n\n      if (!this.wsProviderConfig) {\n        this.wsProviderConfig = {\n          pingSecs        : PING_SECS,\n          maxOpenSecs     : this.router.getMaxOpenSecs(),\n          toleranceSecs   : TOLERANCE_SECS,\n          key             : await this.encProvider.getSyncKeyB64(),\n          custom          : this.ci.customData\n        }\n      }\n\n      const url     = `${this.ci.port === 443 || this.router.runAlwaysAsSecure(this.rc) \n                       ? 'wss' : 'ws'}://${this.ci.host}:${this.ci.port}/${HANDSHAKE}/${this.ci.protocolVersion}/${this.ci.shortName}/`,\n            header  = await this.encProvider.encodeHeader(this.wsProviderConfig)\n      \n      messageBody = encodeURIComponent(header)\n\n      this.ws  = new WebSocket(url + messageBody)\n      this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'Opened socket with url', url + messageBody)\n  \n      this.ws.binaryType = 'arraybuffer'\n      \n      this.ws.onopen     = this.onOpen.bind(this)\n      this.ws.onmessage  = this.onMessage.bind(this)\n      this.ws.onclose    = this.onClose.bind(this)\n      this.ws.onerror    = this.onError.bind(this)\n  \n      this.socketCreateTs = Date.now()\n        \n    } else {\n      \n      if (!this.isConnWithinPing(Date.now())) { // Connection expired\n        rc.isDebug() && rc.debug(rc.getName(this), `Connection expired..requesting Socket close.`)\n        this.sending      = false\n        this.connExpired  = true\n        this.requestClose()\n        return\n      }\n      \n      messageBody = await this.encProvider.encodeBody(data)\n      this.ws.send(messageBody)\n\n      this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'Sent message', {msgLen: messageBody.length, \n        messages: data.length, firstMsg: data[0].name})  \n    }\n\n    const wireObjIsOfReq  = data.some(wireObject => { return wireObject.type === WIRE_TYPE.REQUEST })\n\n    if (wireObjIsOfReq && this.router.canStrtLastReqTimer(this.rc)) {\n      this.setLastReqTimer(rc)\n    }\n\n    this.setupTimer(rc)\n    this.sending = false\n  }\n\n  onOpen() {\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'onOpen() in', Date.now() - this.socketCreateTs, 'ms')\n    this.router.providerReady()\n  }\n\n  async onMessage(msgEvent: MessageEvent) {\n\n    const data = msgEvent.data\n    const messages = await this.encProvider.decodeBody(data)\n    await this.router.providerMessage(this.rc, messages)\n  }\n\n  onError(err: any) {\n    this.rc.isWarn() && this.rc.warn(this.rc.getName(this), 'Websocket onError()', err)\n    if (this.ci.provider) {\n      this.cleanup()\n      this.router.providerFailed()\n    }\n  }\n\n  onClose() {\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'Websocket onClose()')\n    if (this.ci.provider) {\n      this.cleanup()\n      this.router.providerFailed(this.connExpired ? XmnError._ConnectionExpired : null)\n    }\n  }\n\n  async processSysEvent(rc: RunContextBrowser, se: WireSysEvent) {\n\n    if (se.name === SYS_EVENT.WS_PROVIDER_CONFIG) {\n\n      const config: WssProviderConfig = se.data as WssProviderConfig,\n            msPingSecs = config.pingSecs      \n\n      this.rc.isAssert() && this.rc.assert(this.rc.getName(this), \n          msPingSecs && Number.isInteger(msPingSecs), msPingSecs)\n\n      Object.assign(this.wsProviderConfig, config)\n      \n      if (config.key) await this.encProvider.setNewKey(config.key)\n\n      this.rc.isDebug() && this.rc.debug(this.rc.getName(this), \n        'First message in', Date.now() - this.socketCreateTs, 'ms')\n\n      this.configured = true\n      \n      if (this.pendingMessage) {\n        this.rc.isDebug() && this.rc.debug(this.rc.getName(this), `Sending Pending Message...`)\n        await this.send(this.rc, this.pendingMessage)\n        this.pendingMessage = null\n      }\n\n    } else if (se.name === SYS_EVENT.ERROR) {\n\n      const errMsg = se.data as ConnectionError\n      rc.isWarn() && rc.warn(rc.getName(this), 'processSysEvent' , errMsg)\n      if (this.ci.provider) {\n        this.cleanup()\n        this.router.providerFailed(errMsg.code)\n      }\n    }\n  }\n\n  private isConnWithinPing(requestTs: number) {\n\n    const wsConfig = this.wsProviderConfig,\n          pingTh   = this.lastMessageTs  + (wsConfig.pingSecs + wsConfig.toleranceSecs)    * 1000,\n          openTh   = this.socketCreateTs + (wsConfig.maxOpenSecs - wsConfig.toleranceSecs) * 1000\n\n    return requestTs < pingTh && requestTs < openTh\n  }\n\n  private async setLastReqTimer(rc: RunContextBrowser) {\n\n    this.lastRequestTs  = Date.now()\n    this.lastRequestTimer.tickAfter(RFRSH_LAST_REQ_SECS * 1000, true)\n\n\n    if (!this.sessionTimedoutSecs) {\n      this.sessionTimedoutSecs  = await this.router.getSessionTimeOutSecs(rc)\n    }\n\n  }\n\n  private setupTimer(rc: RunContextBrowser) {\n    \n    this.lastMessageTs = Date.now()\n    this.timerPing.tickAfter(this.wsProviderConfig.pingSecs * 1000, true)\n  }\n\n  private cbRequestTimer() {\n\n    if (!this.ci.provider) return 0\n\n    const now   = Date.now(),\n          diff  = now - this.lastRequestTs\n\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), `cbRequestTimer ${diff}, ${this.sessionTimedoutSecs}`)\n\n    if (diff >= (this.sessionTimedoutSecs * 1000)) {\n      this.rc.isDebug() && this.rc.debug(this.rc.getName(this), `Session timed out. Closing session`)\n      this.router.sessionTimedOut(this.rc)\n      this.requestClose()\n      return RFRSH_LAST_REQ_SECS * 1000\n    }\n\n    return diff\n  }\n\n  private cbTimerPing(): number {\n\n    if (!this.ci.provider) return 0\n\n    const now   = Date.now(),\n          diff  = this.lastMessageTs + this.wsProviderConfig.pingSecs * 1000 - now\n\n    if (diff <= 0) {\n      this.send(this.rc, [new WireSysEvent(SYS_EVENT.PING, {})])\n      return this.wsProviderConfig.pingSecs * 1000\n    }\n\n    return diff\n    \n  }\n\n  private cleanup() {\n\n    if (!this.ci.provider) return\n\n    try {\n      this.timerPing.remove()\n      this.lastRequestTimer.remove()\n      \n      this.encProvider  = null as any\n      this.ci.provider  = null as any\n\n      if (this.ws) this.ws.close()\n      this.ws           = null as any\n  \n    } catch (e) {}\n  }\n}\n","/*------------------------------------------------------------------------------\n   About      : <Write about the file here>\n   \n   Created on : Sun Jun 25 2017\n   Author     : Raghvendra Varma\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { \n         Mubble,\n         ConnectionInfo,\n         Protocol,\n         XmnError,\n         WIRE_TYPE,\n         WireEvent,\n         WireEphEvent,\n         WireEventResp,\n         WireObject,\n         WireReqResp,\n         WireRequest,\n         WireSysEvent,\n         TimerInstance,\n         SYS_EVENT,\n         CustomData,\n         WssProviderConfig,\n       }                      from '@mubble/core'\nimport { RunContextBrowser }  from '../rc-browser'\nimport { XmnRouterBase }      from './xmn-router-base'\nimport { WsBrowser }          from './ws-browser'\nimport { EventSystem }        from '../util'\nimport Dexie                  from 'dexie'\nimport findIndex              from 'lodash/findIndex'\n\nconst TIMEOUT_MS          = 30000,\n      SEND_RETRY_MS       = 1000,\n      SEND_TIMEOUT        = 10000,\n      EVENT_SEND_DELAY    = 1000,\n      MAX_EVENTS_TO_SEND  = 5\n\ninterface BrowserConnectionInfo extends ConnectionInfo {\n  provider : WsBrowser\n}\n\nexport abstract class XmnRouterBrowser implements XmnRouterBase {\n\n  private ci                : BrowserConnectionInfo\n  private ongoingRequests   : WireRequest[] = []\n  private eventSubMap       : Mubble.uObject<(rc: RunContextBrowser, name: string, data: any)=>any> = {}\n  \n  private timerReqResend    : TimerInstance\n  private timerReqTimeout   : TimerInstance\n  private timerEventTimeout : TimerInstance\n\n  private db: XmnDb\n\n  // This flag indicates that events can be sent. This is to allow application to\n  // have control when events are being sent. Normally, events are sent after \n  // getting client identity or login. But in background runs, events can be sent \n  // immediately\n\n  private lastEventTs      = 0\n  private lastEventSendTs  = 0\n  private pubKey: Uint8Array\n  private encIV : Uint8Array\n\n  constructor(private rc: RunContextBrowser, serverUrl: string, \n                      ci: ConnectionInfo, pubKey: string, \n                      encIV: Uint8Array) {\n\n    const urlParser     = document.createElement('a')\n    urlParser.href      = serverUrl\n\n    this.ci             = ci as BrowserConnectionInfo\n\n    this.ci.protocol    = Protocol.WEBSOCKET\n    this.ci.host        = urlParser.hostname\n    this.ci.port        = Number(urlParser.port) || (urlParser.protocol === 'https:' ? 443 : 80)\n    \n    const cls :any      = Uint8Array\n    this.pubKey         = cls.from(atob(pubKey), (c : any) => c.charCodeAt(0))\n    this.encIV          = encIV\n    \n    this.timerReqResend    = rc.timer.register('router-resend', this.cbTimerReqResend.bind(this))\n    this.timerReqTimeout   = rc.timer.register('router-req-timeout', this.cbTimerReqTimeout.bind(this))\n    this.timerEventTimeout = rc.timer.register('router-event-timeout', this.cbTimerEventTimeout.bind(this))\n\n    rc.isDebug() && rc.debug(rc.getName(this), 'constructor')\n  }\n\n  getPubKey() { return this.pubKey }\n  getEncIV() { return this.encIV }\n\n  abstract getNetworkType(rc: RunContextBrowser): string\n  abstract getLocation(rc: RunContextBrowser): string\n  abstract getMaxOpenSecs() : number\n  abstract getCustomData(rc: RunContextBrowser) : CustomData\n  abstract updateCustomData(rc: RunContextBrowser, customData: CustomData)\n  abstract canStrtLastReqTimer(rc : RunContextBrowser) : boolean\n  abstract getSessionTimeOutSecs(rc: RunContextBrowser)\n  abstract sessionTimedOut(rc: RunContextBrowser)\n  abstract runAlwaysAsSecure(rc: RunContextBrowser) : boolean  \n\n  async sendRequest(rc: RunContextBrowser, apiName: string, data: object, timeoutMS ?: number): Promise<object> {\n\n    const timeout = timeoutMS || TIMEOUT_MS\n\n    return new Promise((resolve, reject) => {\n\n      const wr = new WireRequest(apiName, data, 0, resolve, reject)\n      this.ongoingRequests.push(wr)\n\n      if (!this.ci.provider) this.prepareConnection(rc)\n\n      if (!this.ci.provider.send(rc, [wr])) {\n        wr._isSent = true\n        rc.isDebug() && rc.debug(rc.getName(this), 'sent request', wr)\n        this.timerReqTimeout.tickAfter(timeout)\n      } else {\n        rc.isStatus() && rc.status(rc.getName(this), 'send to be retried', wr)\n        this.timerReqResend.tickAfter(SEND_RETRY_MS)\n      }\n    })\n  }\n\n  protected async sendPersistentEvent(rc: RunContextBrowser, eventName: string, data: object) {\n    \n    if (!this.ci.provider) this.prepareConnection(rc)\n      const customData = this.ci.customData\n\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'sendPersistentEvent', eventName, \n      'customData', customData && customData.clientId)\n\n    this.rc.isAssert() && this.rc.assert(this.rc.getName(this), customData && customData.clientId, \n      'You cannot send events without clientId')\n\n    if (await this.initEvents()) {\n\n      const event      = new WireEvent(eventName, data),\n            eventTable = new EventTable(event)\n\n      await eventTable.save(this.db)\n      await this.trySendingEvents(rc)\n    }\n  }\n\n  protected async sendEphemeralEvent(rc: RunContextBrowser, eventName: string, data: object) {\n    \n    if (!this.ci.provider) this.prepareConnection(rc)\n      const customData = this.ci.customData\n\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'sendEphemeralEvent', eventName, \n      'customData', customData && customData.clientId)\n\n    this.rc.isAssert() && this.rc.assert(this.rc.getName(this), customData && customData.clientId, \n      'You cannot send events without clientId')\n\n    const event      = new WireEphEvent(eventName, data)\n    this.ci.provider.sendEphemeralEvent(event)\n  }\n\n  public subscribeEvent(eventName: string, eventHandler: \n      (rc: RunContextBrowser, name: string, data: any) => any) {\n    this.rc.isAssert() && this.rc.assert(this.rc.getName(this), eventName && eventHandler)\n    this.eventSubMap[eventName] = eventHandler\n  }\n\n  prepareConnection(rc: RunContextBrowser) {\n\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'prepareConnection', !!this.ci.provider)\n    this.ci.customData              = this.getCustomData(rc)\n    this.ci.customData.networkType  = this.getNetworkType(rc)\n    this.ci.customData.networkType  = this.getLocation(rc)\n    if (!this.ci.provider) this.ci.provider = new WsBrowser(rc, this.ci, this)\n  }\n\n  private async initEvents() {\n\n    const customData = this.ci.customData\n\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'initEvents', !!this.db)\n\n    if (!this.db && customData && customData.clientId) {\n      this.db = new XmnDb(this.ci.customData.clientId)\n      await EventTable.removeOldByTs(this.rc, this.db, Date.now() - 7 * 24 * 3600000 /* 7 days */)\n    }\n    return !!this.db\n  }\n\n  private async trySendingEvents(rc: RunContextBrowser) {\n\n    if (!this.ci.customData.networkType || this.lastEventTs) {\n      rc.isDebug() && rc.debug(rc.getName(this), 'Skipping sending event as not ready', {\n        networkType         : this.ci.customData.networkType,\n        lastEventTs         : this.lastEventTs\n      })\n      return\n    }\n\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'trySendingEvents', !!this.db)\n\n    const arEvent = await EventTable.getOldEvents(rc, this.db)\n    if (!arEvent.length) return\n\n    // We need to guard trigger from the timeout timer, while waiting to get data from event table, earlier trySendingEvents\n    // has succeeded\n    if (this.lastEventTs) return\n\n    for (let index = 0; index < arEvent.length; index++) {\n\n      if (!this.ci.provider) this.prepareConnection(rc)\n      \n      const eventTable = arEvent[index],\n            wireEvent  = new WireEvent(eventTable.name, JSON.parse(eventTable.data), eventTable.ts)\n\n      if (this.ci.provider.send(rc, [wireEvent])) break // failed to send\n      rc.isDebug() && rc.debug(rc.getName(this), 'sent event', wireEvent)\n      this.lastEventTs      = wireEvent.ts / 1000\n      this.lastEventSendTs  = Date.now()\n      this.timerEventTimeout.tickAfter(TIMEOUT_MS, true)\n      await Mubble.uPromise.delayedPromise(EVENT_SEND_DELAY)\n    }\n  }\n\n  async providerReady() {\n\n    this.cbTimerReqResend()\n\n    const customData = this.ci.customData\n    if (customData && customData.clientId) {\n      if (await this.initEvents()) this.trySendingEvents(this.rc) // not awaiting as it will introduce delay\n    }\n  }\n\n  providerFailed(errCode ?: string) {\n  \n    // finishRequest removed the item from ongoingRequests array\n    while (this.ongoingRequests.length) {\n      const wr = this.ongoingRequests[0]\n      this.finishRequest(this.rc, 0, errCode || XmnError.ConnectionFailed, null)\n    }\n    this.ongoingRequests  = []\n    this.lastEventTs      = 0\n    this.lastEventSendTs  = 0\n  }\n\n  async providerMessage(rc: RunContextBrowser, arData: WireObject[]) {\n\n    for (let index = 0; index < arData.length; index++) {\n\n      const wo = arData[index]\n      rc.isDebug() && rc.debug(rc.getName(this), `providerMessage@${index}`, wo)\n\n      switch (wo.type) {\n\n        case WIRE_TYPE.REQUEST:\n          this.rc.isError() && this.rc.error(this.rc.getName(this), 'Not implemented', wo)\n          break\n\n        case WIRE_TYPE.EPH_EVENT:\n          const handler = this.eventSubMap[wo.name]\n          if (handler) {\n            await handler(rc, wo.name, wo.data)\n          } else {\n            EventSystem.broadcast(rc, wo.name, wo.data)\n          }\n          break\n\n        case WIRE_TYPE.EVENT_RESP:\n          const eventResp = wo as WireEventResp\n          rc.isAssert() && rc.assert(rc.getName(this), eventResp.ts / 1000)\n\n          await EventTable.removeOldByTs(rc, this.db, eventResp.ts / 1000)\n          if (this.lastEventTs === eventResp.ts / 1000) {\n            this.lastEventTs      = 0\n            this.lastEventSendTs  = 0\n            this.timerEventTimeout.remove()\n            await this.trySendingEvents(rc)\n          }\n          break\n\n        case WIRE_TYPE.REQ_RESP:\n          const resp = wo as WireReqResp\n\n          const index = findIndex(this.ongoingRequests, {ts: resp.ts})\n          if (index === -1) {\n            this.rc.isStatus() && this.rc.status(this.rc.getName(this), \n              'Got response for request that is not in progress... timed-out?', \n              resp.name, 'sent at', new Date(resp.ts / 1000))\n            return\n          }\n\n          await this.finishRequest(this.rc, index, resp.errorCode, resp.errorMessage, resp.data)\n          break\n\n        case WIRE_TYPE.SYS_EVENT:\n          await this.processSysEvent(this.rc, wo)\n          break\n\n        default:\n          this.rc.isError() && this.rc.error(this.rc.getName(this), 'Unknown message', wo)\n      }\n    }\n  }\n\n  public requestClose() {\n    this.ci.provider.requestClose()\n  }\n\n  private async processSysEvent(rc: RunContextBrowser, se: WireSysEvent) {\n\n    if (se.name === SYS_EVENT.WS_PROVIDER_CONFIG) {\n      const newConfig = se.data as WssProviderConfig\n      await this.updateCustomData(rc, newConfig.custom)\n      this.prepareConnection(rc)\n    } \n\n    await this.ci.provider.processSysEvent(this.rc, se)\n  }\n\n  private cbTimerReqResend(): number {\n\n    const wr = this.ongoingRequests.find(wr => !wr._isSent)\n    if (!wr || !this.ci.provider) return 0\n\n    if (!this.ci.provider.send(this.rc, wr)) {\n\n      wr._isSent = true\n      this.timerReqTimeout.tickAfter(TIMEOUT_MS)\n\n    } else if ((Date.now() - wr.ts / 1000) > SEND_TIMEOUT) {\n\n      this.finishRequest(this.rc, this.ongoingRequests.indexOf(wr), XmnError.SendTimedOut, null)\n\n    } else {\n      return SEND_RETRY_MS\n    }\n\n    // We need to see if there are still messages left to be sent\n    return this.ongoingRequests.find(wr => !wr._isSent) ? SEND_RETRY_MS : 0\n  }\n\n  private cbTimerReqTimeout(): number {\n\n    const now = Date.now()\n    let nextTimeout = Number.MAX_SAFE_INTEGER\n\n    for (let index = 0; index < this.ongoingRequests.length; index++) {\n\n      const wr        = this.ongoingRequests[index],\n            timeoutAt = wr.ts / 1000 + TIMEOUT_MS\n\n      if (wr._isSent) {\n        if (now >= timeoutAt) {\n          this.finishRequest(this.rc, index--, XmnError.RequestTimedOut, null)\n        } else {\n          if (nextTimeout > timeoutAt) nextTimeout = timeoutAt\n        }\n      }\n    }\n    return nextTimeout === Number.MAX_SAFE_INTEGER ? 0 : nextTimeout - now\n  }\n\n  private cbTimerEventTimeout(): number {\n\n    if (!this.lastEventSendTs) return 0\n\n    const diff = this.lastEventSendTs + TIMEOUT_MS - Date.now()\n    if (diff > 0) return diff\n\n    this.lastEventTs      = 0\n    this.lastEventSendTs  = 0\n\n    this.trySendingEvents(this.rc)\n    return TIMEOUT_MS\n  }\n\n  private finishRequest(rc: RunContextBrowser, index: number, errorCode: string | null, \n                        errorMessage: string | null, data ?: object) {\n\n    const wr  = this.ongoingRequests[index],\n          now = Date.now()\n\n    this.ongoingRequests.splice(index, 1)\n    \n    if (!wr.resolve) {\n\n      rc.isStatus() && rc.status(rc.getName(this), 'Trying to finish already finished request', errorCode,\n        wr.name, 'created at', new Date(wr.ts/1000), 'timeTaken', now - wr.ts/1000, 'ms')\n\n      return  \n    }\n\n    if (errorCode) {\n\n      rc.isStatus() && rc.status(rc.getName(this), 'Request failed with code', errorCode,\n        wr.name, 'created at', new Date(wr.ts/1000), 'timeTaken', now - wr.ts/1000, 'ms')\n      \n      wr.reject(new Mubble.uError(errorCode, errorMessage || ''))\n\n    } else {\n\n      rc.isStatus() && rc.status(rc.getName(this), 'Request succeeded', \n        wr.name, 'created at', new Date(wr.ts/1000), 'timeTaken', now - wr.ts/1000, 'ms')\n\n      wr.resolve(data)  \n    }\n\n    wr.reject  = null\n    wr.resolve = null\n  }\n\n} // end of class\n\nclass EventTable {\n\n  ts    : number\n  name  : string\n  data  : string\n\n  constructor(event ?: WireEvent) {\n    if (!event) return\n    this.ts = event.ts/1000\n    this.name = event.name\n    this.data = JSON.stringify(event.data)\n  }\n\n  async save(db: XmnDb) {\n    await db.transaction('rw', db.events, async() => {\n      await db.events.put(this)\n    })\n  }\n\n  /**\n   * Static functions for io\n   */\n  static async getOldEvents(rc: RunContextBrowser, db: XmnDb): Promise<EventTable[]> {\n    const ar = await db.events.orderBy('ts').limit(MAX_EVENTS_TO_SEND).toArray(),\n          arEt = ar.map(item => {\n            const et = new EventTable()\n            et.ts   = item.ts\n            et.name = item.name\n            et.data = item.data\n            return et\n          })\n    rc.isDebug() && rc.debug(rc.getName(this), 'Retrieved events from db, count:', arEt.length)\n    return arEt      \n  }\n\n  static async removeOldByTs(rc: RunContextBrowser, db: XmnDb, ts: number) {\n    \n    await db.transaction('rw', db.events, async() => {\n      await db.events.where('ts').belowOrEqual(ts).delete()\n    })\n    rc.isDebug() && rc.debug(rc.getName(this), 'Deleted events from db with ts belowOrEqual:', ts)\n  }\n}\n// http://dexie.org/docs/Typescript.html\nclass XmnDb extends Dexie {\n\n  events: Dexie.Table<EventTable, number> // number: type of primary key\n  constructor (clientId: number) {\n    super('xmn-' + clientId)\n    this.version(1).stores({\n      events: 'ts'\n    })\n    this.events.mapToClass(EventTable)\n  }\n}\n\n","/*------------------------------------------------------------------------------\n   About      : <Write about the file here>\n   \n   Created on : Sun Jun 25 2017\n   Author     : Raghvendra Varma\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { RunContextBrowser }  from '../rc-browser'\nimport { StorageProvider }    from './storage-provider'\nimport { Mubble }             from '@mubble/core'\n\nconst LAST_USER     = 'lastUser'\nexport const USERS  = 'users'\n\nexport abstract class UserKeyValue {\n\n  private _clientId               : number\n  private _obopayId               : string\n  private _sessionId              : string\n  private _deviceId               : string\n  private _userLinkId             : string\n  private _webProfilePicBase64    : string\n  \n  userName                        : string\n  mobileNo                        : string\n  screenVisitedStates             : { [compName: string] : boolean }\n\n  private users         : {[key: string]: object} = {}\n  private lastClientId  : number\n\n  constructor(protected rc: RunContextBrowser, private storage: StorageProvider) {\n  }\n\n  async init() {\n\n    const users = await this.storage.getUserKeyValue(this.rc, USERS)\n    if (!users) return\n\n    this.users = JSON.parse(users)\n    const cid  = await this.storage.getUserKeyValue(this.rc, LAST_USER)\n    this.lastClientId = Number(cid)\n\n    if (!this.lastClientId) return\n    this.deserialize(this.users[this.lastClientId])\n\n    return this\n  }\n\n  async registerNewUser(clientId: number, userLinkId: string, userName: string) {\n\n    const obj = { clientId, userLinkId, userName }\n    this.users[clientId] = obj\n    await this.storage.setUserKeyValue(this.rc, USERS, JSON.stringify(this.users))\n\n    if (this.lastClientId !== clientId) {\n      this.lastClientId = clientId\n      await this.storage.setUserKeyValue(this.rc, LAST_USER, String(this.lastClientId))\n    }\n\n    this.deserialize(obj)\n  }\n\n\n  setScreenVisited(routeName: string) {\n\n    if (!this.screenVisitedStates) this.screenVisitedStates = {}\n    if (this.screenVisitedStates[routeName]) return\n    this.screenVisitedStates[routeName] = true\n    this.rc.isStatus() && this.rc.status(this.rc.getName(this), 'visited screen', routeName)\n    this.save(this.rc)\n  }\n\n\n  setWebProfilePicBase64(rc: RunContextBrowser, base64: string) {\n    this._webProfilePicBase64 = base64\n    this.save(rc)\n  }\n\n  async logOutCurrentUser() {\n\n    this.rc.isAssert() && this.rc.assert(this.rc.getName(this), \n      this._sessionId || this._userLinkId, \n      'Trying to logout a user who is not registered')\n\n    delete this.users[this._clientId]\n    await this.storage.setUserKeyValue(this.rc, USERS, JSON.stringify(this.users))\n    \n    if (Object.keys(this.users).length > 0) {\n      const lastClientId = Number(Object.keys(this.users)[0])\n      await this.switchUserOnCurrRun(lastClientId)\n    } else {\n      await this.storage.setUserKeyValue(this.rc, LAST_USER, null)\n    }\n  }\n\n  async switchUserOnCurrRun(clientId: number) {\n    this.lastClientId = clientId\n    await this.storage.setUserKeyValue(this.rc, LAST_USER, String(this.lastClientId))\n    this.deserialize(this.users[this.lastClientId])\n  }\n\n  getAllUserLinkIds(): string[] {   \n    const ids = []\n    for (const i of Object.keys(this.users)) {\n      ids.push(this.users[i]['userLinkId'])\n    }\n    return ids\n  }\n    \n  getClientIdForUserLink(reqUserLinkId: string): number {\n    for (let clientId in this.users) {\n      const userLinkId: string = this.users[clientId]['userLinkId']\n      if (userLinkId === reqUserLinkId) return Number(clientId)\n    }\n    return 0\n  }\n\n  async save(rc: RunContextBrowser) {\n\n    rc.isAssert() && rc.assert(rc.getName(this), this._clientId, \n      'Came to save userKeyVal before clientId')\n\n    if (!this._sessionId && !this._userLinkId) {\n      rc.isStatus() && rc.status(rc.getName(this), \n        `not saving rc, as user session / userLinkId not present \n        ${JSON.stringify({sessionId : this._sessionId,\n                          userLinkId : this._userLinkId })}`)\n      return\n    }\n    \n    rc.isDebug() && rc.debug(rc.getName(this), `saving rc obj ${rc}`)\n\n    this.users[this._clientId] = this.serialize()\n    await this.storage.setUserKeyValue(this.rc, USERS, JSON.stringify(this.users))\n\n    if (this.lastClientId !== this._clientId) {\n      this.lastClientId = this._clientId\n      await this.storage.setUserKeyValue(this.rc, LAST_USER, String(this.lastClientId))\n    }\n  }\n\n  getWebProfilePicBase64(clientId: number): string {\n    return this.users[clientId]['webProfilePicBase64']\n  }\n\n  getAllClientIds(): number[] { return Object.keys(this.users).map(Number) }\n\n  getUserInfo(clientId: number): object { return this.users[clientId] }\n\n  // Client Id\n  get clientId() {return this._clientId}\n  set clientId(clientId : number) {\n    if (clientId === this._clientId) return\n    if (this._clientId && (this._sessionId || this._userLinkId)) {\n      throw new Mubble.uError('INVALID_CLIENT_ID', 'Cannot change clientId once sessionId/userLinkId is set: ' + \n        JSON.stringify({new:clientId, existing:this._clientId, \n                        sessionId: this._sessionId, userLinkId: this._userLinkId}))\n    }\n    this._clientId = clientId\n  }\n\n  get deviceId() { return this._deviceId }\n  set deviceId(deviceId: string) {\n    if (deviceId === this._deviceId) return\n    this._deviceId = deviceId\n  }\n\n  get sessionId() { return this._sessionId }\n  set sessionId(sessionId: string) {\n    if (sessionId === this._sessionId) return\n    this._sessionId = sessionId\n  }\n\n  get obopayId() { return this._obopayId }\n  set obopayId(obopayId: string) {\n    if (obopayId === this._obopayId) return\n    if (this._obopayId && !obopayId === null) throw new Mubble.uError('INVALID_OBOPAY_ID', \n      'Cannot set obopayId when it is already set: ' + JSON.stringify({obopayId, existing:this._obopayId }))\n    this._obopayId = obopayId\n  }\n\n  get userLinkId()  {return this._userLinkId}\n  set userLinkId(userLinkId : string) {\n    if (userLinkId === this._userLinkId) return\n    if (this._userLinkId && !userLinkId === null) throw new Mubble.uError('INVALID_USER_LINK_ID', \n      'Cannot set userLinkId when it is already set: ' + JSON.stringify({userLinkId, existing:this._userLinkId}))\n    this._userLinkId = userLinkId\n  }\n\n  serialize(): object {\n    return {\n      clientId            : this._clientId,\n      userLinkId          : this._userLinkId,\n      sessionId           : this._sessionId,\n      obopayId            : this._obopayId,\n      deviceId            : this._deviceId,\n\n      userName            : this.userName,\n      webProfilePicBase64 : this._webProfilePicBase64,\n      screenVisitedStates : this.screenVisitedStates\n    }\n  }\n\n  deserialize(obj: {[key: string]: any}) {\n\n    this._clientId              = obj.clientId\n    this._userLinkId            = obj.userLinkId\n    this._deviceId              = obj.deviceId\n    this._sessionId              = obj.sessionId\n    this._obopayId               = obj.obopayId\n\n    this.userName               = obj.userName\n    this._webProfilePicBase64   = obj.webProfilePicBase64\n    this.screenVisitedStates    = obj.screenVisitedStates\n  }\n\n  $dump() {\n    const keys = Object.getOwnPropertyNames(this)\n\n    for (const key of keys) {\n      console.info(`${key}=${JSON.stringify(this[key])}`)\n    }\n  }\n  \n}","/*------------------------------------------------------------------------------\n   About      : <Write about the file here>\n   \n   Created on : Sun Jun 25 2017\n   Author     : Raghvendra Varma\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n\n------------------------------------------------------------------------------\n\n- GlobalKeyValue is an automatic persistent storage system that persists the \nkey, values in localStorage with keys like 'global.version'.\n- A field must be annotated with @GlobalKeyValue.autoStore() for making it eligible\n  for automatic storage. \n\n  - string default to ''\n  - number defaults to 0\n  - boolean defaults to false\n  - object defaults to null\n\n- A field can be given a different default value while declaring. Fields with default \n  value, are not stored in localStorage till they are changed. Once stored they\n  are never deleted\n\n- To save changes to an object, when its internal property has changed, you will\n  need to CALL detectSaveChanges(), as internal changes to object are not detected\n  automatically\n\nDesign\n------\n- autoStore.set is called before constructor for default value initialization\n  \n- Last persisted value of autoStore field is kept in _fieldName. The stringified \n  last persisted value is kept in _#fieldName. There is no data kept at the actual field\n\n- ???? TODO: Write a housekeep function that will delete the unused keys\n\n------------------------------------------------------------------------------*/\nimport 'reflect-metadata'\nimport { RunContextBrowser }  from '../rc-browser'\nimport { StorageProvider }    from './storage-provider'\nimport { EnvConfig }          from '../framework'\n\nconst META_KEY    = 'autoStore',\n      VALID_TYPES = [String, Number, Boolean, Object]\n\ntype fieldMapType = { [key: string]:  {\n    type      : object, \n    strValue ?: string /* initial value from localStore or default */ \n  }\n}\n\nexport abstract class GlobalKeyValue {\n\n  @GlobalKeyValue.autoStore() syncSegments  : object\n  @GlobalKeyValue.autoStore() jsVersion     : string\n  @GlobalKeyValue.autoStore() logLevel      : number\n  @GlobalKeyValue.autoStore() deviceId      : string\n  @GlobalKeyValue.autoStore() envConfig     : EnvConfig\n\n  \n  public static autoStore(): any {\n\n    let functionResult = function(target: any, propertyKey: string) {\n\n      Reflect.defineMetadata(META_KEY, true, target, propertyKey)\n\n      return {\n\n        get: function() {\n          const value = this['_' + propertyKey],\n                rc    = this.rc\n\n          rc.isAssert() && rc.assert(rc.getName(this), value !== undefined, \n            `You are trying to fetch ${propertyKey}=${value} before init`)\n          return value\n        },\n\n        set: function(value: any) {\n\n          const fieldType = Reflect.getMetadata('design:type', target, propertyKey),\n                rc        = this['rc']\n\n          rc.isDebug() && rc.debug(rc.getName(this), \n            `autoStore.set: propertyKey: ${propertyKey}, value: ${value}, fieldType: ${fieldType}`)\n\n          rc.isAssert() && rc.assert(rc.getName(this), value !== undefined)\n          rc.isAssert() && rc.assert(rc.getName(this), VALID_TYPES.indexOf(fieldType) !== -1, \n            `Not a valid propertyKey: ${propertyKey}, fieldType: ${fieldType}`)\n\n          rc.isAssert() && rc.assert(rc.getName(this), \n            value === null ? fieldType === Object : value.constructor === fieldType,\n            `You are trying to set ${propertyKey}=${value} with invalid type ${typeof(value)}`)\n\n          let strValue = fieldType === Object ? JSON.stringify(value) : String(value)\n\n          const oldValue    = this['_' + propertyKey]\n\n          // undefined indicates that GlobalKeyValue has not been initialized\n          if (oldValue === undefined) {\n            rc.isDebug() && rc.debug(rc.getName(this), \n              `Remembering default ${propertyKey}=${value}`)\n            GlobalKeyValue.fieldMap[propertyKey] = {type: fieldType, strValue}\n            return\n          }\n\n          const strOldValue = this['_$' + propertyKey],\n                key         = propertyKey\n\n          if (strOldValue === strValue) return\n          \n          this['_' + propertyKey]  = value\n          this['_$' + propertyKey] = strValue\n          this.storage.setGlobalKeyValue(rc, key, strValue)\n\n          if (rc && rc.isDebug) {\n            rc.isDebug() && rc.debug('GlobalKeyValue', `Saved key ${key}=${strValue}`)\n          }\n        }\n      }\n    }\n\n    return functionResult\n  }\n  \n  private static fieldMap: fieldMapType = {}\n\n  constructor(private rc: RunContextBrowser, private storage: StorageProvider) {\n  }\n\n  async init() {\n\n    const rc = this.rc\n\n    this.extractFields(this, GlobalKeyValue.fieldMap)\n\n    for (const name of Object.keys(GlobalKeyValue.fieldMap)) {\n\n      const field           = GlobalKeyValue.fieldMap[name],\n            strSavedValue   = await this.storage.getGlobalKeyValue(rc, name),\n            strDefaultValue = field.strValue,\n            strValue        = strSavedValue || strDefaultValue\n\n      let value\n\n      switch (field.type) {\n        case String:\n          value = strValue ? strValue : ''\n          break\n\n        case Number:\n          value = strValue ? Number(strValue) : 0\n          break\n\n        case Boolean:\n          value = strValue ? strValue === String(true) : false\n          break\n\n        case Object:\n          value = strValue ? JSON.parse(strValue) : null\n          break\n      }\n\n      this['_' + name]  = value\n      this['_$' + name] = field.type === Object ? JSON.stringify(value) : String(value)\n    }\n    return this\n  }\n\n  // Need to be called only for fields of type object, when some internal property\n  // has been changed\n  public detectSaveChanges() {\n    for (const name of Object.keys(GlobalKeyValue.fieldMap)) {\n\n      const field   = GlobalKeyValue.fieldMap[name],\n            type    = (field.type as any).name\n\n      if (field.type !== Object) continue\n      this[name] = this[name] // forces the set function to get called\n    }\n  }\n\n  private extractFields(proto: any, fieldz: fieldMapType): void {\n\n    if (proto === null) return\n\n    const keys = Object.getOwnPropertyNames(proto)\n    for (const key of keys) {\n      if (fieldz[key]) continue\n      try {\n        if (Reflect.getMetadata(META_KEY, proto, key)) {\n          // console.log('GlobalKeyValue:extractFields()', key)\n          fieldz[key] = {type: Reflect.getMetadata('design:type', proto, key)}\n        }\n      } catch(err) {\n        console.info('GlobalKeyValue:extractFields()', 'failed for', key)\n      }\n    }\n    return this.extractFields(Object.getPrototypeOf(proto), fieldz)\n  }\n\n  async $dump() {\n\n    for (const name of Object.keys(GlobalKeyValue.fieldMap)) {\n\n      const field   = GlobalKeyValue.fieldMap[name],\n            type    = (field.type as any).name,\n            memory  = this[name],\n            store   = await this.storage.getGlobalKeyValue(this.rc, name)\n\n      console.info({name, type, memory, store})\n    }\n  }\n\n}","/*------------------------------------------------------------------------------\n   About      : <Write about the file here>\n   \n   Created on : Wed Jul 19 2017\n   Author     : Raghvendra Varma\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport Dexie                  from 'dexie'\n\nimport {  RunContextBrowser } from '../rc-browser'\nimport {  EventSystem       } from '../util'\n\n\nimport {  SyncHashModel, \n          SyncHashModels,\n          SyncModelResponse, \n          SyncRequest, \n          SyncResponse,\n          Segments,\n          MASTER_UPDATE_EVENT,\n          Mubble\n       }                      from '@mubble/core'\n\nexport const Segment = {\n  version: 'version'\n}\n\nconst SYNC_HASH = 'syncHashTable'\n\nclass ModelField {\n  constructor(public name: string,\n              public type: 'string' | 'number' | 'boolean' | 'array' | 'object',\n              public optional: boolean) {}\n  \n  toString() {\n    return `${this.name}(${this.type})${this.optional ? ': optional' : ''}`\n  }            \n}\n\nexport type VersionSchema = {\n  version      : number,\n  tableSchema  : Mubble.uObject<string>\n  upgrade     ?: () => void\n}\n\n(Dexie as any).debug = true \n\n// @dynamic\nexport abstract class MasterDb extends Dexie {\n\n  static schemaKey    : Mubble.uObject<Mubble.uObject<ModelField>> = {}\n  static schemaField  : Mubble.uObject<Mubble.uObject<ModelField>> = {}\n  static classMap     : Map<Function, string>                      = new Map()\n\n  syncHashModels: SyncHashModels = {}\n\n  static registerModelClass(modelName: string, classFn: Function) {\n    this.classMap.set(classFn, modelName)\n  }\n\n  static getModelName(classFn: Function) {\n    return this.classMap.get(classFn)\n  }\n\n  static registerSchema(modelName     : string,\n                        fieldName     : string,\n                        isPrimaryKey  : boolean,\n                        fieldType     : 'string' | 'number' | 'boolean' | 'array' | 'object',\n                        optional      : boolean) {\n\n    const field      = new ModelField(fieldName, fieldType, optional),\n          collection = isPrimaryKey ? this.schemaKey : this.schemaField\n\n    let   fields     = collection[modelName]\n\n    if (!fields) fields = collection[modelName] = {}\n    fields[field.name] = field\n    // console.log(`${modelName}: added ${isPrimaryKey ? 'key' : 'field'} + ${field}`)\n  }\n\n  constructor (rc: RunContextBrowser, version: string, versionSchema : VersionSchema[]) {\n\n    super('MasterDb')\n\n    const modelsWithKeys   = Object.keys(MasterDb.schemaKey).length,\n          modelsWithFields = Object.keys(MasterDb.schemaField).length\n\n    rc.isAssert() && rc.assert(rc.getName(this), modelsWithKeys && modelsWithFields \n      && modelsWithKeys >= modelsWithFields, {modelsWithKeys, modelsWithFields})\n\n    rc.isAssert() && rc.assert(rc.getName(this), versionSchema[0].version === 1)\n    /*\n      TODO ???? validate accumulated versionSchema with this.buildSchema(schema)\n    */\n    versionSchema[0].tableSchema[SYNC_HASH] = 'model'\n    this.verifySegmentVersion(rc, version)\n  }\n\n  public async init(rc: RunContextBrowser) {\n\n    const ar        = await this[SYNC_HASH].toArray(),\n          modelMap  = MasterDb.schemaKey,\n          models    = Object.keys(modelMap)\n\n    for (const modelName of models) {\n      const st = ar.find(item => item.model === modelName)\n      this.syncHashModels[modelName] = st ? st.hash : {ts: 0}\n    }\n    rc.isDebug() && rc.debug(rc.getName(this), 'restored syncHashModels', this.syncHashModels)\n  }\n\n  public onRouterAvailable(rc: RunContextBrowser) {\n    const rcb: any = rc\n    rcb.router.subscribeEvent(MASTER_UPDATE_EVENT, this.onMasterUpdate.bind(this))\n  }\n\n  public getSyncRequest(rc: RunContextBrowser): SyncRequest {\n\n    rc.isAssert() && rc.assert(rc.getName(this), Object.keys(this.syncHashModels).length)\n    return {hash: this.syncHashModels, segments: (rc.globalKeyVal.syncSegments as Segments)}\n  }\n\n  abstract async afterMasterUpdate(rc: RunContextBrowser): Promise<void>\n\n  getTableForClass(rc: RunContextBrowser, classFn: Function) {\n\n    const modelName = MasterDb.getModelName(classFn)\n    rc.isAssert() && rc.assert(rc.getName(this), modelName, 'unknown class object', classFn)\n    return this.getTable(rc, modelName)\n  }\n\n  private verifySegmentVersion(rc: RunContextBrowser, version: string) {\n\n    let segments = rc.globalKeyVal.syncSegments as Segments\n    if (!segments) segments = {}\n    if (!segments[Segment.version]) segments[Segment.version] = [['']]\n\n    const [[oldVersion]] = segments[Segment.version]\n    if (oldVersion !== version) {\n      rc.isDebug() && rc.debug(rc.getName(this), 'version changed', {last: oldVersion, current: version})\n      segments[Segment.version] = [[version]]\n      rc.globalKeyVal.syncSegments = segments\n    } else {\n      rc.isDebug() && rc.debug(rc.getName(this), 'Versions are same', {last: oldVersion, current: version})\n    }\n  }\n\n  private buildSchema(schema) {\n\n    const modelMap = MasterDb.schemaKey\n    \n    for (const modelName of Object.keys(modelMap)) {\n\n      const ar     = Object.keys(modelMap[modelName]),\n            keyStr = ar.length === 1 ? ar[0] : `[${ar.join('+')}]`\n      schema[modelName + 'Table'] = keyStr\n    }\n  }\n\n  async onMasterUpdate(rc:RunContextBrowser, eventName: string, data: any) {\n\n    try {\n      const syncResponse:SyncResponse = data\n\n      rc.isDebug() && rc.debug(rc.getName(this), 'onMasterUpdate', JSON.stringify(syncResponse))\n      let updated = false\n\n      for (const modelName of Object.keys(syncResponse)) {\n\n        if (!(syncResponse as object).hasOwnProperty(modelName)) continue\n        const modelData: SyncModelResponse = syncResponse[modelName]\n\n        if (await this.applyMasterData(rc, modelName, modelData)) updated = true\n      }\n\n      if (updated) await this.afterMasterUpdate(rc)\n\n    } catch(e) {\n      const data = {errorMsg: e.message}\n      EventSystem.broadcast(rc, \"client-error\", data)\n      throw new Error(e)\n    }\n\n  }\n\n  private async applyMasterData(rc: RunContextBrowser, modelName: string, modelData: SyncModelResponse): Promise<boolean> {\n\n    if (modelData.purge) {\n      await this.clear(rc, modelName)\n      rc.isDebug() && rc.debug(rc.getName(this), modelName, 'purged')\n    } else if (modelData.del && modelData.del.length) {\n      rc.isDebug() && rc.debug(rc.getName(this), modelName, 'going to delete', modelData.del.length)\n      await this.bulkDelete(rc, modelName, modelData.del)\n    }\n\n    if (modelData.mod && modelData.mod.length) {\n      rc.isDebug() && rc.debug(rc.getName(this), modelName, 'going to upsert', modelData.mod.length)\n      await this.bulkPut(rc, modelName, modelData.mod)\n    }\n\n    this.syncHashModels[modelName] = modelData.hash\n    const syncHashTable = this[SYNC_HASH]\n\n    await this.transaction('rw', syncHashTable, async() => {\n      rc.isDebug() && rc.debug(rc.getName(this), modelName, 'going to save hash', modelData.hash)\n      await syncHashTable.put({model: modelName, hash: modelData.hash})\n    })\n\n    return true\n  }\n  \n  private async clear(rc: RunContextBrowser, modelName: string) {\n\n    const modelTable = this.getTable(rc, modelName)\n\n    await this.transaction('rw', modelTable, async() => {\n      await modelTable.clear()\n    })\n\n  }\n\n//   private async bulkPut(rc: RunContextBrowser, modelName: string, arMod: object[]) {\n\n//     const modelTable = this.getTable(rc, modelName)\n\n//     try {\n//       await this.transaction('rw', modelTable, async() => {\n//       for (const modelRec of arMod) {\n//         const rec = this.buildFullRec(rc, modelName, modelRec)\n//         rc.isDebug() && rc.debug(rc.getName(this), 'going to put', rec)\n//           await modelTable.put(rec)\n//       }\n//     })\n//   } catch (err) {\n//     const x = JSON.stringify(arMod)\n//     console.log('bombed while writing', x.length, 'bytes')\n//     console.log(x)\n//     console.log('Dexie error stack', err.stack)\n//     throw(err)\n//   }\n\n//   console.log('wrote', JSON.stringify(arMod).length, 'bytes successfully')\n// }\n\n  private async bulkPut(rc: RunContextBrowser, modelName: string, arMod: object[]) {\n\n    const modelTable = this.getTable(rc, modelName)\n\n    for (const modelRec of arMod) {\n      const rec = this.buildFullRec(rc, modelName, modelRec)\n      rc.isDebug() && rc.debug(rc.getName(this), 'going to put with debug ', rec)\n      try {\n        await modelTable.put(rec)\n      } catch (err) {\n        const x = JSON.stringify(arMod)\n        console.log('bombed while writing', x.length, 'bytes')\n        console.log(x)\n        console.log('Dexie error stack', err.stack)\n        throw(err)\n      }\n    }\n    console.log('wrote', JSON.stringify(arMod).length, 'bytes successfully')\n  }\n\n\n\n  private buildKeyRec(rc: RunContextBrowser, modelName: string, rec: Object) {\n\n    const keyMap    = MasterDb.schemaKey[modelName],\n          outRec    = {}\n\n    for (const keyName in keyMap) {\n      const key = keyMap[keyName]\n      rc.isAssert() && rc.assert(rc.getName(this), rec[keyName] !== undefined, 'Rec missing PK', keyName, rec)\n      outRec[keyName] = rec[keyName]\n    }\n    \n    return outRec\n  }\n\n  private buildFullRec(rc: RunContextBrowser, modelName: string, rec: Object) {\n\n    const fieldMap  = MasterDb.schemaField[modelName],\n          outRec    = this.buildKeyRec(rc, modelName, rec)\n\n    for (const fieldName in fieldMap) {\n      const field = fieldMap[fieldName],\n            value = rec[fieldName]\n      rc.isAssert() && rc.assert(rc.getName(this), field.optional && value === undefined || \n        this.validateType(field.type, value), 'Invalid value for field', fieldName, rec)\n      outRec[fieldName] = rec[fieldName]\n    }\n\n    return outRec\n  }\n\n  private validateType(type: string, value: any): boolean {\n\n    switch(type) {\n      case 'string':\n      case 'number':\n      case 'boolean':\n        return typeof(value) === type\n      case 'array':\n        return Array.isArray(value)\n      case 'object':\n        return value && typeof(value) === type\n      default:\n        return false  \n    }\n  }\n\n  private async bulkDelete(rc: RunContextBrowser, modelName: string, arDel: object[]) {\n\n    const modelTable = this.getTable(rc, modelName)\n\n    await this.transaction('rw', modelTable, async() => {\n      for (const modelRec of arDel) {\n        const keyObj = this.buildKeyRec(rc, modelName, modelRec)\n        rc.isDebug() && rc.debug(rc.getName(this), 'bulkDelete', modelName, keyObj)\n        await modelTable.delete(Object.keys(keyObj).map(key => keyObj[key]))\n      }\n    })\n  }\n\n  private getTable(rc: RunContextBrowser, modelName: string) {\n\n    const modelTable = this[modelName + 'Table']\n    rc.isAssert() && rc.assert(rc.getName(this), modelTable, 'unknown model', modelName)\n    return modelTable\n\n  }  \n\n  // debug functions\n  private async $all(rc: RunContextBrowser, modelName: string) {\n\n    const modelTable = this.getTable(rc, modelName)\n    const ar = await modelTable.toArray()\n    console.info(ar)\n  }\n}\n\n","/*------------------------------------------------------------------------------\n   About      : <Write about the file here>\n   \n   Created on : Wed Jul 19 2017\n   Author     : Raghvendra Varma\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { MasterDb } from './master-db'\n\nexport class Master {\n\n  public static field(optional ?: boolean) {\n\n    let functionResult = function(target: any, propertyKey: string) {\n\n      const type = Reflect.getMetadata('design:type', target, propertyKey),\n            name = MasterDb.getModelName(target.constructor)\n\n      MasterDb.registerSchema(name, \n                              propertyKey, \n                              false, \n                              Master.getType(type), \n                              !!optional)\n    }\n    return functionResult\n  }\n\n  public static key(modelName ?: string) {\n    \n    let functionResult = function(target: any, propertyKey: string) {\n\n      if (modelName) MasterDb.registerModelClass(modelName, target.constructor)\n\n      const type = Reflect.getMetadata('design:type', target, propertyKey),\n            name = MasterDb.getModelName(target.constructor)\n\n      MasterDb.registerSchema(name, \n                              propertyKey, \n                              true, \n                              Master.getType(type), \n                              false)\n    }\n    return functionResult\n  }\n\n  private static getType(fieldType) {\n    switch (fieldType) {\n\n      case String   : return 'string'\n      case Number   : return 'number'\n      case Boolean  : return 'boolean'\n      case Array    : return 'array'\n      case Object   : return 'object'\n\n      default:\n        const msg = 'getType: unknown field type - ' + fieldType\n        // console.log(msg)\n        throw(new Error(msg))\n    }\n    \n  }\n\n}","import { RunContextBrowser }  from \"../rc-browser\"\nimport { Mubble }             from \"@mubble/core\"\n\nconst GLOBAL_PREFIX = 'global',\n      CONFIG_PREFIX = 'config'\n\nexport class StorageProvider {\n\n  setGlobalKeyValue(rc: RunContextBrowser, key: string, value: string) {\n    const storageKey = GLOBAL_PREFIX + '.' + key\n    localStorage.setItem(storageKey, value)\n  }\n\n  async getGlobalKeyValue(rc: RunContextBrowser, key: string): Promise<string> {\n    const storageKey = GLOBAL_PREFIX + '.' + key\n    return localStorage.getItem(storageKey)\n  }\n\n  setUserKeyValue(rc: RunContextBrowser, key: string, value: string) {\n    localStorage.setItem(key, value)\n  }\n\n  async getUserKeyValue(rc: RunContextBrowser, key: string): Promise<string> {\n    return localStorage.getItem(key)\n  }\n\n  setGcConfig(rc: RunContextBrowser, config: {category: string, key: string, value: Mubble.uObject<string>}[]) {\n\n    config.forEach((entry) => {\n      const storageKey = `${CONFIG_PREFIX}.${entry.category}|${entry.key}`\n      localStorage.setItem(storageKey, JSON.stringify(entry.value))\n\n      // if (rc && rc.isDebug) {\n      //   rc.isDebug() && rc.debug('GcConfigKeyValue', \n      //     `Saved key ${storageKey}=${JSON.stringify(entry.value)}`)\n      // }\n    })\n  }\n\n  async getGcConfig(rc: RunContextBrowser, category: string, key: string): Promise<string> {\n\n    const storageKey = `${CONFIG_PREFIX}.${category}|${key}`\n    return localStorage.getItem(storageKey)\n  }\n\n}","import { RunContextBrowser }  from '../rc-browser'\nimport { StorageProvider }    from './storage-provider'\nimport { Mubble }             from '@mubble/core'\n\nexport class ConfigKeyVal {\n\n  constructor(private rc: RunContextBrowser, private storage: StorageProvider) {}\n\n  async setConfig(config: {category: string, key: string, value: Mubble.uObject<string>}[]) {\n    await this.storage.setGcConfig(this.rc, config)\n  }\n\n  async getConfig(category: string, key: string): Promise<Mubble.uObject<string>> {\n\n    const value = await this.storage.getGcConfig(this.rc, category, key)\n    if (!value) {\n      this.rc.isWarn() && this.rc.warn(this.rc.getName(this), \n        `No config found for category ${category}, key ${key}`)\n      return null\n    }\n    return JSON.parse(value)\n  }\n\n}","import { RouteReuseStrategy, ActivatedRouteSnapshot, DetachedRouteHandle } from '@angular/router'\n\nexport class RoutingStrategy implements RouteReuseStrategy {\n\n  private preserveComponents = []\n  private myStore = {}\n  private logging = false\n\n  shouldDetach(route: ActivatedRouteSnapshot): boolean {\n    if (this.logging) console.info('RoutingStrategy:shouldDetach', this.logSnapshot(route), route)\n    return this.isRemembered(route)\n  }\n\n  store(route: ActivatedRouteSnapshot, handle: DetachedRouteHandle): void {\n\n    if (this.logging) console.info('RoutingStrategy:store', this.logSnapshot(route), route)\n\n    const name = this.getName(route)\n    if (!name) return\n\n    this.myStore[name] = handle\n  }\n\n  shouldAttach(route: ActivatedRouteSnapshot): boolean {\n    if (this.logging) console.info('RoutingStrategy:shouldAttach', this.logSnapshot(route), route)\n    // return this.isRemembered(route)\n\n    const name = this.getName(route)\n    return name ? !!this.myStore[name] : false\n  }\n\n  retrieve(route: ActivatedRouteSnapshot): DetachedRouteHandle {\n    if (this.logging) console.info('RoutingStrategy:retrieve', this.logSnapshot(route), route)\n\n    const name = this.getName(route)\n    if (!name) return null\n\n    return this.myStore[name]\n  }\n\n  shouldReuseRoute(future: ActivatedRouteSnapshot, curr: ActivatedRouteSnapshot): boolean {\n    if (this.logging) console.info('RoutingStrategy:shouldReuseRoute', future, this.logSnapshot(future), \n                curr, this.logSnapshot(curr))\n    return future.routeConfig === curr.routeConfig;\n  }\n\n  private logSnapshot(route: ActivatedRouteSnapshot) {\n    const name = this.getName(route)\n    return (name || 'null') + ':' + \n           (route.url && route.url.length ? route.url[0] : 'none')\n  }\n\n  private isRemembered(route: ActivatedRouteSnapshot): boolean {\n    const name = this.getName(route)\n    return name ? this.preserveComponents.indexOf(name) !== -1 : false\n  }\n\n  private getName(route: ActivatedRouteSnapshot): string {\n    if (!route.component) return ''\n    return (route.component as any).name\n  }\n}","/*------------------------------------------------------------------------------\n   About      : <Write about the file here>\n   \n   Created on : Wed Jul 12 2017\n   Author     : Raghvendra Varma\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { LocationChangeListener, PlatformLocation } from '@angular/common'\nimport { Inject, Injectable }                       from '@angular/core'\n\nimport { RunContextBrowser, LOG_LEVEL }             from '../../rc-browser'\n\n@Injectable()\nexport class NcPlatformLocation extends PlatformLocation {\n\n  constructor(@Inject('RunContext') private rc: RunContextBrowser) {\n    super()\n    rc.setupLogger(this, 'NcPlatformLocation')\n    // this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'constructor()')\n  }\n\n  get location(): Location {\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'get location()')\n    return location\n  }\n\n\n  getState() {\n\n  }\n\n  getBaseHrefFromDOM(): string {\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'getBaseHrefFromDOM()')\n    return '.'\n  }\n\n  onPopState(fn: LocationChangeListener): void {\n    // this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'onPopState() ignored')\n    // window.addEventListener('popstate', fn, false);\n  }\n\n  onHashChange(fn: LocationChangeListener): void {\n    // this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'onHashChange() ignored')\n    // window.addEventListener('hashchange', fn, false);\n  }\n\n\n  get hostname() {\n    return  location.hostname\n  }\n\n  get port() {\n    return  location.port\n  }\n\n  get href() {\n    return  location.href\n  }\n\n  get protocol() {\n    return  location.protocol\n  }\n\n\n  get pathname(): string { \n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'get pathname()')\n    return location.pathname \n  }\n\n  get search(): string { \n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'get search()')\n    return location.search\n  }\n\n  get hash(): string { \n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'get hash()')\n    return location.hash \n  }\n\n  set pathname(newPath: string) { \n    // this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'set pathname()')\n    // location.pathname = newPath \n  }\n\n  pushState(state: any, title: string, url: string): void {\n    this.rc.isAssert() && this.rc.assert(this.rc.getName(this), false, \n      'pushState', 'First navigation was not done in root ngInit()')\n  }\n\n  replaceState(state: any, title: string, url: string): void {\n    this.rc.isAssert() && this.rc.assert(this.rc.getName(this), false, 'replaceState', \n      'First navigation was not done in root ngInit()')\n  }\n\n  forward(): void { \n    // this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'forward()')\n    // history.forward()\n  }\n\n  back(): void { \n    // this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'back()')\n    // history.back()\n  }\n\n}","/*------------------------------------------------------------------------------\n   About      : Any component which can be directly routed to must extent to \n                this class. This kind of component is a screen. All actions \n                performed on sub components / HTML elements in this kind of \n                component will be logged under the trackable screen name.\n\n   Created on : Sat Nov 03 2018\n   Author     : Sid\n   \n   Copyright (c) 2018 Obopay. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { TrackableScreen }    from './trackable-screen'\nimport { RunContextBrowser }  from '../../rc-browser'\nimport { Mubble }             from '@mubble/core'\n\nexport abstract class RoutableScreen extends TrackableScreen {\n\n  abstract onRouterInit(queryParams: Mubble.uObject<any>, firstInvocation: boolean): void\n  \n  constructor(protected rc: RunContextBrowser) {\n    super(rc)\n  }\n} ","/*------------------------------------------------------------------------------\n   About      : As we have implemented our own history wrapper, this class\n                prevents angular from  mainpulating history \n   \n   Created on : Sun Mar 17 2019\n   Author     : Aditya Baddur\n   \n   Copyright (c) 2019 Obopay. All rights reserved.\n------------------------------------------------------------------------------*/\n\n\nimport { Injectable, \n         Inject\n       }                        from '@angular/core'\nimport { LocationStrategy,\n         LocationChangeListener\n       }                        from '@angular/common'\nimport { RunContextBrowser }    from '../../rc-browser'\n\n@Injectable()\nexport class AppLocationStrategy extends LocationStrategy {\n\n  constructor(@Inject('RunContext') protected rc  : RunContextBrowser) {\n    super()\n  }\n\n  getBaseHref() {\n    return '.'\n  }\n\n  path() {\n    return location.pathname\n  }\n\n  prepareExternalUrl() {\n    return ''\n  }\n\n  onPopState(fn: LocationChangeListener) {\n    \n  }\n\n  pushState(state: any, title: string, path: string, queryParams: string) {\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), `ignoring push state \n      ${state} , ${title}, ${path}, ${queryParams}`)\n  }\n\n  replaceState(state: any, title: string, path: string, queryParams: string) {\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), `ignoring replace state\n      ${state} , ${title}, ${path}, ${queryParams}`)\n  }\n\n  forward() {\n\n  }\n\n  back() {\n\n  }\n\n}","import { RunContextBrowser }                                from \"../../../rc-browser\"\nimport { TranslateService }                                 from \"../translate/translate.service\"\n\nexport enum API_STATE {\n  PROGRESS = 1,\n  ERROR,\n  SUCCESS\n}\n\nexport class ApiState {\n\n  currentState    : API_STATE\n  loadingText     : string\n  emptyDataText   : string\n  errorText       : string\n\n  retryButtonText : string\n  retryOnFailure  : boolean = false\n  errorCode       : string\n\n  constructor(private rc        : RunContextBrowser, \n              private translate : TranslateService) {\n\n    this.loadingText      = translate.instant('cmn_loading')\n    this.errorText        = translate.instant('cmn_toast_err_unknown')\n    this.retryButtonText  = translate.instant('cmn_btn_retry')\n  }\n}\n\nexport class ApiStateBuilder {\n\n  private instance: ApiState\n\n  constructor(private rc        : RunContextBrowser, \n              private translate : TranslateService) {\n\n    this.instance = new ApiState(rc, translate)\n  }\n\n  setCurrentState(state: API_STATE): ApiStateBuilder {\n    this.instance.currentState = state\n    return this\n  }\n\n  setLoadingText(text: string): ApiStateBuilder {\n    this.instance.loadingText = text\n    return this\n  }\n  setEmptyDataText(text: string): ApiStateBuilder {\n    this.instance.emptyDataText = text\n    return this\n  }\n  setErrorText(text: string): ApiStateBuilder {\n    this.instance.errorText = text\n    return this\n  }\n\n  setRetryButtonText(text: string): ApiStateBuilder {\n    this.instance.retryButtonText = text\n    return this\n  }\n\n  retryOnFailure() {\n    this.instance.retryOnFailure = true\n    return this\n  }\n\n  setErrorCode(code: string): ApiStateBuilder {\n    this.instance.errorCode = code\n    return this\n  }\n\n  build(): ApiState {\n    return this.instance\n  }\n\n}","import { trigger, state, \n         animate, style, \n         group, query,\n         transition }                     from '@angular/animations'\n\nexport namespace NavTransition {\n\n  export const ANIM_DURATION            = 400,\n               PAGE_TRANSITION_DURATION = ANIM_DURATION + 'ms',\n               IDLE                     = 'idle',\n               FORWARD                  = 'forward',\n               BACKWARD                 = 'backward',\n               ANIMATION_STYLE          = 'ease-out'\n\n  export const pageTransition = trigger('pageTransition', [\n    transition(`${IDLE} => ${FORWARD}`, [\n      \n      query(':enter, :leave',\n        style({ position: 'fixed', width:'100%' }),\n        { optional: true }),\n      \n      group([\n      \n        query(':leave', [\n          style({ transform: 'translate3d(0, 0, 0)', zIndex: 0})\n        ], { optional: true }),\n\n        query(':enter', [\n          style({ transform: 'translate3d(100%, 0, 0)', zIndex: 100}),\n          animate(`${PAGE_TRANSITION_DURATION} ${ANIMATION_STYLE}`, \n            style({ \n              transform: 'translate3d(0, 0, 0)',\n              zIndex: 100\n            }))\n        ], { optional: true })\n\n      ])\n    ]),\n    transition(`${IDLE} => ${BACKWARD}`, [\n      \n      query(':enter, :leave', style({ position: 'fixed', width:'100%' }),\n        { optional: true }),\n      \n      group([\n        \n        query(':leave', [\n          style({ transform: 'translate3d(0, 0, 0)', zIndex: 100}),\n          animate(`${PAGE_TRANSITION_DURATION} ${ANIMATION_STYLE}`,\n            style({ \n              transform: 'translate3d(100%, 0, 0)', \n              zIndex: 100\n            }))\n        ], { optional: true }),\n\n        query(':enter', [\n          style({ transform: 'translate3d(0, 0, 0)', zIndex: 0})\n        ], { optional: true })\n      ])\n    ])\n  ])\n\n}","import { trigger, animate, \n         style, query,\n         stagger, transition \n       }                                    from '@angular/animations'\n\nexport namespace BottomFlyIn {\n\n  export const ANIM_DURATION    = '.4s',\n               STAGGER_DURATION = 50,\n               ANIMATION_STYLE  = 'ease-out',\n               FLY_STATE        = 'fly',\n               DONT_FLY_STATE   = 'dontFly'\n\n  export const bottomFlyIn = trigger('bottomFlyIn', [\n    transition(`* => ${FLY_STATE}`, [\n      query('.flex-box-child', [\n        style({\n          transform: 'translate3d(0, 200%, 0)',\n          opacity : 0}),\n        stagger(STAGGER_DURATION, [\n          animate(`${ANIM_DURATION} ${ANIMATION_STYLE}`, style({\n            transform: 'translate3d(0, 0, 0)',\n            opacity: 1\n          }))\n        ])\n      ], {optional: true})\n    ])\n  ])\n\n}","\nexport const TIME = {\n  MILL_IN_SEC    : 1000,\n  MILL_IN_MINUTE : 60 * 1000,\n  MILL_IN_HOUR   : 60 * 60 * 1000,\n  MILL_IN_DAY    : 24 * 60 * 60 * 1000\n}\n\nexport const TYPEOF = {\n  STRING : 'string',\n  NUMBER : 'number'\n}\n\nexport interface VerificationSettings  {\n  startTs : number,\n  numbers : {[key: string] : VerificationNumber }\n}\n\nexport interface VerificationNumber {\n  clTrId    : string,\n  attempts  : number\n}\n\nexport const VerificationSettingsExp = {\n  TIME_DEBUG : 5 * 60 * 1000,\n  TIME_PROD  : 60 * 60 * 1000\n}\n\nexport const VerificationError = {\n\n  ERR_INTERNET       : 'ERR_INTERNET',\n  ERR_INVALID_NUM    : 'ERR_INVALID_NUM',\n  ERR_NUM_LIMIT      : 'ERR_NUM_LIMIT',\n  ERR_ATTEMPTS_LIMIT : 'ERR_ATTEMPTS_LIMIT',\n  ERR_TIMEOUT        : 'ERR_TIMEOUT',\n  ERR_NONE           : 'ERR_NONE',\n  ERR_MSISDN_FAIL    : 'ERR_MSISDN_FAIL'\n}\n\nexport const GcCategory = {\n  Notification      : 'NOTIFICATION',\n  FeedbackEmail     : 'FEEDBACK_EMAIL',\n  SmsVerification   : 'SMS_VERIFICATION',\n  Help              : 'HELP',\n  Session           : 'SESSION'\n}\n\nexport const FcCategory = {\n  Help    : 'HELP',\n  Session : 'SESSION'\n}\n\nexport const GcKey = {\n  GeneralConfig       : 'GENERAL_CONFIG',\n  FeedbackEmail       : 'FEEDBACK_EMAIL'\n}\n\nexport const FcKey  = {\n  GeneralConfig : 'GENERAL_CONFIG',\n  UiConfig      : 'UI_CONFIG'\n}\n\nexport const GcValue = {\n\n  FeedbackEmail : {\n\n    email   : 'email', \n    topics  : 'topics',\n\n    topicsValue : {\n      privacy       : 'privacy',\n      default       : 'default',\n      notification  : 'notification',\n      settings      : 'settings',\n      createStance  : 'createStance'\n    }\n  },\n\n  Help : {\n\n    customerCareNo : 'custCareNo'\n  }\n}\n\nexport interface SessionGC {\n  bgTimeoutSec    : number\n  fgTimeoutSec    : number\n}\n\n\nexport interface UiFlavourConfig {\n  w2bActive       : boolean\n  isVeri5Enabled  : boolean\n}\n\nexport interface HelpFlavourConfig {\n  custCareEmail   : string\n  custCareNo      : string\n}\n\n\nexport const HashidParams = {\n  LogLevel        : '__logLevel',\n  DisableCaptcha  : '__disableCaptcha'\n}\n\nexport interface Color {\n  name          : string\n  hex           : string\n  darkContrast  : boolean\n}\n\n\nexport type EnvConfig = {\n  staticUrlPrefix : string\n}","/*------------------------------------------------------------------------------\n   About      : Constants with native platform\n   \n   Created on : Fri Nov 02 2018\n   Author     : Sid\n   \n   Copyright (c) 2018 Obopay. All rights reserved.\n------------------------------------------------------------------------------*/\n\nexport const TOAST_DURATION       = 5000\nexport const TOAST_DURATION_DEBUG = 10000\n\nexport const LAUNCH_CONTEXT = {\n  TYPE : 'type',\n  MODE : 'mode',\n  DATA : 'data'\n}\n\nexport const LaunchContextMode = {\n  BUSINESS : 'business'\n}\n\nexport const ANDROID_PERM = {\n  STORAGE   : 'android.permission.WRITE_EXTERNAL_STORAGE',\n  CAMERA    : 'android.permission.CAMERA',\n  LOCATION  : 'android.permission.ACCESS_FINE_LOCATION',\n  CONTACTS  : 'android.permission.READ_CONTACTS',\n  SMS       : 'android.permission.READ_SMS',\n  GALLERY   : 'android.permission.WRITE_EXTERNAL_STORAGE',\n}\n\nexport const IOS_PERM = {\n  STORAGE   : 'STORAGE',\n  CAMERA    : 'CAMERA',\n  LOCATION  : 'LOCATION',\n  CONTACTS  : 'CONTACTS',\n  SMS       : 'SMS',\n  GALLERY   : 'PHOTOS'\n}\n\nexport const BROWSER_PERM = {\n  STORAGE   : 'STORAGE',\n  CAMERA    : 'CAMERA',\n  LOCATION  : 'LOCATION',\n  CONTACTS  : 'CONTACTS',\n  SMS       : 'SMS',\n  GALLERY   : 'STORAGE'\n}\n\nexport enum Permission {\n  STORAGE   = 'STORAGE',\n  CAMERA    = 'CAMERA',\n  LOCATION  = 'LOCATION',\n  CONTACTS  = 'CONTACTS',\n  SMS       = 'SMS',\n  GALLERY   = 'GALLERY'\n}\n\nexport namespace MobileSdkResponse {\n\n  export namespace CollectRequest {\n\n    export enum Response {\n      ACKNOWLEDGED = 'ACKNOWLEDGED',\n      COMPLETED    = 'COMPLETED',\n      DECLINED     = 'DECLINED'\n    }\n  }\n}\n\nexport interface NativeRouterResponse {\n  errorCode     : string\n  errorMessage  : string\n  data          : object\n  events        : Array<JSON>\n}","import { Permission, \n         BROWSER_PERM \n       }                          from './native-constants'\nimport { RunContextBrowser }      from '../../rc-browser'\nimport { LOG_LEVEL }              from '@mubble/core'\n\nexport class MuWebApi {\n\n\n  constructor(protected rc : RunContextBrowser) {}\n\n  async hasPermission(permission : Permission) : Promise<boolean> {\n    return await this.checkPermission(permission)\n  }\n\n  async checkPermission(permission : Permission) {\n\n    switch (permission) {\n\n      case BROWSER_PERM.CAMERA: \n\n        const permissionStatus = await (navigator as any).permissions.query({ name: 'camera' })\n        return (permissionStatus.state === 'granted')\n\n      case BROWSER_PERM.GALLERY:\n        return true\n\n      default:\n        if (this.rc.getGlobalLogLevel() !== LOG_LEVEL.NONE)\n        this.rc.uiRouter.showToast(`${permission} permission to be implemented`)\n        return true\n    }\n  }\n\n  async getPermission(permission : Permission) : Promise<boolean> {\n    switch (permission) {\n      case BROWSER_PERM.CAMERA: \n        try {\n          await navigator.mediaDevices.getUserMedia({ video: true, audio: false })\n          return true\n        } catch(err) {\n          return false\n        }\n\n      case BROWSER_PERM.GALLERY:\n        return true\n    }\n  }\n\n  async getPictureFromCamera() {\n\n    // return await this.rc.uiRouter.getRoot().captureWebCamera()\n    return {} as unknown\n\n  }\n\n}\n","import { RunContextBrowser }    from '../../rc-browser'\nimport { MuWebApi }             from './web-api'\nimport { Permission }           from './native-constants'\n\nexport class MuWebBridge {\n\n  webApi : MuWebApi\n\n  constructor(protected rc : RunContextBrowser) {\n    this.webApi = new MuWebApi(rc)\n  }\n\n  async handleRequest(requestId: number, apiName: string, ...params: any[]) {\n    if (!this[apiName]) {\n      throw new Error(`Missing API ${apiName} implementation in Web bridge.`)\n    }\n    const obj = await this[apiName](params[0])\n    this.rc.bridge.asyncResponseFromNative(requestId, obj)\n  }\n\n/*==============================================================================\n                          FIREBASE \n==============================================================================*/\n\n  setUserId(userId: number) {\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), \n      `Setting userId ${userId}`)\n  }\n\n  logEvent(eventName: string, eventDataStr: string) {\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), \n      `Logging event: ${eventName} Data: ${eventDataStr}`)\n  }\n\n  setUserProperty(propName: string, value: string) {\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), \n      `Setting userProperty: ${propName} Value: ${value}`)  \n  }\n\n  protected fingerprintScan() {\n    // this.rc.uiRouter.showToast('fingerprintScan Feature not supported for Browser')\n    return\n  }\n\n  protected scanBarcode() {\n    // this.rc.uiRouter.showToast('scanBarcode Feature not supported for Browser')\n    return null\n  }\n\n  protected payViaQr() {\n    this.rc.uiRouter.showToast('payViaQr Feature not supported for Browser')\n    return null\n  }\n\n  protected openInMobileBrowser(url : string) {\n    window.open(url)\n  }\n\n  protected getNativeMigrationInfo() {\n    // this.rc.uiRouter.showToast('get native migration info not supported for Browser')\n    return null\n  }\n\n  protected getCurrentLocation() {\n\n    if (navigator.geolocation) {\n      // check if geolocation is supported/enabled on current browser\n      navigator.geolocation.getCurrentPosition(\n\n        function success(position) {\n          // for when getting location is a success\n          return {\n            lat : position.coords.latitude,\n            lng : position.coords.longitude\n          }\n        },\n\n        function error(error_message) {}\n      );\n    }\n\n    return null\n  }\n\n  protected closeMobileBrowser() {\n    \n  }\n\n  protected getPhoneContacts() {\n    return {contacts : []}\n  }\n\n  protected async hasPermission(params : any[]) {\n    // this.rc.uiRouter.showToast(`${permission} feature not supported for browser`)\n    const permission    : Permission  = params[0] \n    return { 'hasPerm' : await this.webApi.hasPermission(permission) }\n  }\n\n  protected requestMobNumHint() {\n    this.rc.uiRouter.showToast('requestMobNumHint Feature not supported for Browser')\n    return null\n  }\n\n  protected async takePictureFromCamera() {\n    this.rc.uiRouter.showToast('takePictureFromCamera Feature not supported for Browser')\n    const resp = await this.webApi.getPictureFromCamera()\n    return resp\n  }\n\n  protected selectDocumentFile() {\n    this.rc.uiRouter.showToast('selectDocumentFile Feature not supported for Browser')\n    return {'success': false} \n  }\n\n  protected selectPictureFromGallery() {\n    this.rc.uiRouter.showToast('selectPictureFromGallery Feature not supported for Browser')\n    return {'success': false}\n  }\n\n  protected async getPermission(params : any[]) {\n    const permission    : Permission  = params[0] \n    const showRationale : boolean     = params[1] || true\n    return { permissionGiven: await this.webApi.getPermission(permission), dialogShown: true}\n  }\n\n  protected writeExternalStyles(base64Data: string) {\n    this.rc.uiRouter.showToast('writeExternalStyles Feature not supported for Browser')\n    return true\n  }\n\n  protected saveBinaryFile(filePath: string /* embeds ncInstanceId */, fileName: string, \n                         base64Data: string) {\n    this.rc.uiRouter.showToast('saveBinaryFile Feature not supported for Browser')\n    return true\n  }\n\n  protected setNotificationConfig(config: string) {\n  }\n\n  protected closeApp() {\n    window.location.reload()\n  }\n\n  protected launchAppMarket(packageName ?: string) {\n    window.open(`https://play.google.com/store/apps/details?id=${packageName}`)\n  }\n\n  protected sendMail(email ?: string, subject ?: string, body ?: string) {\n    this.rc.uiRouter.showToast(`SendMail Feature not supported for Browser`)\n  }\n\n  protected placeCall(mobileNumber: string) {\n    this.rc.uiRouter.showToast(`PlaceCall Feature not supported for Browser`)\n  }\n\n  protected checkIfPkgInstalled(pkgName: string) {\n    this.rc.uiRouter.showToast(`checkIfPkgInstalled Feature not supported for Browser`)\n    return false\n  }\n\n  protected listenForSmsCode() {\n\n  }\n\n  protected setVerStringToken(clientTransactionId: string) {\n\n  }\n\n  protected copyToClipBoard(text: string) {\n    this.rc.uiRouter.showToast(`copyToClipBoard Feature not supported for Browser`)\n    return false\n  }\n\n  protected openSoftInputKeyboard() {\n\n  }\n\n  protected hideSoftInputKeyboard() {\n\n  }\n\n  protected canAuthWithFingerprint() {\n    return { canAuth : false }\n  }\n\n  protected logOutCurrentUser() {\n    window.location.reload()\n  }\n\n  protected resetApp() {\n\n    localStorage.clear()\n    window.location.reload()\n  }\n\n  protected getDeviceInfo() {\n    return '{}'\n  }\n\n  protected setDebuggable() {\n    \n  }\n\n}","/*------------------------------------------------------------------------------\n   About      : Class to bridge with native platform\n   \n   Created on : Fri Nov 02 2018\n   Author     : Sid\n   \n   Copyright (c) 2018 Obopay. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { Mubble, \n         NetworkType, \n         WireObject, \n         LOG_LEVEL,\n         CustomData\n       }                                            from '@mubble/core'\nimport * as NATIVE                                  from './native-constants'\nimport { RunContextBrowser }                        from '../../rc-browser'\nimport { MuWebBridge }                                from './web-bridge'\nimport { NgZone }                                   from '@angular/core'\n\nconst ANDROID = 'Android'\nconst IPAD    = 'iPad'\n\nexport interface ReferrerParams {\n  utm_source    : string\n  utm_medium    : string\n  utm_campaign  : string\n  utm_term      : string\n  utm_content   : string\n  gclid         : string\n  mode          : string\n}\n\n\nexport enum State {\n  LOADING,      // The js files are getting parsed and loaded in memory\n  INITIALIZED,  // Code initialized and the bridge is up\n  SHOWN         // UI being displayed, albeit busy in server requests\n}\n\nexport enum SDK_TYPE {\n  MOBILE  = 'MOBILE',    // mobile SDK with Obopay app installed\n  WEB     = 'WEB',       // web SDK\n  CORDOVA = 'CORDOVA'    // mobile SDK with Obopay app not installed; web invocation\n}\n\nexport enum UserAgent {\n  BROWSER = 'BROWSER',\n  ANDROID = 'ANDROID',\n  IOS     = 'IOS'\n}\n\nexport interface Location {\n  lat : number\n  lng : number\n}\n\nexport interface MobileSdkParams {\n  source    : string\n  requestId : number\n}\n\nclass InitConfig {\n\n  remoteUrl        : string\n  appVersion       : string                 = ''\n  localStoragePath : string                 = ''\n  appChannel       : string                 = 'WEB'\n\n  pseudoId         : string                 = ''\n  fcmId            : string                 = ''\n  adId             : string                 = ''\n  deviceId         : string                 = ''\n\n  appInstallTs     : number                 = Date.now()\n  migrationInfo    : Mubble.uObject<string>\n\n  constructor(remoteUrl : string) {\n    this.remoteUrl  = remoteUrl\n  }\n}\n\nclass LaunchContext {\n\n  directLink        : string\n  source            : string // mobile SDK package name \n  referrerParams    : ReferrerParams = {} as ReferrerParams\n  isUpgrade         : boolean = false\n}\n\nexport class MuBridge {\n\n  public  currKeyboardHt        : number\n  protected runningInBrowser    : boolean = false\n\n  private nextRequestId         : number = 1\n  private requestMap            : Mubble.uObject<NativeAsyncRequest> = {}\n\n  private location              : object\n  private netType               : string\n  private _state                : State\n  protected userAgent           : UserAgent\n  protected permObj             : object\n\n  private initConfig            : InitConfig \n  protected launchContext       : LaunchContext = new LaunchContext()\n\n  protected webBridge           : MuWebBridge\n  protected sdkType             : SDK_TYPE\n  protected mobileSdkParams     : MobileSdkParams = {} as MobileSdkParams\n\n\n\n  constructor(protected rc      : RunContextBrowser,\n              protected ngZone  : NgZone) {\n  }\n\n  // WARNING: rc is not initied at this stage. Do not use\n  preInit(remoteUrl : string) {\n\n    this.initConfig = new InitConfig(remoteUrl)\n\n    if (window['webkit'] && window['webkit'].messageHandlers.cordova) {\n\n      this.userAgent  = UserAgent.IOS\n      this.permObj    = NATIVE.IOS_PERM\n      \n    } else if (window['cordova']) {\n\n      this.userAgent  = UserAgent.ANDROID\n      this.permObj    = NATIVE.ANDROID_PERM\n      \n    } else {\n      this.userAgent  = UserAgent.BROWSER\n      this.webBridge  = new MuWebBridge(this.rc)\n      this.permObj    = NATIVE.BROWSER_PERM\n    }\n     \n    this.runningInBrowser = this.userAgent === UserAgent.BROWSER\n    this.state            = State.INITIALIZED\n  }\n\n  async init() {\n\n    if (this.userAgent === UserAgent.BROWSER) {\n      this.onConnectionAttr(navigator.onLine ? NetworkType.wifi : null, null)\n\n    } else {\n      const data          = await this.sendAsyncRequest('getInitData')\n      this.initConfig     = data['initConfig']\n      this.launchContext  = data['launchContext']\n      \n      const connAttr      = data['connAttr']\n      this.onConnectionAttr(connAttr['netType'], connAttr['location'])\n    }\n\n    if (this.launchContext.referrerParams && \n        this.launchContext.referrerParams.mode === NATIVE.LaunchContextMode.BUSINESS) {\n      this.sdkType = SDK_TYPE.MOBILE\n    }\n  }\n\n  isRunningInDev() {\n    return this.initConfig.remoteUrl == 'http://localhost'\n  }\n\n  isRunningInBrowser() {\n    return this.runningInBrowser\n  }\n\n  isRunningInMWeb() {\n    return window.navigator.userAgent.includes(ANDROID) && this.isRunningInBrowser()\n  }\n\n  isRunningInIPad() {\n    return window.navigator.userAgent.includes(IPAD)\n  }\n\n/*==============================================================================\n                                    STATE  \n==============================================================================*/\n\n  get state() {\n    return this._state\n  }\n\n  set state(newState: State) {\n    this._state = newState\n    if (this.userAgent !== UserAgent.BROWSER) {\n      this.sendAsyncRequest('setStateFromJs', State[this._state])\n    }\n  }\n\n  setStateShown() {\n    this.state = State.SHOWN\n  }\n\n/*==============================================================================\n                              LAUNCH CONTEXT \n==============================================================================*/\n\n  getDirectLink() {\n    return this.launchContext.directLink\n  }\n\n  setWebDirectLink(directLink: string) {\n    this.launchContext.directLink = directLink\n  }\n\n  resetDirectLink() {\n    this.launchContext.directLink = null\n  }\n\n  getReferrerParams(): ReferrerParams {\n    return this.launchContext.referrerParams\n  }\n\n  isUpgrade() {\n    return this.launchContext.isUpgrade\n  }\n\n/*==============================================================================\n                               INIT CONFIG \n==============================================================================*/\n\n  getUserAgent() {\n    return this.userAgent\n  }\n\n  getRemoteUrl() {\n    return this.initConfig.remoteUrl\n  }\n\n  getAppVersion() {\n    return this.initConfig.appVersion\n  }\n\n  getAppChannel() {\n    return this.initConfig.appChannel\n  }\n\n  getPseudoId() {\n    return this.initConfig.pseudoId\n  }\n\n  getFcmId() {\n    return this.initConfig.fcmId\n  }\n\n  getAdId() {\n    return this.initConfig.adId\n  }\n\n  getAppInstallTime(): number {\n    return this.initConfig.appInstallTs\n  }\n\n  getDeviceId() {\n    return ''\n  }\n\n  getLocation(): string {\n    return JSON.stringify(this.location)\n  }\n\n  getCordovaNetworkType() {\n    return this.netType\n  }\n\n  getLocalStoragePath() {\n    return this.initConfig.localStoragePath\n  }\n\n/*==============================================================================\n                          FIREBASE \n==============================================================================*/\n\n  async setUserId(userId: number) {\n    await this.sendAsyncRequest('setUserId', String(userId))\n  }\n\n  async logEvent(eventName: string, eventDataStr: string) {\n    await this.sendAsyncRequest('logEvent', eventName, eventDataStr)\n  }\n\n  async setUserProperty(propName: string, value: string) {\n    await this.sendAsyncRequest('setUserProperty', propName, value)\n  }\n\n/*==============================================================================\n                                 SDK \n==============================================================================*/\n\n  isWebSdkInvocation(): boolean {\n    return this.sdkType === SDK_TYPE.WEB || this.sdkType === SDK_TYPE.CORDOVA\n  }\n\n  isMobileSdkInvocation(): boolean {\n    return this.sdkType === SDK_TYPE.MOBILE\n  }\n\n  isSdkInvocation(): boolean {\n    return !!this.sdkType\n  }\n\n  getSdkType(): SDK_TYPE {\n    return this.sdkType\n  }\n\n  setMobileSdkParams(source: string, requestId: string) {\n    this.mobileSdkParams.source     = source\n    this.mobileSdkParams.requestId  = Number(requestId)\n  }\n\n  getMobileSdkSource() {\n    return this.mobileSdkParams.source\n  }\n\n  getMobileSdkRequestId() {\n    return this.mobileSdkParams.requestId\n  }\n\n  /**\n   * This will only get invoked for Sdk type Mobile since this is the main app and \n   * any SDK invocation would happen wrt a direct link and response via Intent broadcast\n   * in Android \n   */\n  async onSdkSuccessResponse(requestId: number, data: object = null, closeApp: boolean = true) {\n    \n    this.rc.isAssert() && this.rc.assert(this.rc.getName(this), requestId, \n      `RequestId is not defined`)\n\n    if (this.sdkType !== SDK_TYPE.MOBILE) {\n      this.rc.isWarn() && this.rc.warn(this.rc.getName(this), \n        `Came to Bridge SDK response for inv other than SDK Type Mobile, returning...`)\n      return\n    }\n\n    const resp = Object.assign({ code : 'SUCCESS' }, data) \n    await this.onMobileSdkResponse(requestId, resp, closeApp)\n  }\n\n  async onSdkFailureResponse(requestId: number, data: object, uiError: Object, closeApp: boolean = true) {\n\n    this.rc.isAssert() && this.rc.assert(this.rc.getName(this), requestId, \n      `RequestId is not defined`)\n\n    if (this.sdkType !== SDK_TYPE.MOBILE) {\n      this.rc.isWarn() && this.rc.warn(this.rc.getName(this), \n        `Came to Bridge SDK response for inv other than SDK Type Mobile, returning...`)\n      return\n    }\n\n    let resp = Object.assign({ code : 'FAILURE' }, data)\n        resp = Object.assign(uiError, resp)\n    await this.onMobileSdkResponse(requestId, resp, closeApp)\n  }\n\n  protected async onMobileSdkResponse(requestId: number, data: object, closeApp: boolean = true) {\n    \n    const obj = Object.assign({ requestId, source : this.getMobileSdkSource()}, data)\n    await this.sendAsyncRequest('onMobileSdkResponse', JSON.stringify(obj), closeApp)\n  }\n\n/*==============================================================================\n                            STORAGE CORDOVA\n==============================================================================*/\n\n  async setGlobalKeyValue(key: string, value: string) {\n    await this.sendAsyncRequest('setGlobalKeyValue', key, value)\n  }\n\n  async getGlobalKeyValue(key: string): Promise<string> {\n    const object = await this.sendAsyncRequest('getGlobalKeyValue', key)\n    return object['value']\n  }\n\n  async setUserKeyValue(key: string, value: string) {\n    await this.sendAsyncRequest('setUserKeyValue' ,key, value)\n  }\n\n  async getUserKeyValue(key: string): Promise<string> {\n    const object = await this.sendAsyncRequest('getUserKeyValue', key)\n    return object['value']\n  }\n\n  async setGcConfig(config: string) {\n    await this.sendAsyncRequest('setGcConfig', config)\n  }\n\n  async getGcConfig(category: string, key: string): Promise<string> {\n    const object = await this.sendAsyncRequest('getGcConfig', category, key)\n    return object['value']\n  }\n\n/*==============================================================================\n                            CORDOVA ROUTER\n==============================================================================*/\n\n  async prepareConnection() {\n    await this.sendAsyncRequest('prepareConnection')\n  }\n\n  async sendRouterRequest(api: string, params: object): Promise<NATIVE.NativeRouterResponse> {\n\n    const obj = await this.sendAsyncRequest('sendRequest', api, JSON.stringify(params))\n    return obj as NATIVE.NativeRouterResponse\n  }\n\n  async sendRouterEvent(name: string, params: object, ephemeral: boolean) {\n    await this.sendAsyncRequest('sendEvent', name, JSON.stringify(params), ephemeral)\n  }\n\n/*==============================================================================\n                              BRIDGE UTILS\n==============================================================================*/\n\n  isAndroid(){\n    return (this.userAgent  === UserAgent.ANDROID)\n  }\n\n  isIos(){\n    return (this.userAgent  === UserAgent.IOS)\n  }\n\n  getUserProfilePicUrl(clientId: number, profilePicFileName?: string): string {\n\n    if (!this.rc.userKeyVal.getWebProfilePicBase64(clientId)) return null\n\n    if (this.runningInBrowser) {\n      return 'data:image/jpeg;base64,' + this.rc.userKeyVal.getWebProfilePicBase64(clientId)\n    }\n\n    // TODO - fix profile pic file name\n    // const profPicFileName = profilePicFileName || this.rc.userKeyVal.profilePicFileName\n    const profPicFileName = profilePicFileName \n\n    const url = this.getLocalStoragePath() + \"/\" + \n           `users/${String(clientId)}` + \"/\" + \n           profPicFileName + \n           '?random+\\=' + Math.random()\n    return ''\n  }\n\n\n/*==============================================================================\n                         ASYNC REQUESTS TO CORDOVA\n==============================================================================*/\n\n  async getDeviceInfo(): Promise<Object> {\n\n    const obj = await this.sendAsyncRequest('getDeviceInfo')\n    return obj\n  }\n\n  async getSessionInfo(): Promise<NATIVE.NativeRouterResponse> {\n\n    const obj = await this.sendAsyncRequest('getSessionInfo')\n    return obj as NATIVE.NativeRouterResponse\n  }\n\n  async recreateSession(): Promise<NATIVE.NativeRouterResponse> {\n\n    const obj = await this.sendAsyncRequest('recreateSession')\n    return obj as NATIVE.NativeRouterResponse\n  }\n\n  async getCurrentLocation(): Promise<Location> {\n\n    const json = await this.sendAsyncRequest('getCurrentLocation')\n    return {\n      lat : json['lat'],\n      lng : json['lng']\n    }\n  }\n\n  async requestMobNumHint() {\n\n    if (this.userAgent !== UserAgent.ANDROID) return null\n    const resp = await this.sendAsyncRequest('requestMobNumHint')\n    return resp ? resp['selectedId'] : null\n  }\n\n  async getPhoneContacts() {\n    const obj = await this.sendAsyncRequest('getPhoneContacts')\n    return obj['contacts']\n  }\n\n  // /**\n  //  * @returns { success: boolean, base64: string, mimeType: string, cropped: boolean, failureCode: string }\n  //  */\n  async takePictureFromCamera() {\n    const obj = await this.sendAsyncRequest('takePictureFromCamera') \n    return obj\n  }\n\n  // /**\n  //  * @returns { success: boolean, base64: string, mimeType: string, cropped: boolean, failureCode: string }\n  //  */\n  async selectPictureFromGallery() {\n    const obj = await this.sendAsyncRequest('selectPictureFromGallery') \n    return obj\n  }\n\n  // /**\n  //  * @returns { base64: string, checkSum: string, mimeType: string }\n  //  */\n  async selectDocumentFile(): Promise<object> {\n    const obj = await this.sendAsyncRequest('selectDocumentFile')\n    \n    return obj\n  }\n  \n  async getPermission(permission: NATIVE.Permission, showRationale: boolean = true): \n    Promise<{permGiven : boolean, dialogShown: boolean, webStream? : MediaStream}> {\n\n    const json = await this.sendAsyncRequest('getPermission', this.permObj[permission], showRationale)\n    return { permGiven: json['permissionGiven'], dialogShown: json['dialogShown']}\n  }\n\n  async writeExternalStyles(base64Data: string) {\n\n    const json = await this.sendAsyncRequest('writeExternalStyles', base64Data) \n    return json['success']\n  }\n\n  async saveBinaryFile(filePath: string /* embeds ncInstanceId */, fileName: string, \n    base64Data: string) {\n    const json = await this.sendAsyncRequest('saveBinaryFile', filePath, fileName, base64Data)\n    return json['success']\n  }\n\n  /**\n  //  * @returns { action: string, result: string }\n   * \n   * Eg. action : SAVED_PAYEES, DISMISS, SCAN\n   * result : Scanned result if action is SCAN\n   */\n  async payViaQr(invSource: string): Promise<object> {\n\n    const object = await this.sendAsyncRequest('payViaQr', invSource)\n    return object\n  }\n\n  async scanQrCode(invSource: string, title : String) : Promise<object> {\n\n    const object = await this.sendAsyncRequest('scanQrCode', invSource, title)\n    const scanResult  = {\n      result  : object['result'],\n      action  : object['action']\n    }\n    return scanResult\n  }\n\n  async scanBarcode(invSource: string): Promise<Object> {\n\n    if (!await this.hasPermission(NATIVE.Permission.CAMERA)) {\n      const resp = await this.getPermission(NATIVE.Permission.CAMERA)\n      if (!resp.permGiven) {\n        this.rc.uiRouter.showToast('Can\\'t scan Barcode without Camera permission')\n        return null\n      }\n    }\n\n    const obj = await this.sendAsyncRequest('scanBarcode', invSource)\n    return obj\n  }\n\n  // async fingerprintScan() {\n  //   await this.sendAsyncRequest('fingerprintScan')\n  // }\n\n  // async canAuthWithFingerprint(): Promise<boolean> {\n  //   const obj = await this.sendAsyncRequest('canAuthWithFingerprint')\n  //   return obj['canAuth']\n  // }\n\n  async openInMobileBrowser(url: string) {\n    await this.sendAsyncRequest('openInMobileBrowser', url)\n  }\n\n  async closeMobileBrowser() {\n    await this.sendAsyncRequest('closeMobileBrowser')\n  }\n\n  async enableDebug() {\n\n    this.rc.setGlobalLogLevel(LOG_LEVEL.DEBUG)\n    this.rc.globalKeyVal.logLevel = LOG_LEVEL.DEBUG\n    await this.sendAsyncRequest('setDebuggable')\n    this.rc.uiRouter.showToast('Log level changed to debug')\n  }\n\n  async updateGcConfig() {\n    if (this.userAgent !== UserAgent.BROWSER) await this.sendAsyncRequest('updateGcConfig')\n  }\n\n  async closeApp() {\n    await this.sendAsyncRequest('closeApp')\n  }\n\n  async logoutUser() {\n    await this.sendAsyncRequest('logoutUser')\n  }\n\n  async forgetUser() {\n    await this.sendAsyncRequest('forgetUser')\n  }\n\n  async launchAppMarket(packageName : string = '') {\n    await this.sendAsyncRequest('launchAppMarket', packageName)\n  }\n\n  async sendMail(email ?: string, subject ?: string, body ?: string) {\n\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), {email, subject})\n    return await this.sendAsyncRequest('sendMail', email || '', subject || '', body || '')\n  }\n\n  async placeCall(mobileNumber: string) {\n\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), `Placing call with number ${mobileNumber}`)\n    await this.sendAsyncRequest('placeCall', mobileNumber)\n  }\n\n  async checkIfPkgInstalled(pkgName: string): Promise<boolean> {\n    const obj = await this.sendAsyncRequest('checkIfPkgInstalled', pkgName)\n    return obj['installed']\n  }\n\n  async hasPermission(permission: NATIVE.Permission): Promise<boolean> {\n\n    const obj = await this.sendAsyncRequest('hasPermission', this.permObj[permission])\n    return obj['hasPerm']\n  }\n\n  async listenForSmsCode() {\n    await this.sendAsyncRequest('listenForSmsCode')\n  }\n\n  async setVerStringToken(clientTransactionId: string) {\n    await this.sendAsyncRequest('setVerStringToken', clientTransactionId)\n  }\n\n  async copyToClipBoard(text: string) {\n    return await this.sendAsyncRequest('copyToClipBoard', text)\n  }\n\n  async openSoftInputKeyboard() {\n    if (this.userAgent === UserAgent.ANDROID) await this.sendAsyncRequest('openSoftInputKeyboard')\n  }\n\n  async hideSoftInputKeyboard() {\n    if (this.userAgent === UserAgent.ANDROID) await this.sendAsyncRequest('hideSoftInputKeyboard')\n  }\n\n  async logOutCurrentUser() {\n    await this.rc.userKeyVal.logOutCurrentUser()\n    // const params: LogoutUser.params = {}\n\n    //await this.rc.router.sendRequest(this.rc, LogoutUser.name, params)\n    await this.sendAsyncRequest('logoutUser')\n  }\n\n  async resetApp() {\n    await this.sendAsyncRequest('resetApp')\n  }\n\n/*------------------------------------------------------------------------------\n  F R O M    N A T I V E\n------------------------------------------------------------------------------*/\n\n  async asyncRequestFromNative(fnName: string, requestTag: string, ...params: any[]) {\n\n    this.ngZone.run(() => {\n      this.asyncRequestFromNativeInternal(fnName, requestTag, params)\n    })\n  }\n\n  private async asyncRequestFromNativeInternal(fnName: string, requestTag: string, ...params: any[]) {\n\n    const fn = this[fnName]\n    this.rc.isAssert() && this.rc.assert(this.rc.getName(this), \n      typeof fn === 'function', fnName)\n\n    const resp = await fn.apply(this, params)\n\n    this.rc.isAssert() && this.rc.assert(this.rc.getName(this), \n      resp && (typeof resp === 'object'), resp)\n\n    if (this.userAgent !== UserAgent.BROWSER) {\n      this.sendAsyncRequest('asyncRequestResponseFromJs', requestTag, JSON.stringify(resp))\n    }\n  }\n\n  eventFromNative(eventName: string, ...params: any[]) {\n\n    this.ngZone.run(() => {\n\n      const fnName  = `on${eventName}`,\n            fn      = this[fnName]\n\n      this.rc.isAssert() && this.rc.assert(this.rc.getName(this), \n        typeof fn === 'function', fnName)\n\n      fn.apply(this, params)\n\n    })\n  }\n\n/*------------------------------------------------------------------------------\n  E V E N T S   F R O M   N A T I V E\n------------------------------------------------------------------------------*/\n\n  private onUpdateCustomData(json: object) {\n    this.rc.router.updateCustomData(this.rc, json as CustomData)\n  }\n\n  private onEphEvent(wo: object) {\n    this.rc.router.providerMessage(this.rc, [wo as WireObject])\n  }\n\n  private onVerSmsCode(smsBody: string) {\n    // this.rc.uiRouter.getRoot().onVerificationSmsCode(smsBody)\n  }\n\n  private onVerSmsTimeout() {\n\n  }\n\n  private onMobileBrowserClosed() {\n    // EventSystem.broadcast(this.rc, APP_UI_EVENT.MOBILE_BROWSER_CLOSED)\n  }\n\n  private onAdjustPan(factorHeight: number) {\n    this.currKeyboardHt = factorHeight\n    // EventSystem.broadcast(this.rc, APP_UI_EVENT.ADJUST_PAN_FOR_SCREEN)\n  }\n\n  private onFingerprintScanResult(result: string) {\n    // EventSystem.broadcast(this.rc, APP_UI_EVENT.FINGERPRINT_SCAN_RESULT, JSON.parse(result))\n  }\n\n  private onConnectionAttr(netType: string, location: object) {\n\n    if (netType) this.netType = netType\n\n    if (!location) return\n\n    const lat: number = location['lat']\n    const lng: number = location['lng']\n\n    if (lat && lng) {\n      this.location = location\n\n      // if (this.rc.router && this.rc.userKeyVal.clientId) {\n      //   const locUpdReq: LocationUpdateEvent.params = { lat, lng }\n      //   this.rc.router.sendEvent(this.rc, LocationUpdateEvent.name, locUpdReq, \n      //     LocationUpdateEvent.ephemeral)\n      // }\n    }\n  }\n\n  private onScreenPause() {\n    // EventSystem.broadcast(this.rc, APP_UI_EVENT.CORDOVA_SCREEN_PAUSE)\n  }\n\n  private onScreenResume() {\n    // EventSystem.broadcast(this.rc, APP_UI_EVENT.CORDOVA_SCREEN_RESUME)\n  }\n\n  // onLaunch(directLink: string) {\n\n  //   if (!directLink) return\n  //   this.launchContext.directLink = directLink\n  //   this.rc.uiRouter.getRoot().showLanding(false, false)\n  // }\n\n  setDirectLink(directLink: string) {\n\n    if (!directLink) return\n    this.launchContext.directLink = directLink\n  }\n\n/*------------------------------------------------------------------------------\n  A P P  R E Q U E S T \n------------------------------------------------------------------------------*/\n\n  /**\n   * Request has a response to be given back to JS mapped with requestId\n   * @param messageId API to be called\n   * @param params arguments for the API\n   */\n  protected async sendAsyncRequest(apiName: string, ...params: any[]) {\n\n    const nar = new NativeAsyncRequest(this.nextRequestId++, apiName)\n    this.requestMap[nar.requestId] = nar\n\n    switch(this.userAgent) {\n\n      case UserAgent.ANDROID:\n        window['cordova'][apiName](nar.requestId, ...params)\n        break\n\n      case UserAgent.IOS:\n        window['webkit'].messageHandlers.cordova.postMessage({ requestId: nar.requestId, \n          method: apiName, args: params })\n        break\n\n      case UserAgent.BROWSER:\n        this.webBridge.handleRequest(nar.requestId,apiName, params)\n        break\n    }\n    \n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), \n      `Response received for sendAsyncRequest: requestid: ${nar.requestId}, \n      apiName: ${apiName}`)\n    return await nar.promise\n  }\n\n  // TODO: make private, web-bridge dependency\n  asyncResponseFromNative(requestId: number, json: object) {\n\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), \n      `asyncResponseFromNative requestId:${requestId} Response:${JSON.stringify(json)}`)\n    const nar: NativeAsyncRequest = this.requestMap[requestId]\n    if (!nar) {\n      this.rc.isError() && this.rc.error(this.rc.getName(this), 'Request id', \n          requestId, 'is missing in request map')\n      return\n    }\n    delete this.requestMap[requestId]\n    nar.resolve(json)\n  }\n}\n\nclass NativeAsyncRequest {\n      \n  promise         : Promise<object>\n  resolve         : (object) => void\n  reject          : () => void\n\n  constructor(public requestId : number, \n              public apiName: string) {\n\n    this.promise    = new Promise((resolve, reject) => {\n      this.resolve  = resolve\n      this.reject   = reject\n    })\n  }\n}\n","/*------------------------------------------------------------------------------\n   About      : <Write about the file here>\n   \n   Created on : Wed Sep 18 2019\n   Author     : Siddharth Garg\n   \n   Copyright (c) 2019 Obopay. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { MuBridge, \n         UserAgent, \n         State, \n         SDK_TYPE\n       }                              from './mu-bridge'\nimport { MuWebBridge }                from './web-bridge'\nimport * as NATIVE                    from './native-constants'\nimport { Mubble }                     from '@mubble/core'\nimport { NgZone }                     from '@angular/core'\nimport { RunContextBrowser }          from '../../rc-browser'\n\nexport interface WebSessionInitData {\n  version              : string\n  mobileNo             : string\n  authKey              : string\n  businessLogoUrl      : string\n  businessName         : string\n  businessRegId       ?: string\n  businessId          ?: string\n  businessColorHex    ?: string\n  isRunningInCordova  ?: boolean\n}\n\nenum RequestMessageId {\n  REQUEST_SESSION = 'REQUEST_SESSION',\n  DIRECT_LINK     = 'DIRECT_LINK',      // SDK to App \n  API_REQUEST     = 'API_REQUEST',      // SDK to App\n}\n\ninterface WindowMessage {\n  requestId   : number\n  messageId   : string\n  data       ?: Mubble.uObject<any>\n}\n\nexport class MuSdkBridge extends MuBridge {\n\n  initData          : WebSessionInitData\n  private reqMap    : Mubble.uObject<CordovaAsyncRequest> = {}\n\n  constructor(rc      : RunContextBrowser,\n              ngZone  : NgZone) {\n    super(rc, ngZone)\n  }\n\n  preInit() {\n\n    if (window['webkit'] && window['webkit'].messageHandlers.sdkCordova) {\n      this.userAgent  = UserAgent.IOS\n      this.permObj    = NATIVE.IOS_PERM\n      \n    } else if (window['sdkCordova']) {\n      this.userAgent  = UserAgent.ANDROID\n      this.permObj    = NATIVE.ANDROID_PERM\n      \n    } else {\n      this.userAgent  = UserAgent.BROWSER\n      this.webBridge  = new MuWebBridge(this.rc)\n      this.permObj    = NATIVE.BROWSER_PERM\n    }\n    \n    this.runningInBrowser = this.userAgent === UserAgent.BROWSER\n    this.state            = State.INITIALIZED\n  }\n\n  async init() {\n\n    await super.init()\n    this.initSdkType()\n\n    window.onmessage  = this.onIframeMessage.bind(this)\n  }\n\n  private initSdkType() {\n\n    this.sdkType = this.userAgent === UserAgent.BROWSER ? SDK_TYPE.WEB : SDK_TYPE.CORDOVA\n  }\n\n/*==============================================================================\n                            MESSAGING \n==============================================================================*/\n\n  async onIframeMessage(event : MessageEvent) {\n    \n    // const message = event.data as WindowMessage\n\n    // const requestId = message.requestId,\n    //       messageId = message.messageId,\n    //       data      = message.data\n\n    // this.rc.isDebug() && this.rc.debug(this.rc.getName(this), \n    //   `Came to process message ${requestId} ${messageId} ${data?JSON.stringify(data):''}`)\n\n    // const rootComp = this.rc.uiRouter.getRoot()\n\n    // switch (messageId) {\n\n    //   case RequestMessageId.REQUEST_SESSION : \n    //     this.initData = <WebSessionInitData>data \n    //     await rootComp.initWebSession(requestId, this.initData)\n    //     break\n\n    //   case RequestMessageId.DIRECT_LINK :\n    //     const directLink = data.directLink,\n    //           dlParams   = data.dlParams\n    //     await rootComp.handleDirectLink(requestId, directLink, dlParams)  \n    //     break\n\n    //   case RequestMessageId.API_REQUEST:\n    //     const apiName   = data.apiName,\n    //           apiParams = data.apiParams\n    //     this.rc.isAssert() && this.rc.assert(this.rc.getName(this), apiName, 'Invalid API args')\n    //     await rootComp.handleApiRequest(requestId, apiName, apiParams)\n    //     break\n  \n    //   default:\n    //     this.rc.isAssert() && this.rc.assert(this.rc.getName(this), `Invalid messageId: ${messageId}`)    \n    // }\n  }\n\n  postMessage(requestId: number, messageId: string,\n              code: string, data ?: Mubble.uObject<any>) {\n\n    if (this.sdkType === SDK_TYPE.CORDOVA) {\n      this.postMessageToCordova(requestId, messageId, code, data)\n      return\n    }\n\n    if (window === parent) return  \n\n    const response = { code, data },\n          message  = { requestId, messageId, response}\n\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), \n      `postMessage from App ${JSON.stringify(message)}`)\n    window.parent.postMessage(message, '*')\n  }\n\n  async onCordovaMessage(requestId: number, data ?: Mubble.uObject<any>) {\n\n    // const rootComp = this.rc.uiRouter.getRoot()\n\n    // this.initData = data.initData\n    // rootComp.initCordovaSession(requestId, this.initData)\n    \n    // const invData     = data.invData,\n    //       directLink  = invData.directLink,\n    //       dlParams    = invData.dlParams\n\n    // rootComp.handleDirectLink(requestId, directLink, dlParams)\n\n    // const nar = new CordovaAsyncRequest(requestId)\n    // this.reqMap[nar.requestId] = nar\n\n    // await nar.promise\n  }\n\n  async postMessageToCordova(requestId: number, messageId: string,\n                             code: string, data ?: Mubble.uObject<any>) {\n\n    // const nar = this.reqMap[requestId]\n    // if (!nar) {\n    //   this.rc.isError() && this.rc.error(this.rc.getName(this), \n    //     'Request id', requestId, 'is missing in request map')\n    //   return\n    // }\n\n    // delete this.reqMap[requestId]\n    \n    // const obj = { requestId, messageId, code, data }\n    // nar.resolve(obj)\n  }\n\n  async onSdkSuccessResponse(requestId: number, data: object = null, \n                             closeApp: boolean = true) {\n    \n    // if (this.sdkType === SDK_TYPE.WEB || this.sdkType === SDK_TYPE.CORDOVA) {\n    //   const obj : ActCompInterface = {\n    //     code : ActCompInterfaceCode.SUCCESS,\n    //     data : data\n    //   }\n\n    //   const rootComp = this.rc.uiRouter.getRoot()\n    //   rootComp.onActionComplete(requestId, obj)\n    //   return\n    // }\n\n    // super.onSdkSuccessResponse(requestId, data, closeApp)\n  }\n\n  async onSdkFailureResponse(requestId: number, data: object, uiError: object, \n                             closeApp: boolean = true) {\n\n    // if (this.sdkType === SDK_TYPE.WEB || this.sdkType === SDK_TYPE.CORDOVA) {\n    //   const obj : ActCompInterface = {\n    //     code : ActCompInterfaceCode.FAILURE,\n    //     data : uiError\n    //   }\n\n    //   const rootComp = <SdkRootComponent>this.rc.uiRouter.getRoot()\n    //   rootComp.onActionComplete(requestId, obj)\n    //   return\n    // }\n\n    // super.onSdkFailureResponse(requestId, data, uiError, closeApp)\n  }\n}\n\nclass CordovaAsyncRequest {\n      \n  promise         : Promise<object>\n  resolve         : (object) => void\n  reject          : () => void\n\n  constructor(public requestId : number) {\n\n    this.promise    = new Promise((resolve, reject) => {\n      this.resolve  = resolve\n      this.reject   = reject\n    })\n  }\n}\n","/*------------------------------------------------------------------------------\n   About      : <Write about the file here>\n   \n   Created on : Sat Apr 22 2017\n   Author     : Raghvendra Varma\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { XmnRouterBrowser }                   from '../xmn'\nimport { WIRE_TYPE, \n         WireObject, \n         XmnError,\n         LOG_LEVEL,\n         CustomData,\n         ConnectionInfo\n       }                                      from '@mubble/core'\nimport { GcCategory, \n         GcKey, \n         SessionGC\n       }                                      from './constants'\nimport { RunContextBrowser }                  from '../rc-browser'\n\n\nexport class MuRouterApp extends XmnRouterBrowser {\n\n  private userLoggedIn      : boolean\n  private isSessionTimedout : boolean\n\n  constructor(rc: RunContextBrowser, serverUrl: string, ci: ConnectionInfo, pubKey : string, encIV:Uint8Array ) {\n\n    super(rc, serverUrl, ci, pubKey, encIV)\n    \n    rc.setupLogger(this, 'RouterApp', LOG_LEVEL.DEBUG)\n\n  }\n\n  getNetworkType(rc: RunContextBrowser): string {\n    return rc.utils.getNetworkType(rc) \n  }\n\n  getLocation(rc: RunContextBrowser): string {\n    return rc.utils.getLocation(rc)\n  }\n\n  getMaxOpenSecs(): number {\n    return 100\n  }\n\n  getCustomData(rc: RunContextBrowser) : CustomData {\n    return {} as CustomData\n  }\n\n  canStrtLastReqTimer() {\n    return this.userLoggedIn\n  }\n\n  runAlwaysAsSecure(rc: RunContextBrowser): boolean {\n    return false\n  }\n\n  async getSessionTimeOutSecs(rc : RunContextBrowser) {\n    const gcConfig  = await rc.gcConfigKeyVal.getConfig(GcCategory.Session, GcKey.GeneralConfig) as any,\n          sessionGc = Object.assign({}, gcConfig) as SessionGC\n\n    return rc.getGlobalLogLevel() === LOG_LEVEL.DEBUG ?  20000 : sessionGc.fgTimeoutSec\n  }\n\n  sessionTimedOut(rc : RunContextBrowser) {\n    rc.isStatus() && rc.status(rc.getName(this), `session timed out.`)\n    this.isSessionTimedout  = true\n  }\n\n  async updateCustomData(rc: RunContextBrowser, inp: CustomData) {\n\n  }\n\n  async prepareConnection(rc: RunContextBrowser) {\n\n    if (rc.bridge.isRunningInBrowser()) super.prepareConnection(rc)\n    else                            await rc.bridge.prepareConnection()\n  }\n\n/*==============================================================================\n                            API CALLS\n===============================================================================*/\n\n  // Never throws\n  async sendRequest(rc: RunContextBrowser, api: string, params: object): Promise <object>  {\n\n    if (!api || !params) throw new Error(`Invalid argument for sendRequest api: ${api} params: ${params}`)\n\n    if (rc.utils.isNetworkUnhealthy(rc)) {\n      const error = {\n        errorCode : XmnError.NetworkNotPresent\n      }\n\n      return error\n    }\n\n    if (rc.bridge.isRunningInBrowser()) {\n\n      if (this.isSessionTimedout) {\n        location.reload()\n      }\n\n      const resp = await this.sendBrowserRequest(rc, api, params)\n\n      if (rc.utils.isOfTypeUiError(resp) && resp['errorCode'] === XmnError._ConnectionExpired) {\n        return await this.sendRequest(rc, api, params)\n      } else {\n        return resp\n      }\n  \n    } else {\n      const resp = await rc.bridge.sendRouterRequest(api, params)\n      if (resp.errorCode) {\n        const error = {\n          errorCode : resp.errorCode,\n          errorMessage : resp.errorMessage\n        }\n        return error as any\n      \n      }\n      if (resp.events) await this.handleCordovaRouterEvents(rc, resp.events)\n      return resp.data\n    }\n  }\n\n  // async startSession(rc: RunContextBrowser, reset: boolean): Promise<string> {\n\n  //   return rc.bridge.isRunningInBrowser() \n  //     ? await this.startBrowserSession(rc) \n  //     : await this.startCordovaSession(rc, reset)\n  // }\n\n\n  // private async startBrowserSession(rc: RunContextBrowser): Promise<string> {\n\n  //   const req : StartSession.params = {\n  //     fcmId     : rc.bridge.getFcmId(), \n  //     adId      : rc.bridge.getAdId(),\n  //     psuedoId  : rc.bridge.getPseudoId(),\n  //     referrer  : rc.bridge.getReferrerParams()\n  //   }\n\n  //   const resp: StartSession.retval | UiError = await this.sendRequest(rc, \n  //       StartSession.name, req) as (StartSession.retval | UiError)\n    \n  //   if (rc.utils.isOfTypeUiError(resp)) throw new Error(resp.errorCode)\n\n  //   await this.onNcInstanceId(rc, resp.clientId, resp.appSettings, resp.settingsMd5)\n  //   return resp.navUrl\n  // }\n\n  // private async startCordovaSession(rc: RunContextBrowser, reset: boolean): Promise<string> {\n\n  //   const resp = reset ? await rc.bridge.recreateSession() \n  //                      : await rc.bridge.getSessionInfo()\n\n  //   if (resp.errorCode) {\n  //     rc.isDebug() && rc.debug(rc.getName(this), `Got error in startCordovaSession`)\n  //     throw new Error(resp.errorCode)\n  //   }\n\n  //   if (resp.events) await this.handleCordovaRouterEvents(rc, resp.events)\n\n  //   const retval = resp.data as StartSession.retval\n  //   await this.onNcInstanceId(rc, retval.clientId, retval.appSettings, retval.settingsMd5)\n  //   return retval.navUrl\n  // }\n\n/*==============================================================================\n                            EVENTS\n===============================================================================*/\n\n  public sendEvent(rc: RunContextBrowser, name: string, params: object, ephemeral: boolean) {\n\n    if (!rc.bridge.isRunningInBrowser()) {\n      rc.bridge.sendRouterEvent(name, params, ephemeral)\n      return\n    }\n\n    if (ephemeral) {\n      this.sendEphemeralEvent(rc, name, params)\n    } else {\n      this.sendPersistentEvent(rc, name, params)\n    }\n  }\n\n\n/*==============================================================================\n                            MEMBER FUNCTIONS\n===============================================================================*/\n\n  protected async handleCordovaRouterEvents(rc: RunContextBrowser ,events: Array<JSON>) {\n\n    while(events.length) {\n      const event = events.shift() as any as WireObject\n      // Do not pass sys events to xmn-router-browser\n      if (event.type === WIRE_TYPE.SYS_EVENT) {\n        rc.isAssert() && rc.assert(rc.getName(this), `Platform should handle SysEvents on its own`)\n      } else {\n        await this.providerMessage(rc, [WireObject.getWireObject(event)])\n      }\n    }\n  }\n\n\n  protected async sendBrowserRequest(rc: RunContextBrowser, api: string, params: object): Promise <object> {\n    \n    return await super.sendRequest(rc, api, params)\n    .catch(err => {\n        const error = {\n          errorCode     : err.code || err.message,\n          errorMessage  : err.message || ''\n        }\n        return error\n      })\n  }\n\n\n}\n","export const ANALYTICS_EVENT = {\n  APP_LAUNCH        : 'appLaunch',\n  APP_SHARE         : 'appShare',\n}\n\nexport const ANALYTICS_EVENT_PARAMS = {\n\n  SCREEN                : 'screen',\n  ACTION                : 'action',\n  SCREEN_STATE          : 'screenState',\n  SCREEN_STATE_ERROR    : 'error',\n  SCREEN_STATE_SUCCESS  : 'success',\n  SCREEN_STATE_NO_DATA  : 'noData',\n  BTN_RETRY_ERR         : 'retryErr'\n}\n","/*------------------------------------------------------------------------------\n   About      : Transient screen level analytics data storage\n   \n   Created on : Sat Nov 03 2018\n   Author     : Sid\n   \n   Copyright (c) 2018 Obopay. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { RunContextBrowser }                            from '../../rc-browser'\nimport { DIRECTION }                                    from '../../ui'\n\nexport class AnalyticsScreenInfo {\n\n  private invocationTs        : number\n  private navMode             : string\n  private modal               : boolean = false\n  private eventData           : JSON = <JSON> { }\n\n  constructor(private rc: RunContextBrowser, private screenName: string, \n      private invocationSource: string, navMode?: string, modal?: boolean) {\n\n    rc.setupLogger(this, 'AnalyticsScreenInfo')\n\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), \n      'Creating new AnalyticsScreen State:', screenName, 'Invocation:', \n      invocationSource)\n    \n    this.invocationTs       = Date.now()\n    this.navMode            = navMode !== undefined ? navMode : 'unknown'\n    this.modal              = modal\n  }\n\n  getInvocationSource(): string { return this.invocationSource }\n\n  getScreenName(): string { return this.screenName }\n  \n  onScreenDestroy() {\n\n    let eventName               = this.modal ? 'mod_' : ''\n    eventName                  += this.screenName + '_screen'\n    this.eventData['from']      = this.invocationSource\n    this.eventData['inv_ts']    = this.invocationTs,\n    this.eventData['stay_time'] = Date.now() - this.invocationTs\n    this.eventData['nav_mode']  = this.navMode\n\n    this.rc.userEvent.logEvent(eventName, this.eventData)\n  }\n\n  setScreenState(stateName: string, stateValue: number | string) {\n    this.eventData[stateName] = stateValue\n\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), \n      `Screen state: ${stateName}, value: ${stateValue}`)\n  }\n\n  setScreenAction(actionName: string) {\n    \n    if (this.eventData.hasOwnProperty(actionName)) {\n      let count: number = this.eventData[actionName]\n      this.eventData[actionName] = ++count\n    } else {\n      this.eventData[actionName] = 1\n    }\n\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), \n      'Screen Action:', actionName, 'Count: ', this.eventData[actionName])\n  }\n\n  setScreenActionScroll(direction: DIRECTION) {\n\n    switch(direction) {\n\n      case DIRECTION.LEFT:\n        this.eventData['scrollLeft'] = 1\n        break\n\n      case DIRECTION.UP:\n        this.eventData['scrollUp'] = 1\n        break\n        \n      case DIRECTION.RIGHT:\n        this.eventData['scrollRight'] = 1\n        break\n        \n      case DIRECTION.DOWN:\n        this.eventData['scrollDown'] = 1\n        break\n    }\n\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), 'Screen Scroll:', direction)\n  }\n}\n","/*------------------------------------------------------------------------------\n   About      : Analytics event logger / data bridge with native.\n   \n   Created on : Tue Jul 25 2017\n   Author     : Sid\n   \n   Copyright (c) 2017 Mubble Networks Private Limited. All rights reserved.\n------------------------------------------------------------------------------*/\nimport { EventSystem, \n         EVENT_PREFIX \n       }                                              from '../../util'\nimport { ANALYTICS_EVENT, \n         ANALYTICS_EVENT_PARAMS \n       }                                              from './analytics-event'\nimport { RunContextBrowser }                          from '../../rc-browser'\n\nconst _EVENT_PREFIX = EVENT_PREFIX + '-'\n\nconst MAX_LOG_NAME_SIZE   = 32\nconst MAX_KEY_NAME_SIZE   = 24\nconst MAX_VALUE_NAME_SIZE = 36\n\nconst USER_PROPERTIES = {\n  USER_LINK_ID        : 'user_link_id',\n  EMAIL_ID            : 'email_id',\n  APP_LANG            : 'app_lng'\n}\n\nexport class AnalyticsEventLogger {\n\n  private allowLogging  : boolean\n\n  constructor(protected rc: RunContextBrowser) {\n\n    this.allowLogging = false\n    if (this.rc.userKeyVal.clientId) this.initLogging()\n  }\n\n  initLogging() {\n\n    this.allowLogging = true\n      \n    this.setUserId(this.rc.userKeyVal.clientId)\n    this.setAllUserProperties()\n    this.sendSessionEvents()\n    \n    // EventSystem.subscribeAll([\n    //   APP_UI_EVENT.UPDATE_USER_EMAIL] , this.handleEvent.bind(this))\n  }\n\n  private handleEvent(eventName: string) {\n\n    switch(eventName) {\n\n      // case _EVENT_PREFIX + APP_UI_EVENT.UPDATE_USER_EMAIL:\n      //   this.setUserProperty(USER_PROPERTIES.EMAIL_ID, this.rc.userKeyVal.emailId)\n      //   break\n    }\n  }\n\n  private setAllUserProperties() {\n    \n\n    if (this.rc.userKeyVal.userLinkId) {\n      this.setUserProperty(USER_PROPERTIES.USER_LINK_ID, this.rc.userKeyVal.userLinkId)\n      // this.setUserProperty(USER_PROPERTIES.EMAIL_ID, this.rc.userKeyVal.emailId)\n    }\n  }\n\n  private sendSessionEvents() {\n    // Sending app launch session event\n    this.logEvent(ANALYTICS_EVENT.APP_LAUNCH, null)\n  }\n\n  private setUserId(userId: number) {\n\n    if (!this.allowLogging || !userId) return\n    \n    this.rc.isStatus() && this.rc.status(this.rc.getName(this), 'Firebase userId: ', userId)  \n    this.rc.bridge.setUserId(userId)\n  }\n\n  private setUserProperty(propName: string, value: string) {\n    \n    if (!this.allowLogging) return\n\n    const valid: boolean = propName != null && propName.length > 0 && \n        propName.length <= MAX_KEY_NAME_SIZE && value != null && \n        value.length > 0 && value.length <= MAX_VALUE_NAME_SIZE\n\n    if (!valid) {\n      this.rc.isWarn() && this.rc.warn('NcFirebase', \n        'Invalid Firebase User Property:', propName, value)\n      return\n    }\n\n    this.rc.isStatus() && this.rc.status(this.rc.getName(this), \n      'Firebase userProperty:: Name: ', propName, 'Value: ', value)\n      this.rc.bridge.setUserProperty(propName, value)\n  }\n\n  logAppShare(routeName: string, sharePkg: string) {\n\n    const eventData: JSON = <JSON>{}\n    eventData[ANALYTICS_EVENT_PARAMS.SCREEN]    = routeName\n    this.logEvent(ANALYTICS_EVENT.APP_SHARE, eventData)\n  }\n\n  logEvent(eventName: string, eventData: object) {\n\n    if (!this.allowLogging) {\n      this.rc.isStatus() && this.rc.status(this.rc.getName(this), \n        'Cannot send Firebase event, Allow logging false')\n      return\n    }\n\n    this.logPublicEvent(eventName, eventData)\n  }\n\n  logPublicEvent(eventName: string, eventData: object) {\n\n    if (eventName == null || eventName.length === 0 || eventName.length >= MAX_LOG_NAME_SIZE) {\n      this.rc.isWarn() && this.rc.warn('NcFirebase', \n        'Firebase eventName invalid: empty OR length > 32 characters, exiting...')\n      return\n    }\n\n    eventData = this.checkNValidateBundle(eventData)\n\n    this.rc.isStatus() && this.rc.status('NcFirebase', \n      'Logging Firebase event:', eventName, JSON.stringify(eventData))\n      this.rc.bridge.logEvent(eventName, JSON.stringify(eventData))\n  }\n\n  private checkNValidateBundle(bundle: object): JSON {\n\n    if (bundle === null) return <JSON>{}\n\n    let eventData = <JSON>{}\n    \n    for (let key in bundle) {\n      const val              : any      = bundle[key]\n      const inValidKey       : boolean  = key !== this.validKey(key)\n      const inValidValue     : boolean  = typeof(val) === 'string' && val !== this.validStringValue(String(val))\n      const inValidValueType : boolean  = !(typeof(val) === 'string' || typeof(val) === 'number') \n\n      if (inValidKey || inValidValue || inValidValueType) {\n        const objVal = inValidKey ? key : String(val);\n        this.rc.isWarn() && this.rc.warn('NcFirebase', \n          'Invalid key : value pair inside event:', objVal, inValidValue, inValidValueType)\n      } else {\n        eventData[key] = bundle[key]\n      }\n    }\n    return eventData\n  }\n\n  private validKey(key: string): string {\n\n    if (key.length > 0 && key.length <= MAX_KEY_NAME_SIZE) return key\n    this.rc.isWarn() && this.rc.warn('NcFirebase', \n      'FireBase Key length is 0 || > 24 Characters...')\n    return key.substring(0, MAX_KEY_NAME_SIZE)\n  }\n\n  private validStringValue(value: string): string {\n\n    if (value.length > 0 && value.length <= MAX_VALUE_NAME_SIZE) return value;\n    this.rc.isWarn() && this.rc.warn('NcFirebase', \n      'FireBase Value length is 0 || > 36 Characters...')\n    return value.substring(0, MAX_VALUE_NAME_SIZE);\n  }\n\n}","/*------------------------------------------------------------------------------\n   About      : Class responsible for creation, manitenance and destruction of \n                screen state for analytics in between navigationd from any one \n                router-outlet to another.\n\n   Created on : Sat Nov 03 2018\n   Author     : Sid\n\n   Copyright (c) 2018 Obopay. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { RunContextBrowser }                      from '../../rc-browser'\nimport { AnalyticsScreenInfo }                from './analytics-screen-info'\nimport { NavMethod, \n         DIRECTION, \n         OUTLET, \n         MODAL_OUTLET\n       }                                      from '../../ui'\nimport { EventSystem }                        from '../../util'\nimport { LOG_LEVEL }                          from '@mubble/core'\n\nconst NavMode = {\n  Launch  : 'page_launch',\n  Next    : 'page_next',\n  Back    : 'page_back',\n  Dialog  : 'page_dialog'\n}\n\nconst INVOCATION_LAUNCH   = 'launch'\nconst INVOCATION_RELAUNCH = 'relaunch'\n\nexport class AnalyticsScreenManager {\n\n  private currScreenState     : AnalyticsScreenInfo\n  private currModalState      : AnalyticsScreenInfo\n\n  private currTabScreenState  : AnalyticsScreenInfo\n  private currTabRoutes       : string[]\n\n  private lastModalName       : string\n  private lastTabSceenName    : string\n  private lastScreenName      : string\n\n  private pendingTabActions = {}\n  private pendingTabStates  = {}\n\n  constructor(private rc: RunContextBrowser) {\n\n    rc.setupLogger(this, 'AnalyticsScreenManager')\n    this.lastScreenName = ''\n    this.currModalState = null\n\n    // EventSystem.subscribe(APP_UI_EVENT.CORDOVA_SCREEN_PAUSE, this.onScreenPause.bind(this))\n    // EventSystem.subscribe(APP_UI_EVENT.CORDOVA_SCREEN_RESUME, this.onScreenResume.bind(this))\n    if (rc.getGlobalLogLevel() === LOG_LEVEL.DEBUG)  window['screenmanager'] = this\n  }\n\n  getCurrentScreenName(): string {\n\n    return this.currModalState != null ? this.currModalState.getScreenName()\n                                       : this.currScreenState.getScreenName()\n  }\n\n  onNavEnd(eventUrl: string, outlet: OUTLET, lastNavMethod: NavMethod) {\n\n    this.rc.isDebug() && this.rc.debug(this.rc.getName(this), \n      'Inside onNavEnd', eventUrl, lastNavMethod)\n\n    let screenName: string\n\n    if (eventUrl.startsWith('/')) {\n      screenName = this.getFbaseScreenName(eventUrl.substring(1))\n      this.rc.isStatus() && this.rc.status(this.rc.getName(this), \n        'Found screenName: ', screenName)\n    }\n\n    if (this.lastScreenName === screenName) {\n      // Same page is invoked but with diff query params..add stay time\n      this.rc.isDebug() && this.rc.debug(this.rc.getName(this), \n        'Same page invoked, Ignoring...')\n\n      if (this.currModalState) {\n        this.currModalState.onScreenDestroy()\n        this.currModalState = null\n      }\n      return\n    }\n\n    // Handling modal outlet\n    if (outlet === MODAL_OUTLET) {\n      this.rc.isAssert() && this.rc.assert(this.rc.getName(this), \n        this.currModalState === null, 'Already tracking a modal...')\n\n      let modalName: string = eventUrl.match(/.*=\\((.*)\\)/)[1]\n      modalName = this.getFbaseScreenName(modalName)\n      \n      this.currModalState = new AnalyticsScreenInfo(this.rc, modalName, \n        this.currScreenState.getScreenName(), NavMode.Dialog, true)\n      \n      this.lastModalName = eventUrl\n      return\n\n    } else if (this.currModalState) {\n      this.currModalState.onScreenDestroy()\n      this.currModalState = null\n    }\n\n    let navMode : string \n    let invSrc  : string\n\n    if (this.currScreenState) {\n      this.currScreenState.onScreenDestroy()\n      navMode = lastNavMethod === NavMethod.POP ? NavMode.Back : NavMode.Next\n      invSrc  = this.currTabScreenState ? this.currTabScreenState.getScreenName() \n                                        : this.currScreenState.getScreenName()\n    } else {\n      navMode = NavMode.Launch\n      invSrc  = INVOCATION_LAUNCH\n    }\n\n    this.currScreenState = new AnalyticsScreenInfo(this.rc, screenName, invSrc, navMode)\n    this.lastScreenName = screenName\n  }\n\n  setCurrentTabRoutes(tabRoutes: string[]) {\n    this.currTabRoutes = tabRoutes\n  }\n\n  onTabNavEnd(currScreenName : string, tabIndex : number) {\n\n    const tabScreenName = this.getFbaseScreenName(currScreenName)\n\n    if (this.currTabScreenState)  this.currTabScreenState.onScreenDestroy()\n\n    this.lastTabSceenName   = this.currTabRoutes[tabIndex]\n    const invSource         = this.currTabScreenState ? this.currTabScreenState.getScreenName() \n                                                      : INVOCATION_LAUNCH\n    this.currTabScreenState = new AnalyticsScreenInfo(this.rc, tabScreenName, invSource)\n\n    this.digestPendingTabScreen(tabIndex)\n  }\n\n  onTabDestroy() {\n    this.currTabScreenState.onScreenDestroy()\n    this.currTabScreenState = null\n  }\n\n  logScreenActionScroll(screenName: string, direction: DIRECTION) {\n    \n    screenName = this.getFbaseScreenName(screenName)\n\n    if (this.currModalState && this.currModalState.getScreenName() === screenName) {\n      this.currModalState.setScreenActionScroll(direction)\n    } else {\n      this.currScreenState.setScreenActionScroll(direction)\n    }\n  }\n\n  logScreenAction(screenName: string, actionName: string) {\n\n    screenName = this.getFbaseScreenName(screenName)\n\n    if (this.currModalState && this.currModalState.getScreenName() === screenName) {\n      this.currModalState.setScreenAction(actionName)\n\n    } else if (this.currScreenState.getScreenName() === screenName) {\n      this.currScreenState.setScreenAction(actionName)\n\n    } else if (this.currTabRoutes) {\n      this.onTabScreenAction(screenName, actionName)\n\n    } else {\n      this.rc.isAssert() && this.rc.assert(this.rc.getName(this), false, \n        'Invalid screen action', screenName, actionName, 'Expected screen', this.currScreenState.getScreenName())\n    }\n  }\n\n  logScreenState(screenName: string, stateName: string, stateValue: number | string) {\n\n    screenName = this.getFbaseScreenName(screenName)\n    \n    if (this.currModalState && this.currModalState.getScreenName() === screenName) {\n      this.currModalState.setScreenState(stateName, stateValue)\n\n    } else if (this.currScreenState.getScreenName() === screenName) {\n      this.currScreenState.setScreenState(stateName, stateValue)\n    \n    } else if (this.currTabRoutes) {\n      this.onTabScreenState(screenName, stateName, stateValue)\n    } else {\n      this.rc.isError() && this.rc.error(this.rc.getName(this), \n      `Invalid screen state', ${screenName}, ${stateName}, 'Expected screen name ', ${this.currScreenState.getScreenName()}`)\n    }\n  }\n\n  private onTabScreenAction(screenName: string, actionName: string) {\n\n    if (this.lastTabSceenName === screenName && this.currTabScreenState) {\n      this.currTabScreenState.setScreenAction(actionName)\n\n    } else {\n\n      this.rc.isAssert() && this.rc.assert(this.rc.getName(this), \n      this.currTabRoutes.indexOf(screenName) !== -1, \n      `invalid tab screen name ${screenName} ${actionName}`)\n\n      let actions: string[] = this.pendingTabActions[screenName]\n      if (!actions) actions = []\n      actions.push(actionName)\n      this.pendingTabActions[screenName] = actions\n    }\n  }\n\n  private onTabScreenState(screenName: string, stateName: string, stateValue: number | string) {\n\n    if (this.lastTabSceenName === screenName && this.currTabScreenState) {\n      this.currTabScreenState.setScreenState(stateName, stateValue)\n\n    } else {\n\n      this.rc.isAssert() && this.rc.assert(this.rc.getName(this), \n      this.currTabRoutes.indexOf(screenName) !== -1, \n      `invalid tab screen name ${screenName} ${stateName}`)\n\n      let routeTabState = this.pendingTabStates[screenName]\n      if (!routeTabState) routeTabState = {}\n      routeTabState[stateName] = stateValue\n      this.pendingTabStates[screenName] = routeTabState\n    }\n  }\n\n  private digestPendingTabScreen(tabIndex: number) {\n\n    const currScreenName  = this.currTabRoutes[tabIndex]\n    // Digest route Actions\n    const actions: string[] = this.pendingTabActions[currScreenName]\n    if (actions) {\n      actions.forEach(action => {\n        this.currTabScreenState.setScreenAction(action)\n      })\n      this.pendingTabActions[currScreenName] = []\n    }\n    \n    // Digest route States\n    const states = this.pendingTabStates[currScreenName]\n    if (states) {\n      for (let key in states) {\n        this.currTabScreenState.setScreenState(key, states[key])\n      }\n      this.pendingTabStates[currScreenName] = {}\n    }\n  }\n\n  onScreenPause() {\n\n    if (this.currModalState) this.currModalState.onScreenDestroy()\n    if (this.currTabScreenState) this.currTabScreenState.onScreenDestroy()\n    this.currScreenState.onScreenDestroy()\n  }\n\n  private onScreenResume() {\n\n    if (this.currModalState) this.currModalState = new AnalyticsScreenInfo(this.rc, \n        this.currModalState.getScreenName(), this.currModalState.getInvocationSource(), \n        INVOCATION_RELAUNCH, true)\n\n    if (this.currTabScreenState) this.currTabScreenState = new AnalyticsScreenInfo(this.rc, \n      this.currTabScreenState.getScreenName(), this.currTabScreenState.getInvocationSource(), \n      INVOCATION_RELAUNCH)\n\n    this.currScreenState = new AnalyticsScreenInfo(this.rc, this.currScreenState.getScreenName(), \n        this.currScreenState.getInvocationSource(), INVOCATION_RELAUNCH)\n  }\n\n  private getFbaseScreenName(url: string) {\n\n    let screenName\n    const paramIdx = url.indexOf('?')\n    screenName = url.substring(0, paramIdx > 0 ? paramIdx : url.length).replace('%2F', '/')\n    \n    const moduleIdx = screenName.indexOf('/')\n    if (moduleIdx !== -1) screenName = screenName.substring(moduleIdx + 1, screenName.length)\n\n    return screenName\n  }\n}","/*------------------------------------------------------------------------------\n   About      : UI router BaseApp app specific implementation \n   \n   Created on : Sat Nov 03 2018\n   Author     : Sid\n   \n   Copyright (c) 2018 Obopay. All rights reserved.\n------------------------------------------------------------------------------*/\n\nimport { Injectable, Inject }       from '@angular/core'\nimport { Router }                   from '@angular/router'\nimport { UiRouter, \n         TranslateService,\n         TOAST_POSITION, \n         DIRECTION,\n         TrackableScreen,\n         NcNavigationExtras\n       }                            from '../../ui'\nimport { Mubble, \n         LOG_LEVEL \n       }                            from '@mubble/core'\nimport { RunContextBrowser }        from '../../rc-browser'\nimport { AnalyticsScreenManager }   from '../analytics'\nimport { HashidParams }             from '../constants'\n\nexport interface RoutingInfo {\n  routeTo     : string\n  queryParams : Mubble.uObject<any>\n  hostName    : string\n}\n\n@Injectable()\nexport class MuUiRouter extends UiRouter {\n\n  // helper for ui framework\n  analyticsScreenMgr    : AnalyticsScreenManager\n  protected appProtocol : string\n  protected appHost     : string\n\n\n  constructor(@Inject('RunContext') protected rc  : RunContextBrowser,\n              router                              : Router,\n              protected translate                 : TranslateService) {\n\n    super(rc, router)\n\n    rc.setupLogger(this, 'AppUiRouter', LOG_LEVEL.DEBUG)\n    \n    if (rc.getGlobalLogLevel() === LOG_LEVEL.DEBUG) {\n      window['uiRouter']  = this\n    }\n\n    rc.uiRouter             = this\n    this.analyticsScreenMgr = new AnalyticsScreenManager(rc)\n  }\n\n  setAppProtoAndHost(appProtocol : string, appHost  : string) {\n\n    this.appHost      = appHost\n    this.appProtocol  = appProtocol\n  }\n\n  public showToast(toastMessage: string, stay ?: boolean, position ?: TOAST_POSITION) {\n    \n  }\n\n  public showOverlay(overlayText: string = this.translate.instant('cmn_loading')) {\n  //   this.rootComp.showOverlay(overlayText)\n  }\n\n  public removeOverlay() {\n    // this.rootComp.removeOverlay()\n  }\n\n  /**\n   * Parse URL of the form route?params\n   */\n  getRoutingInfoForNavUrl(navUrl : string) {\n\n    navUrl = `${this.appProtocol}://${this.appHost}/` + navUrl\n    return this.getRoutingInfo(navUrl)\n  }\n\n  /**\n   * Parse URL of the form protocol://host/route?params\n   */\n  getRoutingInfo(directLink : string) {\n\n    const dlObj = this.rc.utils.parseURLForRouter(directLink)\n\n    const routingInfo : RoutingInfo = {\n      routeTo     : dlObj.pathname,\n      queryParams : dlObj.searchObject || {},\n      hostName    : dlObj.hostname\n    }\n\n    if (routingInfo.queryParams[HashidParams.LogLevel]) {\n      const logLevel = Number(routingInfo.queryParams[HashidParams.LogLevel])\n      if (this.rc.globalKeyVal.logLevel !== logLevel && logLevel === LOG_LEVEL.DEBUG) {\n        this.rc.bridge.enableDebug()\n      }\n    }\n\n    return routingInfo\n  }\n\n  navigateByDirectLink(directLink : string, ncExtracs ?: NcNavigationExtras) {\n\n    const routingInfo = this.getRoutingInfoForNavUrl(directLink)\n    \n    ncExtracs = ncExtracs || {}\n    \n    const params : NcNavigationExtras  = {\n      queryParams : routingInfo.queryParams\n    }\n\n    for (const key in ncExtracs)  {\n      if (!params[key]) {\n        params[key] = ncExtracs[key]\n      }\n    }\n    \n\n    this.navigate(routingInfo.routeTo, params)\n  }\n\n  // navigateForInfo(screen: TrackableScreen, navInfo: NavInfo, ncExtras ?: NcNavigationExtras) {\n\n  //   if (!navInfo) return\n\n  //   this.rc.isAssert() && this.rc.assert(this.rc.getName(this), \n  //     navInfo.navUrl && navInfo.logName, `missing navUrl or logName \n  //     ${navInfo.logName}, ${navInfo.navUrl}`)\n\n  //   this.rc.isDebug() && this.rc.debug(this.rc.getName(this), \n  //     `Came to navigate: LogName-${navInfo.logName}, Url-${navInfo.navUrl}`)\n\n  //   this.logScreenAction(screen, navInfo.logName)\n  //   this.navigateByDirectLink(navInfo.navUrl, ncExtras)\n  // }\n  /*--------------------------------------------------------------------------------------------------------------\n    History Stack management\n  --------------------------------------------------------------------------------------------------------------*/\n  onDeviceBack() {\n\n    this.rc.isStatus() && this.rc.status(this.rc.getName(this),'Device back')\n\n    window.setTimeout(() => {\n      if (this.urlStack.length === 1) {\n        if (this.warnedUser) {\n          this.analyticsScreenMgr.logScreenAction(this.analyticsScreenMgr.getCurrentScreenName(), 'close_app')\n          this.notifyAppClose()\n        } else {\n          this.showToast(this.translate.instant('cmn_press_back'))\n          this.warnedUser = true\n        }\n      } else {\n        this.analyticsScreenMgr.logScreenAction(this.analyticsScreenMgr.getCurrentScreenName(), 'sys_back')\n        this.goBack()\n      }\n    }, 0)\n  }\n\n\n\n  setCurrentTabRoutes(tabRoutes: string[]) {\n    this.analyticsScreenMgr.setCurrentTabRoutes(tabRoutes)\n  }\n\n  onTabNavEnd(currScreenName : string, currentIndex : number) {\n    this.analyticsScreenMgr.onTabNavEnd(currScreenName, currentIndex)\n  }\n\n  onTabDestroy() {\n    this.analyticsScreenMgr.onTabDestroy()\n  }\n\n  logScreenActionScroll(screen: TrackableScreen, direction: DIRECTION) {\n    this.analyticsScreenMgr.logScreenActionScroll(screen.getRouteName(), direction)\n  }\n\n  logScreenAction(screen: TrackableScreen, actionName: string) {\n    this.analyticsScreenMgr.logScreenAction(screen.getRouteName(), actionName)\n  }\n\n  logScreenState(screen: TrackableScreen, stateName: string, stateValue: number | string) {\n    this.analyticsScreenMgr.logScreenState(screen.getRouteName(), stateName, stateValue)\n  }\n\n\n  \n  getRoot() {\n    return {\n\n      getBusinessId() {\n        return ''\n      },\n\n      onPayUResponse(data : object) {\n\n      },\n\n      handleError(e: Error) {\n        // YTODO - should implement handle error\n        this.rc.isStatus() && this.rc.status(this.rc.getName(this), `Came to handleError inside library: ${e}`)\n        // this.showError(e.message)\n        // this.showJS()\n      }\n      \n      \n    }\n  }\n\n}","\nimport { RunContextBrowser, InitConfigBrowser, RunStateBrowser } from '../public-api';\n\n\n\n\nexport class RunContextJest extends RunContextBrowser {\n\n  constructor(initConfig: InitConfigBrowser, runState: RunStateBrowser, contextId?: string, contextName?: string) {\n    super(initConfig, runState, contextId, contextName)\n  }\n  copyConstruct(contextId?: string, contextName?: string) {\n    const newRc = new RunContextJest(this.initConfig, this.runState, contextId, contextName)\n    this.clone(newRc)\n    return newRc\n  }\n}\n","\nexport const APP_UI_EVENT = {\n  USER_CARD_ACTIVATED       : 'user-card-activated',\n  YSE_RESPONSE              : 'yse-response'\n}\n"]}